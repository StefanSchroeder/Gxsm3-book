% Do not edit this file, it is autogenerated!
% Edit the PlugIn Docu section in the PlugIn source file instead!

% ------------------------------------------------------------

% start of PlugIn docu scan


% Subdirectory: ./plug-ins/scan
% ------------------------------------------------------------

\chapter{Plug-Ins: scan}

% Inclusion of PlugInClassIntro: ./plug-ins/scan/PlugInClass.doc


The \emph{scan} plugins are those used to handle import/export of scan
data -- not to do scanning as it may sound like, these things are
located in the \emph{control} section.

% PlugIn: ./plug-ins/scan/sdfimport.C
% ------------------------------------------------------------

\section{Import of Surface Data Format files}
% Name=sdfimport
% Author=Stefan Schroeder
% Email=stefan\_fkp@users.sf.net
% Menupath=File/Import/SDF-import

\label{pi:sdfimport}
\subsubsection{Description}

\label{plugins:sdfimport}
The \GxsmEmph{sdfimport} plug-in supports reading files
as defined by the surfstand group (search internet for 'surfstand'),
a group, sponsored by the EU to develop a basis for 3D surface
roughness standards.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/SDF-import}.

\GxsmNote{
No endianess independent code -- no cross platform data exchange possible.
}

\subsubsection{Known Bugs}

The scaling of the data, especially in Z direction is not well tested.

\index{C-PlugIn!scan/sdfimport.C}
\index{PlugIn!sdfimport}
\index{GXSM-Menu!File/Import/SDF-import}
\subsubsection{Info for Plug-In: File/Import/SDF-import }
\begin{tabbing}
Plug-In name:   \= Stefan Schroedersdfimport \= Email: \= x \kill
Plug-In name:   \> sdfimport\>  File:  \> scan/sdfimport.C\\
Author:	        \> Stefan Schroeder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/v5d_export.C
% ------------------------------------------------------------

\section{Import/Export of old (G-) dat files}
% Name=v5d\_Export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/G-dat

\label{pi:v5dExport}
\subsubsection{Description}

\label{plugins:v5d_export}
The \GxsmEmph{g\_dat\_im\_export} plug-in supports reading and writing of
the old \GxsmFile{.dat} fileformat used in Hannover at former times. It was used by
the very first xxsm, pmstm and even older OS/2 software in Hannover, mostly by
K\"ohler et al. Also the so called \GxsmEmph{gnutools} are can use this 16-bit data format. 
To distiguish different dat files, I call it \GxsmEmph{G-dat}. 

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/G-dat}.

\subsubsection{Known Bugs}

Not yet tested.

\index{C-PlugIn!scan/v5d\_export.C}
\index{PlugIn!v5d\_Export}
\index{GXSM-Menu!File/Import/G-dat}
\subsubsection{Info for Plug-In: File/Import/G-dat }
\begin{tabbing}
Plug-In name:   \= Percy Zahlv5d\_Export \= Email: \= x \kill
Plug-In name:   \> v5d\_Export\>  File:  \> scan/v5d\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/g_dat_im_export.C
% ------------------------------------------------------------

\section{Import/Export of old (G-) dat files}
% Name=G\_dat\_Im\_Export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/G-dat

\label{pi:GdatImExport}
\subsubsection{Description}

\label{plugins:g_dat_im_export}
The \GxsmEmph{g\_dat\_im\_export} plug-in supports reading and writing of
the old \GxsmFile{.dat} fileformat used in Hannover at former times. It was used by
the very first xxsm, pmstm and even older OS/2 software in Hannover, mostly by
K\"ohler et al. Also the so called \GxsmEmph{gnutools} are can use this 16-bit data format. 
To distiguish different dat files, I call it \GxsmEmph{G-dat}. 

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/G-dat}.

\subsubsection{Known Bugs}

Not yet tested.

\index{C-PlugIn!scan/g\_dat\_im\_export.C}
\index{PlugIn!G\_dat\_Im\_Export}
\index{GXSM-Menu!File/Import/G-dat}
\subsubsection{Info for Plug-In: File/Import/G-dat }
\begin{tabbing}
Plug-In name:   \= Percy ZahlG\_dat\_Im\_Export \= Email: \= x \kill
Plug-In name:   \> G\_dat\_Im\_Export\>  File:  \> scan/g\_dat\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/v5d_v5d.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/scan/ascii_data_im_export.C
% ------------------------------------------------------------

\section{ASCII data file Import/Export}
% Name=ascii\_data\_im\_export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/ASCII

\label{pi:asciidataimexport}
\subsubsection{Description}

\label{plugins:ascii_data_im_export}
The \GxsmEmph{ascii\_data\_im\_export} plug-in supports reading of ASCII data files.

It auto detects the text header "Reuben-NSNOM" as described below -- if this fails, it attempts to auto read a plain matrix of values, line by line.
Space or "CSV" separated numbers, dimensions are auto determined by max elements per line and number of lines found. File extension must be ".asc" or ".csv".

Special but simple text header "Reuben-NSNOM" is suggested. Here is a sample file:

{\tiny
\begin{verbatim}
scan length = 25.000000
points/line = 25
point spacing = 1.041667
# lines =  25
line spacing = 1.041667
points in average = 1
velocity = 2.000000
lock-in time constant (msec) = 30.000000
X origin = -1883.596000
Y origin = 1321.116000

end

-1.5850 -1.5889 -1.5967 -1.5737 -1.5610 -1.5581 -1.5518 -1.5537 -1.9194 -2.2808 -2.2148 -2.1709 -2.1382 -2.1367 -2.1123 -2.0864 -2.0684 -2.0498 -2.0376 -2.0171 -1.9990 -1.9912 -1.9824 -1.9741 -1.9575
-1.5796 -1.5811 -1.5684 -1.5718 -1.5625 -1.5552 -1.5425 -1.5488 -1.9272 -2.2764 -2.2104 -2.1660 -2.1387 -2.1294 -2.1094 -2.0801 -2.0645 -2.0464 -2.0337 -2.0229 -1.9961 -1.9883 -1.9824 -1.9717 -1.9604
-1.5776 -1.5747 -1.5854 -1.5718 -1.5610 -1.5488 -1.5400 -1.5474 -1.9253 -2.2651 -2.2124 -2.1597 -2.1338 -2.1309 -2.0996 -2.0728 -2.0601 -2.0420 -2.0293 -2.0205 -1.9839 -1.9839 -1.9790 -1.9683 -1.9561
-1.5688 -1.5840 -1.5825 -1.5640 -1.5518 -1.5488 -1.5361 -1.5430 -1.9395 -2.2607 -2.2070 -2.1548 -2.1309 -2.1250 -2.0942 -2.0708 -2.0557 -2.0391 -2.0264 -2.0156 -1.9912 -1.9810 -1.9712 -1.9653 -1.9502
-1.5674 -1.5776 -1.5776 -1.5610 -1.5474 -1.5459 -1.5288 -1.5347 -1.9136 -2.2549 -2.1963 -2.1519 -2.1250 -2.1182 -2.0913 -2.0664 -2.0537 -2.0327 -2.0254 -2.0098 -1.9897 -1.9780 -1.9687 -1.9590 -1.9487
-1.5610 -1.5732 -1.5732 -1.5566 -1.5439 -1.5391 -1.5259 -1.5337 -1.9502 -2.2471 -2.1919 -2.1445 -2.1196 -2.1123 -2.0850 -2.0620 -2.0420 -2.0278 -2.0146 -2.0054 -1.9868 -1.9712 -1.9609 -1.9531 -1.9424
-1.5610 -1.5640 -1.5684 -1.5547 -1.5381 -1.5332 -1.5229 -1.5308 -1.9697 -2.2422 -2.1782 -2.1387 -2.1157 -2.1094 -2.0820 -2.0576 -2.0405 -2.0220 -2.0146 -2.0034 -1.9805 -1.9687 -1.9580 -1.9502 -1.9390
-1.5562 -1.5625 -1.5640 -1.5483 -1.5308 -1.5283 -1.5171 -1.5107 -1.9854 -2.2378 -2.1797 -2.1367 -2.1123 -2.1030 -2.0742 -2.0542 -2.0337 -2.0171 -2.0098 -1.9961 -1.9741 -1.9624 -1.9517 -1.9453 -1.9316
-1.5503 -1.5562 -1.5610 -1.5410 -1.5283 -1.5244 -1.5073 -1.5181 -1.9443 -2.2300 -2.1768 -2.1309 -2.1094 -2.1030 -2.0664 -2.0464 -2.0312 -2.0146 -2.0020 -1.9897 -1.9717 -1.9561 -1.9497 -1.9409 -1.9316
-1.5459 -1.5532 -1.5581 -1.5400 -1.5239 -1.5171 -1.5073 -1.5044 -1.9302 -2.2227 -2.1738 -2.1260 -2.1021 -2.0967 -2.0693 -2.0435 -2.0264 -2.0083 -1.9990 -1.9849 -1.9653 -1.9531 -1.9453 -1.9395 -1.9253
-1.5410 -1.5483 -1.5483 -1.5317 -1.5181 -1.5181 -1.5015 -1.4585 -1.9780 -2.2178 -2.1670 -2.1216 -2.0972 -2.0894 -2.0645 -2.0391 -2.0249 -2.0054 -1.9941 -1.9819 -1.9624 -1.9512 -1.9404 -1.9302 -1.9224
-1.5337 -1.5410 -1.5425 -1.5244 -1.5137 -1.5132 -1.4951 -1.4966 -1.9224 -2.2114 -2.1597 -2.1172 -2.0957 -2.0864 -2.0601 -2.0327 -2.0171 -1.9990 -1.9912 -1.9741 -1.9561 -1.9453 -1.9375 -1.9287 -1.9165
-1.5322 -1.5332 -1.5425 -1.5210 -1.5107 -1.5093 -1.4907 -1.4917 -1.9575 -2.2061 -2.1567 -2.1104 -2.0894 -2.0845 -2.0527 -2.0278 -2.0142 -1.9971 -1.9868 -1.9712 -1.9526 -1.9409 -1.9316 -1.9238 -1.9116
-1.5308 -1.5181 -1.5361 -1.5088 -1.5059 -1.5015 -1.4873 -1.4873 -1.9653 -2.2036 -2.1523 -2.1060 -2.0864 -2.0786 -2.0464 -2.0229 -2.0142 -1.9941 -1.9790 -1.9634 -1.9482 -1.9360 -1.9297 -1.9194 -1.9058
-1.5259 -1.5229 -1.5317 -1.5181 -1.4985 -1.4922 -1.4780 -1.4834 -1.9834 -2.1978 -2.1509 -2.1021 -2.0820 -2.0708 -2.0420 -2.0176 -2.0054 -1.9868 -1.9746 -1.9624 -1.9453 -1.9297 -1.9253 -1.9131 -1.9009
-1.5229 -1.5225 -1.5273 -1.5117 -1.4873 -1.4937 -1.4780 -1.4785 -2.0308 -2.1885 -2.1489 -2.0952 -2.0757 -2.0679 -2.0405 -2.0127 -2.0010 -1.9819 -1.9712 -1.9561 -1.9395 -1.9282 -1.9180 -1.9116 -1.9009
-1.5244 -1.5054 -1.5181 -1.4937 -1.4771 -1.4873 -1.4722 -1.4766 -2.0483 -2.1855 -2.1401 -2.0923 -2.0708 -2.0591 -2.0327 -2.0098 -1.9976 -1.9761 -1.9697 -1.9546 -1.9365 -1.9243 -1.9175 -1.9087 -1.8950
-1.5229 -1.4893 -1.5103 -1.4180 -1.4687 -1.4771 -1.4687 -1.4722 -2.0327 -2.1812 -2.1279 -2.0864 -2.0635 -2.0542 -2.0234 -2.0000 -1.9941 -1.9717 -1.9624 -1.9487 -1.9331 -1.9175 -1.9102 -1.9023 -1.8887
-1.4497 -1.4687 -1.4858 -1.4414 -1.4614 -1.4736 -1.4614 -1.4644 -2.0039 -2.1704 -2.1187 -2.0757 -2.0605 -2.0493 -2.0229 -2.0020 -1.9897 -1.9683 -1.9590 -1.9443 -1.9282 -1.9136 -1.9087 -1.8979 -1.8843
-1.5229 -1.4478 -1.4917 -1.4893 -1.4766 -1.4736 -1.4497 -1.4429 -1.9790 -2.1523 -2.1050 -2.0786 -2.0566 -2.0513 -2.0205 -1.9990 -1.9854 -1.9653 -1.9590 -1.9409 -1.9243 -1.9131 -1.9014 -1.8921 -1.8809
-1.5088 -1.3389 -1.4658 -1.4321 -1.4687 -1.4507 -1.4385 -1.4121 -2.0327 -2.1611 -2.1182 -2.0728 -2.0513 -2.0420 -2.0127 -1.9912 -1.9790 -1.9634 -1.9482 -1.9346 -1.9194 -1.9058 -1.8979 -1.8877 -1.8750
-1.4707 -1.4678 -1.4507 -1.4443 -1.4707 -1.4067 -1.4521 -1.4463 -2.0117 -2.1494 -2.1123 -2.0684 -2.0508 -2.0376 -2.0083 -1.9897 -1.9741 -1.9590 -1.9453 -1.9302 -1.9160 -1.8994 -1.8921 -1.8857 -1.8706
-1.4565 -1.5117 -1.4946 -1.4824 -1.4497 -1.4541 -1.4463 -1.4189 -2.0576 -2.1431 -2.0894 -2.0664 -2.0435 -2.0264 -2.0034 -1.9824 -1.9663 -1.9531 -1.9409 -1.9243 -1.9097 -1.8979 -1.8887 -1.8794 -1.8647
-1.4893 -1.5044 -1.4858 -1.4658 -1.4722 -1.4551 -1.4307 -1.2671 -2.0464 -2.1357 -2.0967 -2.0576 -2.0356 -2.0205 -1.9990 -1.9780 -1.9683 -1.9487 -1.9365 -1.9194 -1.9067 -1.8931 -1.8843 -1.8735 -1.8628
-1.4902 -1.5044 -1.4824 -1.4707 -1.4663 -1.4404 -1.4141 -1.3501 -2.1660 -2.1338 -2.0952 -2.0513 -2.0356 -2.0269 -1.9961 -1.9717 -1.9609 -1.9453 -1.9297 -1.9160 -1.9009 -1.8877 -1.8765 -1.8701 -1.8613
\end{verbatim}
}

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/ASCII}. 
Only import direction is implemented.

%% OptPlugInKnownBugs
%Not yet tested.

\index{C-PlugIn!scan/ascii\_data\_im\_export.C}
\index{PlugIn!ascii\_data\_im\_export}
\index{GXSM-Menu!File/Import/ASCII}
\subsubsection{Info for Plug-In: File/Import/ASCII }
\begin{tabbing}
Plug-In name:   \= Percy Zahlascii\_data\_im\_export \= Email: \= x \kill
Plug-In name:   \> ascii\_data\_im\_export\>  File:  \> scan/ascii\_data\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/omicron_io.C
% ------------------------------------------------------------

\section{Import/export of Scala SPM files (Omicron)}

% Name=Omicron\_IO

% Author=Andreas Klust

% Email=klust@users.sf.net

% Menupath=File/Import/Omicron\_SPM\_Import

\label{pi:OmicronIO}
\subsubsection{Description}


This plug-in is responsible for the import and export of data in the SPM
format used by Omicron's Scala software.  It supports both conventional,
two-dimensional data such as topographic images and gridded spectroscopic
data.  Data acquired using the point spectroscopy mode of the Scala system
is not written in the SPM format.  Therefore, point spectroscopy data is
ignored by this plug-in.

In the Scala SPM format, data is saved in two parts:  Firstly, the data
itself as binary file.  Secondly, additional information, e.g.\ scan size,
in an extra ASCII file with the filename suffix ".par".  This parameter file
can contain information on several images.  Therefore, for importing SPM
files, the binary file must be selected.  The parameter file contains many
comments making it human readable.

\subsubsection{Usage}

When the Omicron\_IO plug-in is installed, Scala SPM files can be loaded like
any other files supported by \Gxsm.  Alternatively, 
\GxsmMenu{File/Import/Omicron SPM Import} can be used.


\subsubsection{Known Bugs}

Exporting data in the Scala SPM format is not yet implemented.

\index{C-PlugIn!scan/omicron\_io.C}
\index{PlugIn!Omicron\_IO}
\index{GXSM-Menu!File/Import/Omicron\_SPM\_Import}
\subsubsection{Info for Plug-In: File/Import/Omicron\_SPM\_Import }
\begin{tabbing}
Plug-In name:   \= Andreas KlustOmicron\_IO \= Email: \= x \kill
Plug-In name:   \> Omicron\_IO\>  File:  \> scan/omicron\_io.C\\
Author:	        \> Andreas Klust\>  Email: \> klust@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/UK2k_import.C
% ------------------------------------------------------------

\section{UK2000 v3.4 import plug-in}

% Name=UK2k\_import

% Author=Juan de la Figuera

% Email=juan.delafiguera@uam.es

% Menupath=File/Import/Uk2k import

\label{pi:UK2kimport}
\subsubsection{Description}


This plugin is responsible for reading UK2000 v3.4 images, with the
following limitations so far: only topography, and only the forward
scan. To add support for the back scan would be pretty simple, if
someone is interested. This STM electronics is a DSP based system with
transputers as CPUs (yes, it has several). It was made by Uwe Knipping
from Arizona State University and sold by CVS (Custom Vacuum Systems
Ltd.). There are a few systems around, still running after more than
10 years. The PC version of the electronics are the basis of the DSP
STM unit sold (and further developed) by Molecular Imaging.

The files are an ASCII file with the scan details (extension .stp),
and an 16bit binary dump of the image (extension .std).

\subsubsection{Usage}

Registers itself for loading files with the filename suffix ".std".

\index{C-PlugIn!scan/UK2k\_import.C}
\index{PlugIn!UK2k\_import}
\index{GXSM-Menu!File/Import/Uk2k import}
\subsubsection{Info for Plug-In: File/Import/Uk2k import }
\begin{tabbing}
Plug-In name:   \= Juan de la FigueraUK2k\_import \= Email: \= x \kill
Plug-In name:   \> UK2k\_import\>  File:  \> scan/UK2k\_import.C\\
Author:	        \> Juan de la Figuera\>  Email: \> juan.delafiguera@uam.es\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/rhk2000_import.C
% ------------------------------------------------------------

\section{Import Tool for RHK STM-200}

% Name=RHK2000-Import

% Author=Peter Wahl

% Email=wahl@fkf.mpg.de

% Menupath=File/Import/RHK STM-200 import 

\label{pi:RHK2000-Import}
\subsubsection{Description}


This plug-in is responsible for importing files saved by RHK STM-2000 systems.
The STM-2000 system is the STM electronics manufactured by RHK based on SGI 
workstations.

\subsubsection{Usage}

Registers itself for loading files with the filename suffix ".Stm".

\index{C-PlugIn!scan/rhk2000\_import.C}
\index{PlugIn!RHK2000-Import}
\index{GXSM-Menu!File/Import/RHK STM-200 import }
\subsubsection{Info for Plug-In: File/Import/RHK STM-200 import  }
\begin{tabbing}
Plug-In name:   \= Peter WahlRHK2000-Import \= Email: \= x \kill
Plug-In name:   \> RHK2000-Import\>  File:  \> scan/rhk2000\_import.C\\
Author:	        \> Peter Wahl\>  Email: \> wahl@fkf.mpg.de\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/bin_import.C
% ------------------------------------------------------------

\section{Binary file Import}
% Name=bin\_import
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/Binary

\label{pi:binimport}
\subsubsection{Description}

\label{plugins:bin_import}
The \GxsmEmph{Binary} plug-in supports reading of a simple binary volumetric data file format.

Data Set File Format:

The data files for rectilinearly sampled scalar data are written in
the following format (all fields big-endian binary): 

Resolution (number of grid points in x, y and z direction): three
32-bit int values. Let's refer to them as numX, numY, numZ.

Size of saved border around volume: one 32-bit int value. This value
is not used in the provided data sets and is set to zero.

True size (extent in x, y and z direction in some unit of
measurement): three 32-bit float values. Treat these fields like a
sort of "3D aspect ratio" - usually, medical data sets are sampled as
a stack of slices, where the distances between slices is different
from the distances between pixels in a slice.

Data values: All numX*numY*numZ data values of the volume stored as
unsigned char values in the range (0 .. 256). The values are stored in
x, y, z order, i.e., x varies slowest, z varies fastest. In other
words, they are stored in the memory order of a standard C
three-dimensional array unsigned char values\[numX\]\[numY\]\[numZ\].

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/Binary}. 
Only import direction is implemented.

%% OptPlugInKnownBugs
%Not yet tested.

\index{C-PlugIn!scan/bin\_import.C}
\index{PlugIn!bin\_import}
\index{GXSM-Menu!File/Import/Binary}
\subsubsection{Info for Plug-In: File/Import/Binary }
\begin{tabbing}
Plug-In name:   \= Percy Zahlbin\_import \= Email: \= x \kill
Plug-In name:   \> bin\_import\>  File:  \> scan/bin\_import.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/nanoimport.C
% ------------------------------------------------------------

\section{Import of Digital Instruments Nanoscope files}
% Name=nanoimport
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/Nano Scope

\label{pi:nanoimport}
\subsubsection{Description}

The \GxsmEmph{nanoimport} plug-in supports reading files of Digital
Instruments' Nanoscope systems (Veeco Metrology Group).

This plugin can import original Nanoscope-data files, for older
versions below 0x04300000 (Version: 0x04220200 tested) single channel
data is assumed, for all newer versions (Version: 0x04320003,
0x04430006 tested) multiple channels of data can be present and are
all imported at once using different channels in GXSM. Version below
0x03000000 are rejected (do not know about). The channel type is shown
as scan title. The full ASCII header is appended to the comment.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/Nano Scope}.

\subsubsection{Known Bugs}

In some cases the Z-scaling is wrong. The reason for that is, I did
not yet figured out the correct way how to interpret several numbers
given in the di-file header. Any help to fix it is welcome! -- I
changed the calculation once more, look OK for newew files and is
still off for some others, I hate it\dots

According to the manual (V4.1):
\[ H_z = \frac{\text{DAC-value}}{65536} Z_{\text{scale value}} \]

\index{C-PlugIn!scan/nanoimport.C}
\index{PlugIn!nanoimport}
\index{GXSM-Menu!File/Import/Nano Scope}
\subsubsection{Info for Plug-In: File/Import/Nano Scope }
\begin{tabbing}
Plug-In name:   \= Percy Zahlnanoimport \= Email: \= x \kill
Plug-In name:   \> nanoimport\>  File:  \> scan/nanoimport.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/rhk_spm32_import.C
% ------------------------------------------------------------

\section{Import of RHK SPM32 files (STM-1000 electronics).}
% Name=rhk\_spm32\_import
% Author=Andreas klust
% Email=klust@users.sf.net
% Menupath=File/Import/RHK SPM32

\label{pi:rhkspm32import}
\subsubsection{Description}

\label{plugins:rhk_spm32_import} 

The \GxsmEmph{rhk\_spm32\_import} plug-in supports reading of files
generated with the SPM32 software distributed by RHK Technology Inc.\
(Troy, MI, USA).  This is the software that is usually used to control
the RHK STM-1000 electronics (unless you use \Gxsm to control it :-).

\subsubsection{Usage}


The plug-in is called by \GxsmMenu{File/Import/RHK SPM32}.  It is also
automatically invoked by \Gxsm when opening RHK SPM32 files.

\subsubsection{Known Bugs}


Not yet all very well tested.  At the moment, it is somewhat
restricted: i) SPM32 files can contain several pages with data from,
e.g., forward and backward scans.  The plug-in only reads the first
page.  ii) only pages with pure images can be imported, no
spectroscopy data.

\index{C-PlugIn!scan/rhk\_spm32\_import.C}
\index{PlugIn!rhk\_spm32\_import}
\index{GXSM-Menu!File/Import/RHK SPM32}
\subsubsection{Info for Plug-In: File/Import/RHK SPM32 }
\begin{tabbing}
Plug-In name:   \= Andreas klustrhk\_spm32\_import \= Email: \= x \kill
Plug-In name:   \> rhk\_spm32\_import\>  File:  \> scan/rhk\_spm32\_import.C\\
Author:	        \> Andreas klust\>  Email: \> klust@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/external_converter.C
% ------------------------------------------------------------

\section{external converter }
% Name=external\_converter
% Author=Thorsten Wagner
% Email=stm@users.sf.net
% Menupath=Tools/external\_converter 
\label{pi:externalconverter}
\subsubsection{Description}

Simple plugin to call an external converter
\subsubsection{Usage}

Registers itself. Select source file,a destination folder, a suitable
suffix, the external converter (full path) and press okey. You can
also path some options to the external program
\index{C-PlugIn!scan/external\_converter.C}
\index{PlugIn!external\_converter}
\index{GXSM-Menu!Tools/external\_converter }
\subsubsection{Info for Plug-In: Tools/external\_converter  }
\begin{tabbing}
Plug-In name:   \= Thorsten Wagnerexternal\_converter \= Email: \= x \kill
Plug-In name:   \> external\_converter\>  File:  \> scan/external\_converter.C\\
Author:	        \> Thorsten Wagner\>  Email: \> stm@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/v5d_binio.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/scan/png_im_export.C
% ------------------------------------------------------------

\section{PNG image Import/Export}
% Name=png\_Im\_Export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/PNG

\label{pi:pngImExport}
\subsubsection{Description}

The \GxsmEmph{png\_im\_export} plug-in allows reading and writing of images using the
Portable Network Graphics (PNG) image format. 

The currently set palette is used if non is used or available a grey
scale image is generated. The current set view mode
(Direct/Quick/...) is used for automatic data transformation. The resulting image will
appear like the active view but it has the size of the original scan (no zoom/quench applies).

A special feature: If the scan has type "RGBA" (4 layers) the raw data of the channels is written
without any transformation or scaling to the PNG file in RGB mode.

In case of image series/movies this export filter automatically generates a series of png images: \GxsmFile{ bild0001.png \dots bild0099.png}.
To import image series replace 0000 \dots 0099 in your file name by any valid C-format string like \GxsmFile{bild\%04d.png}.

To scale (call AutoDisp function) each frame incude the string \"autodisp\" in the export filename.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/PNG} and \GxsmMenu{File/Export/PNG}.

%% OptPlugInKnownBugs

\subsubsection{References}

pnglib documentation: \GxsmWebLink{www.libpng.org/pub/png/libpng-manual.html}


\index{C-PlugIn!scan/png\_im\_export.C}
\index{PlugIn!png\_Im\_Export}
\index{GXSM-Menu!File/Import/PNG}
\subsubsection{Info for Plug-In: File/Import/PNG }
\begin{tabbing}
Plug-In name:   \= Percy Zahlpng\_Im\_Export \= Email: \= x \kill
Plug-In name:   \> png\_Im\_Export\>  File:  \> scan/png\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/WSxM_header.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/scan/primitiveimexport.C
% ------------------------------------------------------------

\section{Import/export of non-SPM file formats}

% Name=primitiveimexport

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=File/Import/Primitive Auto Import and File/Export/Primitive Auto Export

\label{pi:primitiveimexport}
\subsubsection{Description}

 This plug-in is responsible for importing and exporting a wide variety of
 file formats.  Most of them are file formats not specifically designed for
 storage of scientific data such as the Portable Graymap (pgm) format.
 Nethertheless, the support of these formats allows to exchange data between
 \Gxsm\ and countless other programs, e.g.\ The GIMP for the final "touch up"
 of images.

\subsubsection{Supported file formats}


 The file formats supported by the \GxsmEmph{primitiveimexport} plug-in are
 listed in Tab.\ \ref{tab:primitiveimexport:formats}.  The ".dat" format
 refers to the old, STM specific data format used by the OS/2 software PMSTM
 and the Linux based Xxsm, both predecessors of \Gxsm.  The ".d2d" format is
 used for SPA-LEED by the SPA V program.  The primitive formats ".byt",
 ".sht", ".flt", and ".dbl" are described in more detail below.

 \begin{table}
 \begin{tabular}[h]{l|l}
 Suffix & description \\\hline\hline
 .dat   & (old) STM data format, used by e.g.\ PMSTM, dicontinued.\\
 .byt   & byte format: raw 8 Bit data\\
 .sht   & Short format: raw 16 Bit data\\
 .flt   & Float format: floats, single precision\\
 .dbl   & Double format: floats, double precision\\
 .pgm   & Portable Greymap (P5) format\\
 \hline\hline
 \multicolumn{2}{l}{Read-only supported formats:}\\
 \hline
 .d2d   & (old) SPA--LEED data format, used by SPA V\\
 .nsc   & a very old version of nanoscope import filter (obsolete),\\
 & use the new Nanoscope Import PlugIn!\\
 .h16   & Markus/Mats simulations program data import \\
 \hline\hline
 \multicolumn{2}{l}{Write-only supported formats:}\\
 \hline
 .tga   & TARGA bitmap format (8, 16 and 24 Bit colordepth)\\
 & 24bit: only option to write color images (usage of palette)\\
 \end{tabular}  
 \caption{file formats supported by the \GxsmEmph{primitiveimexport}
 plug-in.}
 \label{tab:primitiveimexport:formats}
 \end{table}

\subsubsection{The primitive file formats}

 The primitive file formats ".byt", ".sht", ".flt", and ".dbl" are supported
 by the \GxsmEmph{primitiveimexport} plug-in for both reading and writing.
 These file formats have a simple structure and therefore present a
 considerable alternative to more complex formats for quickly hacked
 programs.  They are binary files in PC byte order starting with two 16 bit
 integer numbers denoting the number of rows and columns in the image.
 Following them, the image data is written in raw binary form using the
 following data types to represent a single pixel:  char (".byt"), 16 bit
 integer (".sht"), single precision floating point (".flt"), or double
 precision floating point (".dbl") numbers.

 For the manipulation of data in these formats, the \Gxsm\ project provides
 an extensive set of small tools included in the \Gxsm\ source code.  For
 instance, these tools include programs to create, filter, and doing simple
 algebra operations.  All these tools are designed for the use in shell
 scripts.

\subsubsection{Usage}

 The file formats are recognized by their filename suffix. For instance,
 exporting to \GxsmFile{myimage.pgm} results in a greymap image in the binary
 Portable Greymap (pgm) format.  For other supported formats and their
 correspondent suffixes see Tab.\ \ref{tab:primitiveimexport:formats}.

\GxsmHint{
%
%
%\begin{verbatim}
%pzahl@charon:~$ nctopng --help
%Usage: nctopng gxsmncfile.nc myimage.png 
%       [new_nx] [-v | --verbose]
%\end{verbatim}
}

%% OptPlugInKnownBugs

\index{C-PlugIn!scan/primitiveimexport.C}
\index{PlugIn!primitiveimexport}
\index{GXSM-Menu!File/Import/Primitive Auto Import and File/Export/Primitive Auto Export}
\subsubsection{Info for Plug-In: File/Import/Primitive Auto Import and File/Export/Primitive Auto Export }
\begin{tabbing}
Plug-In name:   \= Percy Zahlprimitiveimexport \= Email: \= x \kill
Plug-In name:   \> primitiveimexport\>  File:  \> scan/primitiveimexport.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/converter.C
% ------------------------------------------------------------

\section{Converter }
% Name=Converter
% Author=Kristan Temme and Thorsten Wagner
% Email=stm@users.sf.net
% Menupath=Tools/Converter 
\label{pi:Converter}
\subsubsection{Description}

Simple file conversion utility, which converts files all kinds of data files supported by GXSM-2
\subsubsection{Usage}

Registers itself for converting files. Just choose the right file extensions for the conversion (e.g. .nc to .top). You can also select the source and destination folder by the browse buttons.
\index{C-PlugIn!scan/converter.C}
\index{PlugIn!Converter}
\index{GXSM-Menu!Tools/Converter }
\subsubsection{Info for Plug-In: Tools/Converter  }
\begin{tabbing}
Plug-In name:   \= Kristan Temme and Thorsten WagnerConverter \= Email: \= x \kill
Plug-In name:   \> Converter\>  File:  \> scan/converter.C\\
Author:	        \> Kristan Temme and Thorsten Wagner\>  Email: \> stm@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/uksoft2001_im_export.C
% ------------------------------------------------------------

\section{UKSOFT/U-view Import (ELMITEC LEEM)}
% Name=uksoft2001\_im\_Export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/UKSOFT

\label{pi:uksoft2001imExport}
\subsubsection{Description}

The \GxsmEmph{uksoft\_im\_export} plug-in allows importing of single
and multidimensional sets of \GxsmFile{.dat} and multiple image/movie
\GxsmFile{.dav} files in the UKSOFT-2001 data format generated by
U-view/Elmitec-LEEM Control Software.

It is recommended to configure \GxsmPref{Instrument}{Type} to ''CCD''
to make use of a simplified CCD-Hi/Low scaling method. Use the
''Direct'' view mode.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/UKSOFT}.
Select a single \GxsmFile{.dat} or \GxsmFile{.dav} file.

For automatic reading of multidimensional image series the files has
to be in one director and the file names have to be numbered in one or
two dimensions like this or similar:

\begin{verbatim}
RuO2_CO_10mu_000_000.dat
RuO2_CO_10mu_000_001.dat
RuO2_CO_10mu_000_002.dat
RuO2_CO_10mu_001_000.dat
RuO2_CO_10mu_001_001.dat
RuO2_CO_10mu_001_002.dat
...
\end{verbatim}


Select the first file and replace the relevant digits by a valid
integer C format string identifier, i.e.:
\GxsmNote{GTK3: use CTRL-L after selecting a file to allow (show the edit field) edit the file pattern!!}

\begin{verbatim}
RuO2_CO_10mu_%03d_%03d.dat
\end{verbatim}

Click OK and the Multi-File import setup dialog will show up. Setup
the number of images for each dimension (Max Index) to read and use
Offset and Step for optional skipping of images. If only one index is
present, it is assumed to be the Layer (Value) dimension.

\GxsmScreenShotDual{UKSOFT2001_file_dialog}{UKSOFT/U-view import file dialog}{UKSOFT2001_multifile}{ setup for multi dimensional image processing}

%% OptPlugInKnownBugs

%% OptPlugInRefs


\index{C-PlugIn!scan/uksoft2001\_im\_export.C}
\index{PlugIn!uksoft2001\_im\_Export}
\index{GXSM-Menu!File/Import/UKSOFT}
\subsubsection{Info for Plug-In: File/Import/UKSOFT }
\begin{tabbing}
Plug-In name:   \= Percy Zahluksoft2001\_im\_Export \= Email: \= x \kill
Plug-In name:   \> uksoft2001\_im\_Export\>  File:  \> scan/uksoft2001\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/scan/spa4_d2d_im_export.C
% ------------------------------------------------------------

\section{SPA--LEED (SPA4) d2d data file Import}
% Name=spa4\_im\_export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/SPA4-d2d

\label{pi:spa4imexport}
\subsubsection{Description}

\label{plugins:spa4_d2d_im_export}
The \GxsmEmph{spa4\_d2d\_im\_export} plug-in supports reading of SPA--LEED (SPA4) d2d data files.

PlugIn in construction.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/SPA4-d2d}.

\subsubsection{Known Bugs}

Not yet tested.

\index{C-PlugIn!scan/spa4\_d2d\_im\_export.C}
\index{PlugIn!spa4\_im\_export}
\index{GXSM-Menu!File/Import/SPA4-d2d}
\subsubsection{Info for Plug-In: File/Import/SPA4-d2d }
\begin{tabbing}
Plug-In name:   \= Percy Zahlspa4\_im\_export \= Email: \= x \kill
Plug-In name:   \> spa4\_im\_export\>  File:  \> scan/spa4\_d2d\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/WSxM_io.C
% ------------------------------------------------------------

\section{Import/export for WSxM Nanotec Electronica SPM data}
% Name=WSxM\_io
% Author=Thorsten Wagner
% Email=stm@users.sf.net
% Menupath=File/Im,Export/WXsM

\label{pi:WSxMio}
\subsubsection{Description}

Data import/export of the WSxM data format (version 2) used by Nanotec
Electronica.

\subsubsection{Usage}

Call it from \GxsmMenu{File/Im,Export/WXsM}. Also a normal open or
drag- and drop action from gmc, nautilus or Netscape (URL) will
automatic import WSxM files. 
Plugin uses nc2top to export WSxM files. Therefor, it saves a .nc file first, and then runs nc2top.
If you want, you can change the path of nc2top in the configuration menu, and you can also set if the .nc files shall be deleted after conversion


\subsubsection{References}

\GxsmWebLink{www.nanotec.es}

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?
The import algorithm is not complete yet. You will get the image, but the scan data are only fake.

\GxsmNote{
DnD and URL drops are not tested.
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!scan/WSxM\_io.C}
\index{PlugIn!WSxM\_io}
\index{GXSM-Menu!File/Im,Export/WXsM}
\subsubsection{Info for Plug-In: File/Im,Export/WXsM }
\begin{tabbing}
Plug-In name:   \= Thorsten WagnerWSxM\_io \= Email: \= x \kill
Plug-In name:   \> WSxM\_io\>  File:  \> scan/WSxM\_io.C\\
Author:	        \> Thorsten Wagner\>  Email: \> stm@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/quicktime_im_export.C
% ------------------------------------------------------------

\section{Quicktime}
% Name=quicktime\_im\_Export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/Quicktime

\label{pi:quicktimeimExport}
\subsubsection{Description}

 The \GxsmEmph{quicktime\_im\_export} plug-in allows exporting of single
 and multidimensional image data sets as Quicktime Movie.

\subsubsection{Usage}

 The plug-in is called by \GxsmMenu{File/Import/Quicktime}.

\GxsmNote{Recommended Format: MJPEG-A, works fine with Power-Point and most Movie Players.}

\GxsmScreenShot{quicktime_export_file}{QT Export File Dialog}
\GxsmScreenShotDual{quicktime_export_setup1}{QT Export Setup step one.}{quicktime_export_setup2}{QT Export Setup step two.}

%% OptPlugInKnownBugs
There seam to be much more formats available from the lib-quicktime, 
but for an unknown reason some are just not working or crashing the program if used.
This seams to depend on the system and libquicktime version used, so please try it out.

%% OptPlugInRefs


\index{C-PlugIn!scan/quicktime\_im\_export.C}
\index{PlugIn!quicktime\_im\_Export}
\index{GXSM-Menu!File/Import/Quicktime}
\subsubsection{Info for Plug-In: File/Import/Quicktime }
\begin{tabbing}
Plug-In name:   \= Percy Zahlquicktime\_im\_Export \= Email: \= x \kill
Plug-In name:   \> quicktime\_im\_Export\>  File:  \> scan/quicktime\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/scan/gmeyer_im_export.C
% ------------------------------------------------------------

\section{Import/Export of G.Meyer STM/AFM Dat files}
% Name=gmeyer\_im\_export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/GMeyer Dat

\label{pi:gmeyerimexport}
\subsubsection{Description}

\label{plugins:gmeyer_im_export}
The \GxsmEmph{gmeyer\_im\_export} plug-in supports reading and writing of
Dat files used by the G.Meyer STM/AFM software.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/GME Dat}.

\subsubsection{Known Bugs}

Not yet all very well tested.

\index{C-PlugIn!scan/gmeyer\_im\_export.C}
\index{PlugIn!gmeyer\_im\_export}
\index{GXSM-Menu!File/Import/GMeyer Dat}
\subsubsection{Info for Plug-In: File/Import/GMeyer Dat }
\begin{tabbing}
Plug-In name:   \= Percy Zahlgmeyer\_im\_export \= Email: \= x \kill
Plug-In name:   \> gmeyer\_im\_export\>  File:  \> scan/gmeyer\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/PsiHDF_im_export.C
% ------------------------------------------------------------

\section{Park Scientific (HDF) data Import}
% Name=PsiHDF\_im\_export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/PsiHDF

\label{pi:PsiHDFimexport}
\subsubsection{Description}

\label{plugins:PsiHDF_im_export}
The \GxsmEmph{PsiHDF\_im\_export} plug-in supports reading of
Psi-HDFe files used by Park-Scientific AFM.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/PsiHDF}.

\subsubsection{Known Bugs}

Not yet tested, porting to GXSM-2 in progress..

\index{C-PlugIn!scan/PsiHDF\_im\_export.C}
\index{PlugIn!PsiHDF\_im\_export}
\index{GXSM-Menu!File/Import/PsiHDF}
\subsubsection{Info for Plug-In: File/Import/PsiHDF }
\begin{tabbing}
Plug-In name:   \= Percy ZahlPsiHDF\_im\_export \= Email: \= x \kill
Plug-In name:   \> PsiHDF\_im\_export\>  File:  \> scan/PsiHDF\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/wip_im_export.C
% ------------------------------------------------------------

\section{WIP (WiTeC) Import}
% Name=wip\_im\_Export
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/WIP

\label{pi:wipimExport}
\subsubsection{Description}

The \GxsmEmph{wip\_im\_export} plug-in allows importing selected data sets of WIP (WiTeC-Project) files.

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/WIP}.

%% OptPlugInKnownBugs

%% OptPlugInRefs


\index{C-PlugIn!scan/wip\_im\_export.C}
\index{PlugIn!wip\_im\_Export}
\index{GXSM-Menu!File/Import/WIP}
\subsubsection{Info for Plug-In: File/Import/WIP }
\begin{tabbing}
Plug-In name:   \= Percy Zahlwip\_im\_Export \= Email: \= x \kill
Plug-In name:   \> wip\_im\_Export\>  File:  \> scan/wip\_im\_export.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/scan/cube_import.C
% ------------------------------------------------------------

\section{Cube file Import}
% Name=cube\_import
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=File/Import/Cube

\label{pi:cubeimport}
\subsubsection{Description}

\label{plugins:cube_import}
The \GxsmEmph{Cube} plug-in supports reading of a cube volumetric data file format.
\url{http://paulbourke.net/dataformats/cube/}

CPMD CUBE FILE.\\
 OUTER LOOP: X, MIDDLE LOOP: Y, INNER LOOP: Z\\
    3    0.000000    0.000000    0.000000\\
   40    0.283459    0.000000    0.000000\\
   40    0.000000    0.283459    0.000000\\
   40    0.000000    0.000000    0.283459\\
    8    0.000000    5.570575    5.669178    5.593517\\
    1    0.000000    5.562867    5.669178    7.428055\\
    1    0.000000    7.340606    5.669178    5.111259\\
 -0.25568E-04  0.59213E-05  0.81068E-05  0.10868E-04  0.11313E-04  0.35999E-05\\
      :             :             :           :            :            :\\
      :             :             :           :            :            :\\
      :             :             :           :            :            :\\
        In this case there will be 40 x 40 x 40 floating point values\\
      :             :             :           :            :            :\\
      :             :             :           :            :            :\\
      :             :             :           :            :            :\\

\subsubsection{Usage}

The plug-in is called by \GxsmMenu{File/Import/Cube}. 
Only import direction is implemented.

%% OptPlugInKnownBugs
%Not yet tested.

\index{C-PlugIn!scan/cube\_import.C}
\index{PlugIn!cube\_import}
\index{GXSM-Menu!File/Import/Cube}
\subsubsection{Info for Plug-In: File/Import/Cube }
\begin{tabbing}
Plug-In name:   \= Percy Zahlcube\_import \= Email: \= x \kill
Plug-In name:   \> cube\_import\>  File:  \> scan/cube\_import.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/filter2d
% ------------------------------------------------------------

\chapter{Plug-Ins: math/filter2d}

% Inclusion of PlugInClassIntro: ./plug-ins/math/filter2d/PlugInClass.doc


The \emph{math/filter2d} plugins are all type of math doing something
in 2D with the data, e.g. a 2D powerspectrum or all types of 2D
FFT-filters. But special 2D statistical analysis or geometric
transformation filters are going into a separate sections
\emph{math/statistics, transformations}.

\subsubsection{Gxsm core 2D convolution filter support}

The Gxsm core provides support for a generalized convolution, just
providing the convolution kernel function itself.  The minimal kernel
size is $2R+1$, it is automatically increased until non zero matrix
elements are appearing.

A convolution kernel is provided by a kernel function like this
Gaus-Kernel:
\[ K_{ij} = 4*e^{-\frac{i^2+j^2}{r^2}} \]

The convolution itself is defined as:
\[ Z'(n,m) = \sum_{-R \le i \le R}  \sum_{-R \le j \le R} Z(n+i,m+j) \cdot K_{i j} \]

For all PlugIns using the convolution method, just the kernel will be
documented in the following descriptions.



% PlugIn: ./plug-ins/math/filter2d/stat_diff.C
% ------------------------------------------------------------

\section{Stat Diff}
% Name=stat\_diff
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Stat Diff

\label{pi:statdiff}
\subsubsection{Description}

Stationary Differentation in scan direction using a convolution kernel:
\[ K_{ij} = C \cdot j \cdot e^{ - \frac{i^2}{r_y} - \frac{j^2}{r_x}} \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Stat Diff}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\subsubsection{Known Bugs}

Crashes Gxsm -- pending to fix.

\index{C-PlugIn!math/filter2d/stat\_diff.C}
\index{PlugIn!stat\_diff}
\index{GXSM-Menu!Math/Filter 2D/Stat Diff}
\subsubsection{Info for Plug-In: Math/Filter 2D/Stat Diff }
\begin{tabbing}
Plug-In name:   \= Percy Zahlstat\_diff \= Email: \= x \kill
Plug-In name:   \> stat\_diff\>  File:  \> math/filter2d/stat\_diff.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/edge.C
% ------------------------------------------------------------

\section{Edge}
% Name=edge
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Edge

\label{pi:edge}
\subsubsection{Description}

A 2D Laplace of Gaussian (LoG) edge detect filter kernel is calculated and applied via convolution to teh source data set, feature size $\sigma$:

\[ K_{ij} = -\frac{1}{\pi\sigma^4} \left( 1 - \frac{i^2+j^2}{2\sigma^2}\right) e^{-\frac{i^2+j^2}{2\sigma^2}} \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Edge}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/edge.C}
\index{PlugIn!edge}
\index{GXSM-Menu!Math/Filter 2D/Edge}
\subsubsection{Info for Plug-In: Math/Filter 2D/Edge }
\begin{tabbing}
Plug-In name:   \= Percy Zahledge \= Email: \= x \kill
Plug-In name:   \> edge\>  File:  \> math/filter2d/edge.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/smooth.C
% ------------------------------------------------------------

\section{Smooth}
% Name=smooth
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Smooth

\label{pi:smooth}
\subsubsection{Description}

A 2D Gausian smooth is calculated via convolution with a Gaus-Kernel:

\[ K_{ij} = 4*e^{-\frac{i^2+j^2}{r^2}} \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Smooth}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\GxsmHint{
Alternative: Use the Fourier-Filter methods Gaus-Stop/Pass for huge
convolutions, it's faster!
}

\index{C-PlugIn!math/filter2d/smooth.C}
\index{PlugIn!smooth}
\index{GXSM-Menu!Math/Filter 2D/Smooth}
\subsubsection{Info for Plug-In: Math/Filter 2D/Smooth }
\begin{tabbing}
Plug-In name:   \= Percy Zahlsmooth \= Email: \= x \kill
Plug-In name:   \> smooth\>  File:  \> math/filter2d/smooth.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/lineinterpol.C
% ------------------------------------------------------------

\section{Lineinterpol}
% Name=lineinterpol
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Lineinterpol

\label{pi:lineinterpol}
\subsubsection{Description}

Lineinterpol action.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Lineinterpol}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/lineinterpol.C}
\index{PlugIn!lineinterpol}
\index{GXSM-Menu!Math/Filter 2D/Lineinterpol}
\subsubsection{Info for Plug-In: Math/Filter 2D/Lineinterpol }
\begin{tabbing}
Plug-In name:   \= Percy Zahllineinterpol \= Email: \= x \kill
Plug-In name:   \> lineinterpol\>  File:  \> math/filter2d/lineinterpol.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/smallconvol.C
% ------------------------------------------------------------

\section{Convolution with 3x3 kernel}
% Name=smallconvol
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Small Convol

\label{pi:smallconvol}
\subsubsection{Description}

\label{plugin:smallconvol}
This plug-in convolutes the active scan with a 3x3 matrix (kernel).  The
kernel can be changed using \GxsmMenu{Tools/Plugin Details} by calling the
plug-ins configure function (c.f.\ \ref{plugin:listplugins}).

\subsubsection{Usage}

The \GxsmEmph{smallconvol} plug-in can be found in \GxsmMenu{Math/Filter
2D/Small Convol}.  It acts on the active channel and the output is put in
the math channel.

%% OptPlugInKnownBugs
%No known.

\index{C-PlugIn!math/filter2d/smallconvol.C}
\index{PlugIn!smallconvol}
\index{GXSM-Menu!Math/Filter 2D/Small Convol}
\subsubsection{Info for Plug-In: Math/Filter 2D/Small Convol }
\begin{tabbing}
Plug-In name:   \= Percy Zahlsmallconvol \= Email: \= x \kill
Plug-In name:   \> smallconvol\>  File:  \> math/filter2d/smallconvol.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/template.C
% ------------------------------------------------------------

\section{Template}
% Name=template
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Template

\label{pi:template}
\subsubsection{Description}

Template action.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Template}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/template.C}
\index{PlugIn!template}
\index{GXSM-Menu!Math/Background/Template}
\subsubsection{Info for Plug-In: Math/Background/Template }
\begin{tabbing}
Plug-In name:   \= Percy Zahltemplate \= Email: \= x \kill
Plug-In name:   \> template\>  File:  \> math/filter2d/template.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/curvature.C
% ------------------------------------------------------------

\section{Curvature}
% Name=curvature
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Curvature

\label{pi:curvature}
\subsubsection{Description}

Curvature calculation.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Curvature}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/curvature.C}
\index{PlugIn!curvature}
\index{GXSM-Menu!Math/Filter 2D/Curvature}
\subsubsection{Info for Plug-In: Math/Filter 2D/Curvature }
\begin{tabbing}
Plug-In name:   \= Percy Zahlcurvature \= Email: \= x \kill
Plug-In name:   \> curvature\>  File:  \> math/filter2d/curvature.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/local_height.C
% ------------------------------------------------------------

\section{Local height}
% Name=local\_height
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Local height

\label{pi:localheight}
\subsubsection{Description}

Computes the local height via convolution.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Local height}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/local\_height.C}
\index{PlugIn!local\_height}
\index{GXSM-Menu!Math/Filter 2D/Local height}
\subsubsection{Info for Plug-In: Math/Filter 2D/Local height }
\begin{tabbing}
Plug-In name:   \= Percy Zahllocal\_height \= Email: \= x \kill
Plug-In name:   \> local\_height\>  File:  \> math/filter2d/local\_height.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/ft2d.C
% ------------------------------------------------------------

\section{FT 2D}
% Name=ft2d
% Author=Percy Zahl
% Email=zahl@users.sourceforge.net
% Menupath=math-filter2d-sectionFT 2D

\label{pi:ft2d}
\subsubsection{Description}

Two dimensional forward Fourier Transformation. Results in three layers (PSD, Re, Im):

Layer 0 is the Power Spectral Density, layer 1 (Re) and 2 (Im) are the
Complex numbers of the FT data. This data can be used for reverse
transformation after (background) stopp and/or pass operations.

\subsubsection{Usage}


%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/filter2d/ft2d.C}
\index{PlugIn!ft2d}
\index{GXSM-Menu!math-filter2d-sectionFT 2D}
\subsubsection{Info for Plug-In: math-filter2d-sectionFT 2D }
\begin{tabbing}
Plug-In name:   \= Percy Zahlft2d \= Email: \= x \kill
Plug-In name:   \> ft2d\>  File:  \> math/filter2d/ft2d.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/DocOnlyLineInterpol.C
% ------------------------------------------------------------

\section{Line Interpolation}
% Name=(DocOnly) LineInterpol
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Line Interpol

\label{pi:(DocOnly) LineInterpol}
\subsubsection{Description}

Use this tool to replace distorted line(s) (i.e. caused be manual
Z-Offset adjustments while scanning or tip changes) by interpolated
data from the lines one before and one after the distorsion.

If necessary you should remove line-shifts (use the Lins Shifts
filter) before calling this tool. I.e. the average Z before and after
the distorsion shaould be about the same.

It can work manually on exactly one line or in a automatic mode with
automatic line detection.

\subsubsection{Usage}


It works in two modes: 

a) Assuming line 100 (in pixel corrdinates) to be broken as example,
   mark exactly the line 99 and line 101 with exactly one rectangle
   objects. You may want to use the rectangle-properties to set the
   line numbers manually. Then execute it via \GxsmMenu{Math/Filter
   2D/Line Interpol}.

b) The automatic mode assumes a fairly well flatened image with only
   distorted single lines. Mark the reference area including the
   distorted lines using the rectangle object and call
   \GxsmMenu{Math/Filter 2D/Line Interpol}. It will ask for an
   threashold, which is used to determine if a line is distored,
   therefore it compares the average Z withing the marked X range of
   any line in the mared Y range and the line before.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}


\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
The X position and size of the rectangle does not matter at all for method (a).
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/filter2d/DocOnlyLineInterpol.C}
\index{PlugIn!(DocOnly) LineInterpol}
\index{GXSM-Menu!Math/Filter 2D/Line Interpol}
\subsubsection{Info for Plug-In: Math/Filter 2D/Line Interpol }
\begin{tabbing}
Plug-In name:   \= Percy Zahl(DocOnly) LineInterpol \= Email: \= x \kill
Plug-In name:   \> (DocOnly) LineInterpol\>  File:  \> math/filter2d/DocOnlyLineInterpol.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/Tderive.C
% ------------------------------------------------------------

\section{T derive}
% Name=Tderive
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/T derive

\label{pi:Tderive}
\subsubsection{Description}

Not sure what the purpose of this old filter T-derive is\dots

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/T derive}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/Tderive.C}
\index{PlugIn!Tderive}
\index{GXSM-Menu!Math/Filter 2D/T derive}
\subsubsection{Info for Plug-In: Math/Filter 2D/T derive }
\begin{tabbing}
Plug-In name:   \= Percy ZahlTderive \= Email: \= x \kill
Plug-In name:   \> Tderive\>  File:  \> math/filter2d/Tderive.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/ift2d.C
% ------------------------------------------------------------

\section{inverse FT}
% Name=ift2d
% Author=Percy Zahl
% Email=zahl@users.sourceforge.net
% Menupath=Math/Filter 2D/IFT 2D

\label{pi:ift2d}
\subsubsection{Description}

Two dimensional inverse (backward) Fourier Transformation of a three layer (PSD, Re, Im) data set, as generated by the forward FT:

Layer 0 is the Power Spectral Density (not used here), layer 1 (Re) and 2 (Im) are the
Complex numbers used for the complex input for the IFT operation.

\subsubsection{Usage}

Activate a channel containing a complex data set (3 layers: PSD, Re, Im).

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
This plugin is under construction.

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/filter2d/ift2d.C}
\index{PlugIn!ift2d}
\index{GXSM-Menu!Math/Filter 2D/IFT 2D}
\subsubsection{Info for Plug-In: Math/Filter 2D/IFT 2D }
\begin{tabbing}
Plug-In name:   \= Percy Zahlift2d \= Email: \= x \kill
Plug-In name:   \> ift2d\>  File:  \> math/filter2d/ift2d.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/despike2d.C
% ------------------------------------------------------------

\section{Despike 2d}
% Name=despike2d
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Despike2d

\label{pi:despike2d}
\subsubsection{Description}

Despike 2d filter.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Despike}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter2d/despike2d.C}
\index{PlugIn!despike2d}
\index{GXSM-Menu!Math/Background/Despike2d}
\subsubsection{Info for Plug-In: Math/Background/Despike2d }
\begin{tabbing}
Plug-In name:   \= Percy Zahldespike2d \= Email: \= x \kill
Plug-In name:   \> despike2d\>  File:  \> math/filter2d/despike2d.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter2d/normal_z.C
% ------------------------------------------------------------

\section{Normal Z}
% Name=normal\_z
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 2D/Normal Z

\label{pi:normalz}
\subsubsection{Description}

Z Normal component is calculated.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 2D/Normal Z}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\GxsmHint{
}

\index{C-PlugIn!math/filter2d/normal\_z.C}
\index{PlugIn!normal\_z}
\index{GXSM-Menu!Math/Filter 2D/Normal Z}
\subsubsection{Info for Plug-In: Math/Filter 2D/Normal Z }
\begin{tabbing}
Plug-In name:   \= Percy Zahlnormal\_z \= Email: \= x \kill
Plug-In name:   \> normal\_z\>  File:  \> math/filter2d/normal\_z.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/background
% ------------------------------------------------------------

\chapter{Plug-Ins: math/background}

% Inclusion of PlugInClassIntro: ./plug-ins/math/background/PlugInClass.doc


The \emph{math/background} plugins are those used to correct data for
background, e.g. subtraction of a regression plane or line.

% PlugIn: ./plug-ins/math/background/DocOnlyEregress.C
% ------------------------------------------------------------

\section{Plane regression}
% Name=(DocOnly) Eregress
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/E Regression

\label{pi:(DocOnly) Eregress}
\subsubsection{Description}

The filter calculates a regression plane using a selected rectangular
area and subtracts this from the data

This is usually the best way to flatten a good SPM scan, because it
sustains the offsets inbetween lines. It allows to select a individual
area of the scan as reference area to be flatened.

\subsubsection{Usage}

Mark the reference area using the rectangle object and call \GxsmMenu{Math/Background/E Regression}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A optional rectangle needed to select the reference area for the plane
regression.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
\GxsmNote{The ''E'' (E Regression) is historically and stands for German 'Ebene', what means plane. }
At this time this filter is not a real PlugIn (in principal it could
be), but it resides in the Gxsm Core located in the file
\GxsmFile{Gxsm/src/xsmmath.C} as a subroutine and cannot be removed,
because the core code is dependent on this subroutine.
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/DocOnlyEregress.C}
\index{PlugIn!(DocOnly) Eregress}
\index{GXSM-Menu!Math/Background/E Regression}
\subsubsection{Info for Plug-In: Math/Background/E Regression }
\begin{tabbing}
Plug-In name:   \= Percy Zahl(DocOnly) Eregress \= Email: \= x \kill
Plug-In name:   \> (DocOnly) Eregress\>  File:  \> math/background/DocOnlyEregress.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/stop_ccr.C
% ------------------------------------------------------------

\section{Stop band removal}
% Name=stop\_ccr
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Stop CC

\label{pi:stopccr}
\subsubsection{Description}

Used for zeroing data in selected rectangles and automatically complex
conjugated (CC) rectangles. It is in particular made to be used for
marking areas in frequency space (e.g. in a calculated Filter 2D/Power
Spectrum, this generates a PDS and preserves the full orgininal Re/Im
data for manipulation and optional back-transform) for filtering of
data in frequency domain.  The result can then be transformed back
using Filter 2D/IFT 2D (inverse FT) \GxsmEmph{IFT(FT())} 2D filter.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Stop CC}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

All data in marked rectangles and CC rectangles are zeroed.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/stop\_ccr.C}
\index{PlugIn!stop\_ccr}
\index{GXSM-Menu!Math/Background/Stop CC}
\subsubsection{Info for Plug-In: Math/Background/Stop CC }
\begin{tabbing}
Plug-In name:   \= Percy Zahlstop\_ccr \= Email: \= x \kill
Plug-In name:   \> stop\_ccr\>  File:  \> math/background/stop\_ccr.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/plane_max_prop.C
% ------------------------------------------------------------

\section{Plane max. propability}
% Name=plane\_max\_prop
% Author=Percy Zahl, L.Anderson, Greg P. Kochanski
% Email=zahl@users.sf.net
% Menupath=Math/Background/Plane max prop

\label{pi:planemaxprop}
\subsubsection{Description}

Calculates a max propability plane and subtracts it. It's purpose is
to find automatically the best fitting plane to orient a
stepped/vicinal surface in a way, that the terraces are horizontal.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Plane max prop}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
This code in work in progress, it is originated from PMSTM
\GxsmFile{mpplane.c} and was rewritten as a Gxsm math PlugIn. It looks
like something does not work like expected, the corrected plane is not
right for some still not found reason.
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/plane\_max\_prop.C}
\index{PlugIn!plane\_max\_prop}
\index{GXSM-Menu!Math/Background/Plane max prop}
\subsubsection{Info for Plug-In: Math/Background/Plane max prop }
\begin{tabbing}
Plug-In name:   \= Percy Zahl, L.Anderson, Greg P. Kochanskiplane\_max\_prop \= Email: \= x \kill
Plug-In name:   \> plane\_max\_prop\>  File:  \> math/background/plane\_max\_prop.C\\
Author:	        \> Percy Zahl, L.Anderson, Greg P. Kochanski\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/bg_z_drift.C
% ------------------------------------------------------------

\section{Smooth Z drift correction}
% Name=bg\_z\_drift
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Z drift correct

\label{pi:bgzdrift}
\subsubsection{Description}

Corrects a slow and smooth variing Z drift using a polynominal fit for
averaged line heights.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Z drift correct}. It asks for the
degree ($2, 3, 4, \dots 13$) used for the polynominal (least squares)
fit, $5$th order is the default.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A optional rectangle can be used to restrict the X range used for
calculation the average scan line height. The Y coordinates of the
rectangle are ignored.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/bg\_z\_drift.C}
\index{PlugIn!bg\_z\_drift}
\index{GXSM-Menu!Math/Background/Z drift correct}
\subsubsection{Info for Plug-In: Math/Background/Z drift correct }
\begin{tabbing}
Plug-In name:   \= Percy Zahlbg\_z\_drift \= Email: \= x \kill
Plug-In name:   \> bg\_z\_drift\>  File:  \> math/background/bg\_z\_drift.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/template.C
% ------------------------------------------------------------

\section{Template}
% Name=template
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Template

\label{pi:template}
\subsubsection{Description}

Template action.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Template}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/template.C}
\index{PlugIn!template}
\index{GXSM-Menu!Math/Background/Template}
\subsubsection{Info for Plug-In: Math/Background/Template }
\begin{tabbing}
Plug-In name:   \= Percy Zahltemplate \= Email: \= x \kill
Plug-In name:   \> template\>  File:  \> math/background/template.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/lineregression.C
% ------------------------------------------------------------

\section{Lineregression}
% Name=lineregression
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Lineregression

\label{pi:lineregression}
\subsubsection{Description}

Lineregression action.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Lineregression}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/lineregression.C}
\index{PlugIn!lineregression}
\index{GXSM-Menu!Math/Background/Lineregression}
\subsubsection{Info for Plug-In: Math/Background/Lineregression }
\begin{tabbing}
Plug-In name:   \= Percy Zahllineregression \= Email: \= x \kill
Plug-In name:   \> lineregression\>  File:  \> math/background/lineregression.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/timescalefft.C
% ------------------------------------------------------------

\section{Full Timescale FFT}
% Name=timescalefft
% Author=Percy Zahl
% Email=zahl@users.sourceforge.net
% Menupath=Math/Background/Timescale FFT

\label{pi:timescalefft}
\subsubsection{Description}

Linear FT of scan data in time, takes all scan data concat as one long stream.

\subsubsection{Usage}

Activate source channel.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/timescalefft.C}
\index{PlugIn!timescalefft}
\index{GXSM-Menu!Math/Background/Timescale FFT}
\subsubsection{Info for Plug-In: Math/Background/Timescale FFT }
\begin{tabbing}
Plug-In name:   \= Percy Zahltimescalefft \= Email: \= x \kill
Plug-In name:   \> timescalefft\>  File:  \> math/background/timescalefft.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/subconst.C
% ------------------------------------------------------------

\section{Sub Const Background correction}
% Name=subconst
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Sub Const

\label{pi:subconst}
\subsubsection{Description}

Subtracts a constant value form data.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Sub Const} and give the value when prompted.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/subconst.C}
\index{PlugIn!subconst}
\index{GXSM-Menu!Math/Background/Sub Const}
\subsubsection{Info for Plug-In: Math/Background/Sub Const }
\begin{tabbing}
Plug-In name:   \= Percy Zahlsubconst \= Email: \= x \kill
Plug-In name:   \> subconst\>  File:  \> math/background/subconst.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/bggamma.C
% ------------------------------------------------------------

\section{Gamma correction}
% Name=bggamma
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Gamma

\label{pi:bggamma}
\subsubsection{Description}

Applys a gamma correction as it is defined here:
\[ Z_{\text{range}} := Z_{\text{minval}} - Z_{\text{maxval}}\]
\[ Z_{\text{math}} = \frac{Z_{\text{range}} Z_{\text{active}}^{\gamma}}
                          {Z_{\text{range}}^{\gamma}} \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Gamma} and give the gamma value
$\gamma$ if prompted.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/bggamma.C}
\index{PlugIn!bggamma}
\index{GXSM-Menu!Math/Background/Gamma}
\subsubsection{Info for Plug-In: Math/Background/Gamma }
\begin{tabbing}
Plug-In name:   \= Percy Zahlbggamma \= Email: \= x \kill
Plug-In name:   \> bggamma\>  File:  \> math/background/bggamma.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/plane_regression.C
% ------------------------------------------------------------

\section{Plane Regression}
% Name=plane\_regression
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Plane Regression

\label{pi:planeregression}
\subsubsection{Description}

Plane Regression.

\subsubsection{Usage}

Write how to use it.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
Hacking Version only.
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/plane\_regression.C}
\index{PlugIn!plane\_regression}
\index{GXSM-Menu!Math/Background/Plane Regression}
\subsubsection{Info for Plug-In: Math/Background/Plane Regression }
\begin{tabbing}
Plug-In name:   \= Percy Zahlplane\_regression \= Email: \= x \kill
Plug-In name:   \> plane\_regression\>  File:  \> math/background/plane\_regression.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/pass_cc.C
% ------------------------------------------------------------

\section{Pass band copy}
% Name=pass\_cc
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Pass CC

\label{pi:passcc}
\subsubsection{Description}

Used for copying data in selected rectangles and automatically complex
conjugated (CC) rectangles. It is in particular made to be used for
marking areas in frequency space (e.g. in a calculated Filter 2D/Power
Spectrum, this generates a PDS and preserves the full orgininal Re/Im
data for manipulation and optional back-transform) for filtering of
data in frequency domain.  The result can then be transformed back
using Filter 2D/IFT 2D (inverse FT) \GxsmEmph{IFT(FT())} 2D filter.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Pass CC}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

All data in marked rectangles and CC rectangles is copied.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/pass\_cc.C}
\index{PlugIn!pass\_cc}
\index{GXSM-Menu!Math/Background/Pass CC}
\subsubsection{Info for Plug-In: Math/Background/Pass CC }
\begin{tabbing}
Plug-In name:   \= Percy Zahlpass\_cc \= Email: \= x \kill
Plug-In name:   \> pass\_cc\>  File:  \> math/background/pass\_cc.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/waterlevel.C
% ------------------------------------------------------------

\section{Waterlevel}
% Name=waterlevel
% Author=Andreas Klust
% Email=klust@users.sourceforge.net
% Menupath=Math/Background/Waterlevel

\label{pi:waterlevel}
\subsubsection{Description}

This plugin adds a waterlevel to the active scan.  Everything below
this level in the resulting scan will become invisible.  This is achieved
by setting the z value of all points with original z values below the 
waterlevel to the waterlevel: if $z(x,y) < \mbox{waterlevel}$ then 
$z(x,y) = \mbox{waterlevel}$.

\subsubsection{Usage}

Write how to use it.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
The computation result is placed into an existing math channel, else 
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
This plug-in is still under construction!

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/waterlevel.C}
\index{PlugIn!waterlevel}
\index{GXSM-Menu!Math/Background/Waterlevel}
\subsubsection{Info for Plug-In: Math/Background/Waterlevel }
\begin{tabbing}
Plug-In name:   \= Andreas Klustwaterlevel \= Email: \= x \kill
Plug-In name:   \> waterlevel\>  File:  \> math/background/waterlevel.C\\
Author:	        \> Andreas Klust\>  Email: \> klust@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/plane3pkt.C
% ------------------------------------------------------------

\section{Plane three points}
% Name=plane3pkte
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Plane 3 Points

\label{pi:plane3pkte}
\subsubsection{Description}

The filter removes a by three points defined plane from the scan.

\subsubsection{Usage}

Define the three points using the \GxsmEmph{Point} object.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

The \GxsmEmph{Ksys} object is needet to define the plane via the three
points provided.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/plane3pkt.C}
\index{PlugIn!plane3pkte}
\index{GXSM-Menu!Math/Background/Plane 3 Points}
\subsubsection{Info for Plug-In: Math/Background/Plane 3 Points }
\begin{tabbing}
Plug-In name:   \= Percy Zahlplane3pkte \= Email: \= x \kill
Plug-In name:   \> plane3pkte\>  File:  \> math/background/plane3pkt.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/removelineshifts.C
% ------------------------------------------------------------

\section{Remove Line Shifts}
% Name=removelineshifts
% Author=percy
% Email=zahl@users.sourceforge.net
% Menupath=\_Math/Background/Rm Line Shifts

\label{pi:removelineshifts}
\subsubsection{Description}

This filter removes $Z$ line shifts from the image background -- most
commonly due to tip changes or any other sudden Z changes from one to
the next line. It works by comparing the 2nd order change of average
scan line $Z$ value to an given threashold value, i.e. it determines a
jump in the $\partial_Y Z$ (Y-slope), if so, this jump is evaluated and $Z$ of
all following lines is ajusted. The the filter asks for the treashold value.

\subsubsection{Usage}

Activate source scan and call it filter from \GxsmMenu{Math/Background/Rm Line Shifts} menu.
Input the desired threashold value.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/removelineshifts.C}
\index{PlugIn!removelineshifts}
\index{GXSM-Menu!\_Math/Background/Rm Line Shifts}
\subsubsection{Info for Plug-In: \_Math/Background/Rm Line Shifts }
\begin{tabbing}
Plug-In name:   \= percyremovelineshifts \= Email: \= x \kill
Plug-In name:   \> removelineshifts\>  File:  \> math/background/removelineshifts.C\\
Author:	        \> percy\>  Email: \> zahl@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/parabolregress.C
% ------------------------------------------------------------

\section{2nd order scanline correction}
% Name=parabolregress
% Author=Stefan Schr\"oder
% Email=stefan\_fkp@users.sf.net
% Menupath=Math/Background/Line

\label{pi:parabolregress}
\subsubsection{Description}

Second order line by line background correction: The 2nd order best fit of the
Z data of each line is computed and subtracted as background.

This filter can be used for a quick and easy background correction of
sample tilt and possible offset changes inbetween lines. Additionally, the
correction of an overlaying parabola, e.g. due to the geometry of the 
experimental setup (bending piezo tube) is 

\subsubsection{Usage}

Activate a scan and select \GxsmMenu{Math/Background/Line: 2nd order}.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The result is put into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
The algorithm is unchecked.
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/background/parabolregress.C}
\index{PlugIn!parabolregress}
\index{GXSM-Menu!Math/Background/Line}
\subsubsection{Info for Plug-In: Math/Background/Line }
\begin{tabbing}
Plug-In name:   \= Stefan Schr\"oderparabolregress \= Email: \= x \kill
Plug-In name:   \> parabolregress\>  File:  \> math/background/parabolregress.C\\
Author:	        \> Stefan Schr\"oder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/DocOnlyLineRegress.C
% ------------------------------------------------------------

\section{Line Regression}
% Name=(DocOnly) LineRegress
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Line Regress

\label{pi:(DocOnly) LineRegress}
\subsubsection{Description}

This applies the \GxsmEmph{Quick View} representation to the
data. Therefore a least squares fit line regression is calculated on a
subset of 30 points for each scan line. This line is subtracted from
the data to correct for slope and offset.

\subsubsection{Usage}

This filter is used for a quick and easy background correction of
sample tilt and possible offset changes inbetween lines.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
At this time this filter is not a real PlugIn (in principal it could
be), but it resides in the Gxsm Core located in the file
\GxsmFile{Gxsm/src/xsmmath.C} as a subroutine and cannot be removed,
because the core code is dependent on this subroutine.
}

\GxsmHint{
Doing it better: try using a plane regression! If this works, great! 
In case there are offset changes inbetween lines, you can try getting
better results with an proceeding \GxsmMenu{Math/Filter
2D/LineShifts}. If you have some spikes in you image, try removing
those first with the \GxsmMenu{Math/Filter 2D/Despike}.
}

\index{C-PlugIn!math/background/DocOnlyLineRegress.C}
\index{PlugIn!(DocOnly) LineRegress}
\index{GXSM-Menu!Math/Background/Line Regress}
\subsubsection{Info for Plug-In: Math/Background/Line Regress }
\begin{tabbing}
Plug-In name:   \= Percy Zahl(DocOnly) LineRegress \= Email: \= x \kill
Plug-In name:   \> (DocOnly) LineRegress\>  File:  \> math/background/DocOnlyLineRegress.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/background/mulconst.C
% ------------------------------------------------------------

\section{Multiply Const Background correction}
% Name=mulconst
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Multiply Const

\label{pi:mulconst}
\subsubsection{Description}

Multiply multi dim data (only apply to selected range!) with factor.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Multiply Const} and give the value when prompted.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/background/mulconst.C}
\index{PlugIn!mulconst}
\index{GXSM-Menu!Math/Background/Multiply Const}
\subsubsection{Info for Plug-In: Math/Background/Multiply Const }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmulconst \= Email: \= x \kill
Plug-In name:   \> mulconst\>  File:  \> math/background/mulconst.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/arithmetic
% ------------------------------------------------------------

\chapter{Plug-Ins: math/arithmetic}

% Inclusion of PlugInClassIntro: ./plug-ins/math/arithmetic/PlugInClass.doc


The \emph{math/arithmetic} plugins are those used for simple arithmetic, such
as applying a log function to Z values, adding scans, etc.

% PlugIn: ./plug-ins/math/arithmetic/Z_usr_rescale.C
% ------------------------------------------------------------

\section{Multiply scans}
% Name=Z\_usr\_rescale
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Z usr rescale

\label{pi:Zusrrescale}
\subsubsection{Description}

Linear transformation of the Z-values of scans offset and factor.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Z Usr Rescale}.

\subsubsection{Sources}

The "Z" of the active channel, all layers is rescaled by a given factor.

\subsubsection{Objects}

Requests a input coeficients file, one line per layer:

offset0 factor0\\
offset1 factor1\\
...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

%% OptPlugInNotes

\index{C-PlugIn!math/arithmetic/Z\_usr\_rescale.C}
\index{PlugIn!Z\_usr\_rescale}
\index{GXSM-Menu!Math/Arithmetic/Z usr rescale}
\subsubsection{Info for Plug-In: Math/Arithmetic/Z usr rescale }
\begin{tabbing}
Plug-In name:   \= Percy ZahlZ\_usr\_rescale \= Email: \= x \kill
Plug-In name:   \> Z\_usr\_rescale\>  File:  \> math/arithmetic/Z\_usr\_rescale.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/abs_scan.C
% ------------------------------------------------------------

\section{Absolute Value}
% Name=abs\_scan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Absoluet Value

\label{pi:absscan}
\subsubsection{Description}

Takes the absolute value for the data.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Absolute Value}.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\index{C-PlugIn!math/arithmetic/abs\_scan.C}
\index{PlugIn!abs\_scan}
\index{GXSM-Menu!Math/Arithmetic/Absoluet Value}
\subsubsection{Info for Plug-In: Math/Arithmetic/Absoluet Value }
\begin{tabbing}
Plug-In name:   \= Percy Zahlabs\_scan \= Email: \= x \kill
Plug-In name:   \> abs\_scan\>  File:  \> math/arithmetic/abs\_scan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/max.C
% ------------------------------------------------------------

\section{Max of two sources}
% Name=max
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Max

\label{pi:max}
\subsubsection{Description}

This filter merges two (same sized and aligned) scans by using the max
$Z$ value of source one (actice) and two (X) as resulting $Z$.

\subsubsection{Usage}

Select two same sized sources: One should be "Active" and the other in
mode "X", assure there is only one mode "X" channel around -- always
the first "X" marked channel (lowest channel number) will be used!
And run \GxsmMenu{Math/Arithmetic/Max}

\subsubsection{Sources}

The active channel and X-channel are used.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/arithmetic/max.C}
\index{PlugIn!max}
\index{GXSM-Menu!Math/Arithmetic/Max}
\subsubsection{Info for Plug-In: Math/Arithmetic/Max }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmax \= Email: \= x \kill
Plug-In name:   \> max\>  File:  \> math/arithmetic/max.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/Z_limiter.C
% ------------------------------------------------------------

\section{Z Limiter}
% Name=Z\_limiter
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Z Limiter

\label{pi:Zlimiter}
\subsubsection{Description}

The Z Limiter limites the Z range to a given range defined by an selected area 
(rectangle object used before by \GxsmEmph{AutopDisplay}).

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Z Limiter}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

The range withing an rectange (i.e. the current \GxsmEmph{AutoDisp} settings) 
is used to obtain Z min/max for limiting.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\index{C-PlugIn!math/arithmetic/Z\_limiter.C}
\index{PlugIn!Z\_limiter}
\index{GXSM-Menu!Math/Arithmetic/Z Limiter}
\subsubsection{Info for Plug-In: Math/Arithmetic/Z Limiter }
\begin{tabbing}
Plug-In name:   \= Percy ZahlZ\_limiter \= Email: \= x \kill
Plug-In name:   \> Z\_limiter\>  File:  \> math/arithmetic/Z\_limiter.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/Z_rescale.C
% ------------------------------------------------------------

\section{Multiply scans}
% Name=Z\_rescale
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Mul X

\label{pi:Zrescale}
\subsubsection{Description}

Multiplys the Z-values of scans bt factor. May limit action to rectange -- will be used if any is found.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Z Rescale}.

\subsubsection{Sources}

The "Z" of the active channel is rescaled by a given factor.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

%% OptPlugInNotes

\index{C-PlugIn!math/arithmetic/Z\_rescale.C}
\index{PlugIn!Z\_rescale}
\index{GXSM-Menu!Math/Arithmetic/Mul X}
\subsubsection{Info for Plug-In: Math/Arithmetic/Mul X }
\begin{tabbing}
Plug-In name:   \= Percy ZahlZ\_rescale \= Email: \= x \kill
Plug-In name:   \> Z\_rescale\>  File:  \> math/arithmetic/Z\_rescale.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/add_scan.C
% ------------------------------------------------------------

\section{Add two scans}
% Name=add\_scan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Add X

\label{pi:addscan}
\subsubsection{Description}

Adds the Z-values of two scan.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Add X}.

\subsubsection{Sources}

The active channel is added to the X channel.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\GxsmNote{
Both scans are required to have the same size in pixels.
}

\index{C-PlugIn!math/arithmetic/add\_scan.C}
\index{PlugIn!add\_scan}
\index{GXSM-Menu!Math/Arithmetic/Add X}
\subsubsection{Info for Plug-In: Math/Arithmetic/Add X }
\begin{tabbing}
Plug-In name:   \= Percy Zahladd\_scan \= Email: \= x \kill
Plug-In name:   \> add\_scan\>  File:  \> math/arithmetic/add\_scan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/sub_scan.C
% ------------------------------------------------------------

\section{Subtract scans}
% Name=sub\_scan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Sub X

\label{pi:subscan}
\subsubsection{Description}

Subtracts the Z-values of two scan from each other.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Sub X}.

\subsubsection{Sources}

The X channel is subtracted from the active channel.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\GxsmNote{
Both scans are required to have the same size in pixels.
}

\index{C-PlugIn!math/arithmetic/sub\_scan.C}
\index{PlugIn!sub\_scan}
\index{GXSM-Menu!Math/Arithmetic/Sub X}
\subsubsection{Info for Plug-In: Math/Arithmetic/Sub X }
\begin{tabbing}
Plug-In name:   \= Percy Zahlsub\_scan \= Email: \= x \kill
Plug-In name:   \> sub\_scan\>  File:  \> math/arithmetic/sub\_scan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/log_z.C
% ------------------------------------------------------------

\section{Logarithm transform of Z-values}
% Name=log\_z
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Log

\label{pi:logz}
\subsubsection{Description}

Apply a logarithm transform to the Z values. It subtracts the Z
minimum, adds one computes the logarithm of that:

\[ Z_{\text{math}} = \log \left( Z_{\text{active}}
   - \text{minval} \left( Z_{\text{active}} \right) + 1 \right) \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Log}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\index{C-PlugIn!math/arithmetic/log\_z.C}
\index{PlugIn!log\_z}
\index{GXSM-Menu!Math/Arithmetic/Log}
\subsubsection{Info for Plug-In: Math/Arithmetic/Log }
\begin{tabbing}
Plug-In name:   \= Percy Zahllog\_z \= Email: \= x \kill
Plug-In name:   \> log\_z\>  File:  \> math/arithmetic/log\_z.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/mul_scan.C
% ------------------------------------------------------------

\section{Multiply scans}
% Name=mul\_scan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Mul X

\label{pi:mulscan}
\subsubsection{Description}

Multiplys the Z-values of two scans.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Mul X}.

\subsubsection{Sources}

The active channel is multiplied with the X-channel.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\GxsmNote{
Both scans are required to have the same size in pixels.
}

\index{C-PlugIn!math/arithmetic/mul\_scan.C}
\index{PlugIn!mul\_scan}
\index{GXSM-Menu!Math/Arithmetic/Mul X}
\subsubsection{Info for Plug-In: Math/Arithmetic/Mul X }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmul\_scan \= Email: \= x \kill
Plug-In name:   \> mul\_scan\>  File:  \> math/arithmetic/mul\_scan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/invert_z.C
% ------------------------------------------------------------

\section{Invert Z}
% Name=invert\_z
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Invert

\label{pi:invertz}
\subsubsection{Description}

Invert the Z values of a scan. \[ Z_{\text{math}} = -Z_{\text{active}} \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Invert}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/arithmetic/invert\_z.C}
\index{PlugIn!invert\_z}
\index{GXSM-Menu!Math/Arithmetic/Invert}
\subsubsection{Info for Plug-In: Math/Arithmetic/Invert }
\begin{tabbing}
Plug-In name:   \= Percy Zahlinvert\_z \= Email: \= x \kill
Plug-In name:   \> invert\_z\>  File:  \> math/arithmetic/invert\_z.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/arithmetic/div_scan.C
% ------------------------------------------------------------

\section{Divide scans}
% Name=div\_scan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Div X

\label{pi:divscan}
\subsubsection{Description}

Divide the Z-values of two scans.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Div X}.

\subsubsection{Sources}

The active channel is divided by the X channel.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\GxsmNote{
Both scans are required to have the same size in pixels. Thers is an
$\epsilon = 10^{-8}$ defined as minimal divisor, if the absolute value
of the divisor is smaller than $\epsilon$ the original divident data
is kept unchanged.
}

\index{C-PlugIn!math/arithmetic/div\_scan.C}
\index{PlugIn!div\_scan}
\index{GXSM-Menu!Math/Arithmetic/Div X}
\subsubsection{Info for Plug-In: Math/Arithmetic/Div X }
\begin{tabbing}
Plug-In name:   \= Percy Zahldiv\_scan \= Email: \= x \kill
Plug-In name:   \> div\_scan\>  File:  \> math/arithmetic/div\_scan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/statistik
% ------------------------------------------------------------

\chapter{Plug-Ins: math/statistik}

% Inclusion of PlugInClassIntro: ./plug-ins/math/statistik/PlugInClass.doc


The \emph{math/statistik} plugins are all type of math doing some
statistical analysis like a histogram creation.

% PlugIn: ./plug-ins/math/statistik/islandlbl.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/math/statistik/stepcount.C
% ------------------------------------------------------------

\section{Stepcount}
% Name=baseinfo
% Author=Stefan Schr\"oder
% Email=stefan\_fkp@users.sf.net
% Menupath=Math/Statistics/stepcounter

\label{pi:baseinfo}
\subsubsection{Description}

This is a primitive plugin for the analysis of artificially
generated scans. It counts the number of steps in x-direction,
higher than 255 counts.

\subsubsection{Usage}

Use with
active scan or a selected rectangle within the active scan.

\subsubsection{Sources}

You need one active scan.

\subsubsection{Objects}

If a rectangle is selected the calculated information applies to the
content of the rectangle. Otherwise, the whole scan is analyzed.

\subsubsection{Destination}

The result is printed on the console, so you better have one open!

\subsubsection{Configuration}

None.

\subsubsection{Known Bugs}

None

\GxsmNote{
Is there interest in a more general approach? 
}

\index{C-PlugIn!math/statistik/stepcount.C}
\index{PlugIn!baseinfo}
\index{GXSM-Menu!Math/Statistics/stepcounter}
\subsubsection{Info for Plug-In: Math/Statistics/stepcounter }
\begin{tabbing}
Plug-In name:   \= Stefan Schr\"oderbaseinfo \= Email: \= x \kill
Plug-In name:   \> baseinfo\>  File:  \> math/statistik/stepcount.C\\
Author:	        \> Stefan Schr\"oder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/AngularAnalysis.C
% ------------------------------------------------------------

\section{Angular Analysis}
% Name=AngularAnalysis
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Statistics/Angular Analysis

\label{pi:AngularAnalysis}
\subsubsection{Description}

Calculate all local gradients and presents those in a polar histogram
of slope as radius and direction as polar angle.

\subsubsection{Usage}

Call \GxsmMenu{Math/Statistics/Angular Analysis}.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/statistik/AngularAnalysis.C}
\index{PlugIn!AngularAnalysis}
\index{GXSM-Menu!Math/Statistics/Angular Analysis}
\subsubsection{Info for Plug-In: Math/Statistics/Angular Analysis }
\begin{tabbing}
Plug-In name:   \= Percy ZahlAngularAnalysis \= Email: \= x \kill
Plug-In name:   \> AngularAnalysis\>  File:  \> math/statistik/AngularAnalysis.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/slopedir.C
% ------------------------------------------------------------

\section{Calculate in plane direction of gradient}

% Name=SlopeDir

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=Math/Statistics/Slope Dir

\label{pi:SlopeDir}
\subsubsection{Description}


Calculation of the direction of the local slope (gradient) using a user
defined facet size at each pixel as reference area.  A plane
regression is performed at each pixel to find the best matching local
facet of the given size. Its normal is used to find the gradients direction in plane.

\subsubsection{Usage}

Activate chanel to use and call it from Menu \emph{Math/Statistics/Slope Dir}.

\subsubsection{Sources}

The active channel is used.

\subsubsection{Destination}

Existing Math channel, else newly created Math channel.

\subsubsection{Configuration}

Can set a default facet size, if set to zero it will ask at each call.

\subsubsection{Known Bugs}

No bugs known.

\index{C-PlugIn!math/statistik/slopedir.C}
\index{PlugIn!SlopeDir}
\index{GXSM-Menu!Math/Statistics/Slope Dir}
\subsubsection{Info for Plug-In: Math/Statistics/Slope Dir }
\begin{tabbing}
Plug-In name:   \= Percy ZahlSlopeDir \= Email: \= x \kill
Plug-In name:   \> SlopeDir\>  File:  \> math/statistik/slopedir.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/crosscorrelation.C
% ------------------------------------------------------------

\section{Crosscorrelation}
% Name=crosscorrelation
% Author=Erik Muller
% Email=emmuller@users.sourceforge.net
% Menupath=Math/Statistic/Cross Correlation

\label{pi:crosscorrelation}
\subsubsection{Description}

 Computes the crosscorrelation of two images using a masked area of first source (the active scan).

-- WORK IN PROGRESS --

%%% \[ Z' = |\text{IFT} (\text{FT} (Z_{\text{active}}) \times \text{FT} (Z_{\text{X}}) )| \]

\subsubsection{Usage}

 Call \GxsmMenu{Math/Statistic/Cross Correlation} to execute.

\subsubsection{Sources}

 The active and X channel are used as data source, a rectangular
 selection mask is used for feature selection.

\subsubsection{Destination}

 The computation result is placed into an existing math channel, else
 into a new created math channel.

\GxsmNote{
}

\index{C-PlugIn!math/statistik/crosscorrelation.C}
\index{PlugIn!crosscorrelation}
\index{GXSM-Menu!Math/Statistic/Cross Correlation}
\subsubsection{Info for Plug-In: Math/Statistic/Cross Correlation }
\begin{tabbing}
Plug-In name:   \= Erik Mullercrosscorrelation \= Email: \= x \kill
Plug-In name:   \> crosscorrelation\>  File:  \> math/statistik/crosscorrelation.C\\
Author:	        \> Erik Muller\>  Email: \> emmuller@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/nndistribution.C
% ------------------------------------------------------------

\section{Nndistribution}

% Name=nndistribution

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=Math/Statistics/Nndistribution

\label{pi:nndistribution}
\subsubsection{Description}

The NN-distribution plugin calculates the nearest
neigbour (lateral) distribution of marker groups manually placed in
the active channel using a default (estimated from data) or user
provided number of bins.
Option to auto-recenter markers on max or min locally.

\subsubsection{Usage}

Call it from Gxsm Math/Statistics menu. It will prompt for the number
of bins and provides a estimated number as default. Also the current
min/max Z-value limits and range is shown for informative purpose.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A optional rectangle can not be used. Use crop before!

\subsubsection{Destination}

The computation result is placed into an new profile view.

%% OptPlugInConfig
%The number of bins can be set.

%% OptPlugInFiles
%Needs/creates no files.

%% OptPlugInRefs
%nope.

%% OptPlugInKnownBugs
%No known.

%% OptPlugInNotes
%Hmm, no notes\dots

\GxsmHint{
Find out what happenes with more or less bins!
}

\index{C-PlugIn!math/statistik/nndistribution.C}
\index{PlugIn!nndistribution}
\index{GXSM-Menu!Math/Statistics/Nndistribution}
\subsubsection{Info for Plug-In: Math/Statistics/Nndistribution }
\begin{tabbing}
Plug-In name:   \= Percy Zahlnndistribution \= Email: \= x \kill
Plug-In name:   \> nndistribution\>  File:  \> math/statistik/nndistribution.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/polarhist.C
% ------------------------------------------------------------

\section{Generate a polar histogramm}
% Name=polarhist
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Statistics/Polar Histogram

\label{pi:polarhist}
\subsubsection{Description}

This PlugIn generates from two data sets one (polar) histogram...

\subsubsection{Usage}

Example:
\begin{enumerate}
\item open the demo Ge pyramid image
\item optional for slow machines, scale by x and y 0.2
  (\GxsmMenu{Math/Transformation/Scan Scan}), then activate this
  channel
\item call \GxsmMenu{Math/Statistics/Slope Abs}, use Facet Radius = 5
    (with scale down image)
\item do \GxsmEmph{Autodisp} on resulting \GxsmEmph{Math} channel
\item activate the original (e.g. scaled down image)
\item set a free channel to \GxsmEmph{Math}
\item call \GxsmMenu{Math/Statistics/Slope Dir}
\item the ``Slope Abs'' resulting channel to \GxsmEmph{Mode-Active}
\item the ``Slope Dir'' resulting channel to \GxsmEmph{Mode-X}
\item call \GxsmMenu{Math/Statistics/Polar Hist}\\
angular slices 180\\
data channels  200\\
data start 0\\
data end   45\\
Vmode 1\\
\end{enumerate}

data start = data end = 0 : auto ranging (min/max) is used

\subsubsection{Sources}

The active channel is used as histogramm data source, the X-channel is used as bin

\subsubsection{Objects}

A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

\subsubsection{Known Bugs}

Produces sometimes strange output... pending to fix!

\GxsmNote{
Docu not finished jet, PlugIn makes Gxsm unstable after usage -- work in progress.
}

%% OptPlugInHints
%

\index{C-PlugIn!math/statistik/polarhist.C}
\index{PlugIn!polarhist}
\index{GXSM-Menu!Math/Statistics/Polar Histogram}
\subsubsection{Info for Plug-In: Math/Statistics/Polar Histogram }
\begin{tabbing}
Plug-In name:   \= Percy Zahlpolarhist \= Email: \= x \kill
Plug-In name:   \> polarhist\>  File:  \> math/statistik/polarhist.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/OpenCV_match.C
% ------------------------------------------------------------

\section{Opencvmatch}

% Name=opencvmatch

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=Math/Statistics/Opencvmatch

\label{pi:opencvmatch}
\subsubsection{Description}

The OpenCV Match...

\subsubsection{Usage}

Call it from Gxsm Math/Statistics menu. It will prompt for the number
of bins and provides a estimated number as default. Also the current
min/max Z-value limits and range is shown for informative purpose.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A optional rectangle can not be used. Use crop before!

\subsubsection{Destination}

The computation result is placed into an new profile view.

%% OptPlugInConfig
%The number of bins can be set.

%% OptPlugInFiles
%Needs/creates no files.

%% OptPlugInRefs
%nope.

%% OptPlugInKnownBugs
%No known.

%% OptPlugInNotes
%Hmm, no notes\dots

\GxsmHint{
Find out what happenes with more or less bins!
}

\index{C-PlugIn!math/statistik/OpenCV\_match.C}
\index{PlugIn!opencvmatch}
\index{GXSM-Menu!Math/Statistics/Opencvmatch}
\subsubsection{Info for Plug-In: Math/Statistics/Opencvmatch }
\begin{tabbing}
Plug-In name:   \= Percy Zahlopencvmatch \= Email: \= x \kill
Plug-In name:   \> opencvmatch\>  File:  \> math/statistik/OpenCV\_match.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/vorlage.C
% ------------------------------------------------------------

\section{Vorlage (Template) PlugIn}
%%  * please replace the DocuCaption "Vorlage..." 
%%  * with a intuitive and short caption!
%%  * please also replace the entries below!
% Name=vorlage
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Misc/Vorlage

\label{Gxsm-PlugIn-Vorlage}

\label{pi:vorlage}
\subsubsection{Description}

%% * replace this section by your PlugIn description!
 This is a ``Vorlage'' (German for template) PlugIn. It's purpose is to be a
 template for easy start with writing a new PlugIn and for
 demonstration how a simple PlugIn works as well. The code is
 extensively commented and it includes a nine step instructions list
 for staring your new PlugIn.

\subsubsection{Usage}

%% * Write how to use it.
 This PlugIn is not build and loaded, because it is not
 listed in \GxsmFile{Makefile.am}.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

\subsubsection{Building a new PlugIn in nine steps}

 \begin{enumerate}
 \item Make a copy of this \GxsmFile{vorlage.C} to \GxsmFile{your\_plugins\_name.C}!
 \item Replace all ``vorlage'' by ``your\_plugins\_name''\\
   $\longrightarrow$ please do a search and replace starting here (top of file) NOW!! (Emacs doese preserve caps!)
 \item Decide: One or Two Source Math:\\ search for ``\#define GXSM\_ONE\_SRC\_PLUGIN\_\_DEF''
 \item Fill in GxsmPlugin Structure, see below
 \item Replace the ``about\_text'' below a desired
 \item Optional: Start your Code/Vars definition below (if needed more than the run-fkt itself!),
   search for ``6.)''. please, and see comment there!!
 \item Fill in math code in vorlage\_run(), have a look at the Data-Access methods infos at end
 \item Add \GxsmFile{vorlage.C} to the Makefile.am in analogy to others
 \item Make a ``make; make install''
 \item[A.] Call \GxsmMenu{Tools/reload Plugins}, be happy!
 \item[B.] Have a look at the PlugIn Documentation section starting at the beginning 
   (this is, what you are reading here!) and please fill out this section to provide a proper documentation.\\
   $\longrightarrow$ rebuild the Gxsm manual in Gxsm/Docs/Manual:\\
   run \GxsmFile{./docuscangxsmplugins.pl; latex Gxsm-main} there!
 \item[\dots] That's it!
 \end{enumerate}

%% you can repeat OptPlugIn(Sub)Sections multiple times!

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A optional rectangle is used for data extraction\dots

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\subsubsection{Configuration}

Describe the configuration options of your plug in here!

\subsubsection{Files}

This PlugIn is located here: \GxsmFile{Gxsm/plug-ins/math/statistik/vorlage.C}\\
If your PlugIn uses, needs, creates any files, then put the info here!

\subsubsection{References}

Any references about algorithm sources, etc.?

\subsubsection{Known Bugs}

Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
If you have any additional notes, place them here!
}

\GxsmHint{
Any hints, tips or tricks? Yeah!\\
Check out the more automatic math PlugIn building script:
Go to dir \GxsmFile{Gxsm/plug-ins} and run \GxsmFile{generate\_math\_plugin.sh} there!\\
And never mind, use any existing PlugIn as template as well, but
please please copy and rename it properly before!
}

\index{C-PlugIn!math/statistik/vorlage.C}
\index{PlugIn!vorlage}
\index{GXSM-Menu!Math/Misc/Vorlage}
\subsubsection{Info for Plug-In: Math/Misc/Vorlage }
\begin{tabbing}
Plug-In name:   \= Percy Zahlvorlage \= Email: \= x \kill
Plug-In name:   \> vorlage\>  File:  \> math/statistik/vorlage.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/add_trail.C
% ------------------------------------------------------------

\section{Add Trail}
% Name=add\_trail
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Statistics/Add Trail

\label{pi:addtrail}
\subsubsection{Description}

Add's trail local height to Z at positions in scan.

\subsubsection{Usage}

Call \GxsmMenu{Math/Statistics/Add Trail}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/statistik/add\_trail.C}
\index{PlugIn!add\_trail}
\index{GXSM-Menu!Math/Statistics/Add Trail}
\subsubsection{Info for Plug-In: Math/Statistics/Add Trail }
\begin{tabbing}
Plug-In name:   \= Percy Zahladd\_trail \= Email: \= x \kill
Plug-In name:   \> add\_trail\>  File:  \> math/statistik/add\_trail.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/slopeabs.C
% ------------------------------------------------------------

\section{Calculate gradient (slope)}

% Name=SlopeAbs

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=Math/Statistics/Slope Abs

\label{pi:SlopeAbs}
\subsubsection{Description}

Calculation of the absolute local slope (gradient) using a user
defined facet size at each pixel as reference area.  A plane
regression is performed at each pixel to find the best matching local
facet of the given size. Its normal is used to find the gradient.

\subsubsection{Usage}

Activate chanel to use and call it from Menu \emph{Math/Statistics/Slope Abs}.

\subsubsection{Sources}

The active channel is used.

\subsubsection{Destination}

Existing Math channel, else newly created Math channel.

\subsubsection{Configuration}

Can set a default facet size, if set to zero it will ask at each call.

\subsubsection{Known Bugs}

No bugs known.

\index{C-PlugIn!math/statistik/slopeabs.C}
\index{PlugIn!SlopeAbs}
\index{GXSM-Menu!Math/Statistics/Slope Abs}
\subsubsection{Info for Plug-In: Math/Statistics/Slope Abs }
\begin{tabbing}
Plug-In name:   \= Percy ZahlSlopeAbs \= Email: \= x \kill
Plug-In name:   \> SlopeAbs\>  File:  \> math/statistik/slopeabs.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/OpenCV_recenter.C
% ------------------------------------------------------------

\section{OpenCV Re-Center Feature}

% Name=opencvrecenter

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=Math/Statistics/Opencvrecenter

\label{pi:opencvrecenter}
\subsubsection{Description}

The OpenCV Recenter Feature identifies the most likely position of a
given template feature (hold in a Channel set to Mode-X) in the active
channel and sets the Scan-Offset to the resulting position.

\subsubsection{Usage}

Call it from Gxsm Math/Statistics menu.

\subsubsection{Sources}

The active channel is used as data source. Channel set to X-Mode is used as template.

\subsubsection{Objects}


\subsubsection{Destination}

The computation result of matching threasholds is placed into an new math channel for reference.

%% OptPlugInConfig

%% OptPlugInFiles

%% OptPlugInRefs

%% OptPlugInKnownBugs

%% OptPlugInNotes

\GxsmHint{
}

\index{C-PlugIn!math/statistik/OpenCV\_recenter.C}
\index{PlugIn!opencvrecenter}
\index{GXSM-Menu!Math/Statistics/Opencvrecenter}
\subsubsection{Info for Plug-In: Math/Statistics/Opencvrecenter }
\begin{tabbing}
Plug-In name:   \= Percy Zahlopencvrecenter \= Email: \= x \kill
Plug-In name:   \> opencvrecenter\>  File:  \> math/statistik/OpenCV\_recenter.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/VacancyLineAnalysis.C
% ------------------------------------------------------------

\section{Vacancy Line Analysis}
% Name=VacancyLineAnalysis
% Author=J.S. Palmer
% Email=jspalmer@mines.edu
% Menupath=Math/Statistics/Vacancy Line Analysis

\label{pi:VacancyLineAnalysis}
\subsubsection{Description}

This plugin is used to find the location of dimer vacancy lines.
It was designed to determine statistics of thin layers of SiGe.  A very
important feature to note is that scans must be rotated so that the
vacancy lines are vertical. Lines are searched for vertically down the
scan.  Line objects are used to mark the start and stop positions
for the vacancy lines

Four output results can be created. The most apparent is the copy of
the scan with the position of the vacancy lines standing out as raised
up. A second layer of that scan shows a 3D histogram of the relative
horizontal positions of two vacancies on the same vacancy line
separated by $n$ dimer rows.  $n=0$ is shown at the top of the screen and
the separations are all 0.  The next row down shows a histogram for
$n=1$, the next is $n=2$ and so forth up to $N$ rows down defined in the
configuration (Dimer Rows included in histogram).  The positions of
the vacancies are also saved to a file.  The last output is an
histogram of the space between vacancy lines.

\subsubsection{Usage}

Call it from \GxsmMenu{Math/Statistics/Vacancy Line Analysis}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

Lines must be used to show where the vacancy lines should start and
end. Use  one line for each vacancy line to be located.

\subsubsection{Destination}

The position of the vacancy lines is displayed in the math channel or
a new channel if a math channel is not open.  This channel will have a
second layer showing a histogram of the vacancy line straightness. If
a histogram showing the vacancy line separation is chosen, a new
profile window is also opened.

\subsubsection{Configuration}

Several parameters are adjustable in the configuration window.  

\begin{description}
\item[Dimer Spacing] The spacing of the dimers -- is $7.68\:$\AA\ on Si.  
\item[Max Vacancy Line Shift] The horizontal distance searched in each
  direction for the position on the dimer vacancy.  Typical
  values are $2\dots3$ atomic rows.
\item[Pixels to Average] Number of pixels in horizontal direction to
  average in searching for vacancy.
\item[Dimer rows included in 3D Histogram] The Maximum number of dimer
  rows between two vacancies on the on the same vacancy line to be
  included in the histogram. ($N$ as described above in the Description
  area)
\item[3D Histogram Size] The size can be either $1:1$ (default), meaning
  that the horizontal scale is correct.  If $0$ is entered the output is
  scaled to fill the window.
\item[Line-Spacing Histogram Bin Width] The width of each bin in the
  histogram showing the vacancy line spacing.  If $0$ is entered no
  histogram is created.
\end{description}

\subsubsection{Files}

The user is prompted for an output file. A matrix is saved in the file
containing the positions of the vacancy lines.  Each column in the
matrix represents a vacancy line.  Each row represents a dimer row.
The value of a matrix position is the horizontal pixel coordinates of
the dimer vacancy.  A value of $-1$ means is is before the beginning of
the line or after the end of the line.  Two rows before the matrix are
used to designate the row number for the first and last dimer vacancy
in that column (vacancy line).  The first row is designated as $0$.
Also included in the heading is the dimer spacing used, which gives
the conversion for rows to vertical position, and the x and y pixel
spacing. The x pixel spacing provide a conversion from pixel position
to horizontal position.
 

%% OptPlugInRefs
%nope.

%% OptPlugInKnownBugs
%No known.

%% OptPlugInNotes
%Hmm, no notes\dots

\GxsmHint{
Here is a quick check list:
\begin{enumerate}
\item Rotate the scan so the Vacancy lines are as close to vertical as
possible.
\item Move start and stop positions or divide a line in two using two
\item Save your line objects -- it is time consuming to put them in and
\item Determine the correct dimer spacing for your image using a
\end{enumerate}
}

\index{C-PlugIn!math/statistik/VacancyLineAnalysis.C}
\index{PlugIn!VacancyLineAnalysis}
\index{GXSM-Menu!Math/Statistics/Vacancy Line Analysis}
\subsubsection{Info for Plug-In: Math/Statistics/Vacancy Line Analysis }
\begin{tabbing}
Plug-In name:   \= J.S. PalmerVacancyLineAnalysis \= Email: \= x \kill
Plug-In name:   \> VacancyLineAnalysis\>  File:  \> math/statistik/VacancyLineAnalysis.C\\
Author:	        \> J.S. Palmer\>  Email: \> jspalmer@mines.edu\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/histoHOP.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/math/statistik/mathilbl.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/math/statistik/spasimkz.C
% ------------------------------------------------------------

\section{SPA--LEED 1D profile simulation $k_z$.}
% Name=spasimkz
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Statistics/SPALEED Simkz

\label{pi:spasimkz}
\subsubsection{Description}

Calculates SPA--LEED Profiles over phase (S) e.g. a $k_z$-plot:\\
For each phase S (S=2 StepHeight/WaveLength) a 1D fourier
transformation is calculated for all image lines, which are phase
transformed before. All transformed lines for this phase are summed up
and stored to the new image as Line 'S'.

Def. Phase Transformation:
\[e^{2\pi i S Z(x,y)}\]

%\clearpage
Algorithm (shortened, extracted from source):

\begin{verbatim}
 for(i=0, S=PhaseStart; i<Dest->data.s.ny; S+=PhaseStep, ++i){
    // PhaseTrans:
    // transform scan data to complex data with correct phase
    double sf = 2. * M_PI * S * Src->data.s.dz / StepHeight;
    for (int line=0; line < Src->mem2d->GetNy(); line++) {
        Src->mem2d->data->SetPtr(0, line);
        for (int col=0; col < Src->mem2d->GetNx(); col++) {
            double arg = sf * Src->mem2d->data->GetNext();
            c_re(htrans[col]) = cos(arg);
            c_im(htrans[col]) = sin(arg);
        }

      // do FFT
      fftw( plan, 1, htrans, 1, 0, hkspc, 1, 0);

      // StoreAbsolute, Add to Dest [double]
      Dest->mem2d->data->SetPtr(0, i);
      for (int j = 0; j<Src->mem2d->GetNx(); ++j){
          int k=QSWP(j, Dest->mem2d->GetNx());
          Dest->mem2d->data->SetNext( 
              Dest->mem2d->data->GetThis()
              + c_re(hkspc[k])*c_re(hkspc[k]) 
              + c_im(hkspc[k])*c_im(hkspc[k])
                                    );
      }
    }
  }
\end{verbatim}


\subsubsection{Usage}

Call from \GxsmMenu{Math/Statistics/SPALEED Simkz.} and input the step
height, phase range and phase step size.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\subsubsection{Configuration}

Use the Plug-In configurator to set default values. Use the entry
\GxsmEmph{Ask Next} to prevent or reenable further asking for
parameters (1 will ask, 0 not).

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInKnownBugs
%

%% OptPlugInNotes
%

%% OptPlugInHints
%

\index{C-PlugIn!math/statistik/spasimkz.C}
\index{PlugIn!spasimkz}
\index{GXSM-Menu!Math/Statistics/SPALEED Simkz}
\subsubsection{Info for Plug-In: Math/Statistics/SPALEED Simkz }
\begin{tabbing}
Plug-In name:   \= Percy Zahlspasimkz \= Email: \= x \kill
Plug-In name:   \> spasimkz\>  File:  \> math/statistik/spasimkz.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/baseinfo.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/math/statistik/average_profile.C
% ------------------------------------------------------------

\section{Average X Profile}
% Name=average\_profile
% Author=P. Zahl
% Email=zahl@gxsm.sf.net
% Menupath=Math/Statistics/Average X Profile

\label{pi:averageprofile}
\subsubsection{Description}

Compute the average X profile of all scanlines.

%% PlugInUsage


%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/statistik/average\_profile.C}
\index{PlugIn!average\_profile}
\index{GXSM-Menu!Math/Statistics/Average X Profile}
\subsubsection{Info for Plug-In: Math/Statistics/Average X Profile }
\begin{tabbing}
Plug-In name:   \= P. Zahlaverage\_profile \= Email: \= x \kill
Plug-In name:   \> average\_profile\>  File:  \> math/statistik/average\_profile.C\\
Author:	        \> P. Zahl\>  Email: \> zahl@gxsm.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/autocorrelation.C
% ------------------------------------------------------------

\section{Autocorrelation}
% Name=autocorrelation
% Author=Erik Muller
% Email=emmuller@users.sourceforge.net
% Menupath=Math/Statistic/Auto Correlation

\label{pi:autocorrelation}
\subsubsection{Description}

Computes the autocorrelation of an image.

\[ Z' = |\text{IFT} (\text{FT} (Z))| \]

\subsubsection{Usage}

Call \GxsmMenu{Math/Statistic/Auto Correlation} to execute.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\GxsmNote{
The quadrants of the resulting invers spectrum are aligned in a way,
that the intensity of by it self correlated pixels (distance zero) is
found at the image center and not at all four edges.
}

\index{C-PlugIn!math/statistik/autocorrelation.C}
\index{PlugIn!autocorrelation}
\index{GXSM-Menu!Math/Statistic/Auto Correlation}
\subsubsection{Info for Plug-In: Math/Statistic/Auto Correlation }
\begin{tabbing}
Plug-In name:   \= Erik Mullerautocorrelation \= Email: \= x \kill
Plug-In name:   \> autocorrelation\>  File:  \> math/statistik/autocorrelation.C\\
Author:	        \> Erik Muller\>  Email: \> emmuller@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/spasim.C
% ------------------------------------------------------------

\section{SPA--LEED simulation}
% Name=spasim
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Statistik/SPALEED Sim.

\label{pi:spasim}
\subsubsection{Description}

 This Plugin simulates a SPA-LEED measurement (asks for the electron
 wave lenght $\lambda$ as input) using the following transformation:

\begin{enumerate}
\item phase transformation, using 
  \[e^\frac{2\pi i Z(x,y)}{\lambda}\]
\item 2 dim. fourier transformation of the phase transformed image
\item the resulting intensity is stored: $|FT(\text{phase trans. image})|^2$
\end{enumerate}

The resulting scan is scaled to have a size of $\pm100$ (full width is
one. To automatically calculate realspace dimensions $\Gamma$ from
inverse of spot separation (e.g. from center (0,0) to some spot or
lenght of the line object) enable \GxsmEmph{InvAng} with the PlugIn configurator!
By default coordinates in pixels  are used (center is (0,0)).

\GxsmNote{Remember: One pixel distance (e.g. in X) corresponds to the
full width of the original picture!}

\subsubsection{Usage}

Call from \GxsmMenu{Math/Statistics/SPALEED Sim.} and input $\lambda$
in Angstroems.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\subsubsection{Configuration}

Using the Plug-In configurator you can preset the wave lenght $\lambda$.

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

\subsubsection{Known Bugs}

The show-line object did not work with the \GxsmEmph{InvAng} setting
-- sorry, but you can still save the data, but it will not show any
profile.

%% OptPlugInNotes

\GxsmHint{
You may want to carefully background correct you image before! Check
also for correct step heights, if applicable.
}

\index{C-PlugIn!math/statistik/spasim.C}
\index{PlugIn!spasim}
\index{GXSM-Menu!Math/Statistik/SPALEED Sim.}
\subsubsection{Info for Plug-In: Math/Statistik/SPALEED Sim. }
\begin{tabbing}
Plug-In name:   \= Percy Zahlspasim \= Email: \= x \kill
Plug-In name:   \> spasim\>  File:  \> math/statistik/spasim.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/statistik/histogram.C
% ------------------------------------------------------------

\section{Histogram}

% Name=histogram

% Author=Percy Zahl

% Email=zahl@users.sf.net

% Menupath=Math/Statistics/Histogram

\label{pi:histogram}
\subsubsection{Description}

The Histogram plugin calculates the Z-value distribution (typically a
height histogram) of the active channel using a default (estimated from data)
or user provided number of bins.

\subsubsection{Usage}

Call it from Gxsm Math/Statistics menu. It will prompt for the number
of bins and provides a estimated number as default. Also the current
min/max Z-value limits and range is shown for informative purpose.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A optional rectangle can not be used. Use crop before!

\subsubsection{Destination}

The computation result is placed into an new profile view.

%% OptPlugInConfig
%The number of bins can be set.

%% OptPlugInFiles
%Needs/creates no files.

%% OptPlugInRefs
%nope.

%% OptPlugInKnownBugs
%No known.

%% OptPlugInNotes
%Hmm, no notes\dots

\GxsmHint{
Find out what happenes with more or less bins!
}

\index{C-PlugIn!math/statistik/histogram.C}
\index{PlugIn!histogram}
\index{GXSM-Menu!Math/Statistics/Histogram}
\subsubsection{Info for Plug-In: Math/Statistics/Histogram }
\begin{tabbing}
Plug-In name:   \= Percy Zahlhistogram \= Email: \= x \kill
Plug-In name:   \> histogram\>  File:  \> math/statistik/histogram.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/convert
% ------------------------------------------------------------

\chapter{Plug-Ins: math/convert}

% Inclusion of PlugInClassIntro: ./plug-ins/math/convert/PlugInClass.doc


The \emph{math/convert} plugins are used for scan data type convertsion,
such as converting from \GxsmEmph{short} to \GxsmEmph{float}.

% PlugIn: ./plug-ins/math/convert/make_test.C
% ------------------------------------------------------------

\section{Generate test data}
% Name=make\_test
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/make test

\label{pi:maketest}
\subsubsection{Description}

Makes a test data set -- for test and demostration purpose only.

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/make test}.

\subsubsection{Sources}


\subsubsection{Destination}


\index{C-PlugIn!math/convert/make\_test.C}
\index{PlugIn!make\_test}
\index{GXSM-Menu!Math/Convert/make test}
\subsubsection{Info for Plug-In: Math/Convert/make test }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmake\_test \= Email: \= x \kill
Plug-In name:   \> make\_test\>  File:  \> math/convert/make\_test.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/short_to_short.C
% ------------------------------------------------------------

\section{Convert to short, apply custom fix filter}
% Name=short\_to\_short
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to short fix

\label{pi:shorttoshort}
\subsubsection{Description}

Convert scan data type to short and apply a custom fix (-32768 $\rightarrow$ +32766).

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to short fix}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

% OptPlugInNote
This is a special temporary hack, only loaded if Instrument is set to SNOM.

\index{C-PlugIn!math/convert/short\_to\_short.C}
\index{PlugIn!short\_to\_short}
\index{GXSM-Menu!Math/Convert/to short fix}
\subsubsection{Info for Plug-In: Math/Convert/to short fix }
\begin{tabbing}
Plug-In name:   \= Percy Zahlshort\_to\_short \= Email: \= x \kill
Plug-In name:   \> short\_to\_short\>  File:  \> math/convert/short\_to\_short.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/to_double.C
% ------------------------------------------------------------

\section{Convert to double}
% Name=to\_double
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to double

\label{pi:todouble}
\subsubsection{Description}

Convert scan data type to double.

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to double}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/convert/to\_double.C}
\index{PlugIn!to\_double}
\index{GXSM-Menu!Math/Convert/to double}
\subsubsection{Info for Plug-In: Math/Convert/to double }
\begin{tabbing}
Plug-In name:   \= Percy Zahlto\_double \= Email: \= x \kill
Plug-In name:   \> to\_double\>  File:  \> math/convert/to\_double.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/to_short.C
% ------------------------------------------------------------

\section{Convert to short}
% Name=to\_short
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to short

\label{pi:toshort}
\subsubsection{Description}

Convert scan data type to short.

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to short}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

% OptPlugInNote
Conversion from higher to lower dynamic range type may result in
overflow, e.g. value wrapping round. There is no saturation mode yet.

\index{C-PlugIn!math/convert/to\_short.C}
\index{PlugIn!to\_short}
\index{GXSM-Menu!Math/Convert/to short}
\subsubsection{Info for Plug-In: Math/Convert/to short }
\begin{tabbing}
Plug-In name:   \= Percy Zahlto\_short \= Email: \= x \kill
Plug-In name:   \> to\_short\>  File:  \> math/convert/to\_short.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/to_long.C
% ------------------------------------------------------------

\section{Convert to long}
% Name=to\_long
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to long

\label{pi:tolong}
\subsubsection{Description}

Convert scan data type to long.

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to long}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

% OptPlugInNote
Conversion from higher to lower dynamic range type may result in
overflow, e.g. value wrapping round. There is no saturation mode yet.

\index{C-PlugIn!math/convert/to\_long.C}
\index{PlugIn!to\_long}
\index{GXSM-Menu!Math/Convert/to long}
\subsubsection{Info for Plug-In: Math/Convert/to long }
\begin{tabbing}
Plug-In name:   \= Percy Zahlto\_long \= Email: \= x \kill
Plug-In name:   \> to\_long\>  File:  \> math/convert/to\_long.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/to_byte.C
% ------------------------------------------------------------

\section{Convert to byte}
% Name=to\_byte
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to byte

\label{pi:tobyte}
\subsubsection{Description}

Convert scan data type to byte.

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to byte}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

% OptPlugInNote
Conversion from higher to lower dynamic range type may result in
overflow, e.g. value wrapping round. There is no saturation mode yet.

\index{C-PlugIn!math/convert/to\_byte.C}
\index{PlugIn!to\_byte}
\index{GXSM-Menu!Math/Convert/to byte}
\subsubsection{Info for Plug-In: Math/Convert/to byte }
\begin{tabbing}
Plug-In name:   \= Percy Zahlto\_byte \= Email: \= x \kill
Plug-In name:   \> to\_byte\>  File:  \> math/convert/to\_byte.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/to_complex.C
% ------------------------------------------------------------

\section{Convert to complex}
% Name=to\_complex
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to complex

\label{pi:tocomplex}
\subsubsection{Description}

Convert scan data type to complex. Therefore layer 0 is used to hold
the absolute value, layer 1 the real part and layer 2 for the imaginary part. A conversion to it
will set the imaginary part to zero, a conversion from complex to a
scalar type will compute the magnitude fom re and im, ignoring the possible existing abs value!

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to complex}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/convert/to\_complex.C}
\index{PlugIn!to\_complex}
\index{GXSM-Menu!Math/Convert/to complex}
\subsubsection{Info for Plug-In: Math/Convert/to complex }
\begin{tabbing}
Plug-In name:   \= Percy Zahlto\_complex \= Email: \= x \kill
Plug-In name:   \> to\_complex\>  File:  \> math/convert/to\_complex.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/uto_float.C
% ------------------------------------------------------------

\section{Convert Unsigned to float}
% Name=uto\_float
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to float

\label{pi:utofloat}
\subsubsection{Description}

Convert scan data type to float. While converting a unsigned short in signed short type is expected and corrected.
This is a hack for fixing imported data.

The transformation used, applied to all data in H:

\[\text{if} \quad Z < 0 \quad \text{then} \quad  Z' = Z + 2^{16} \quad \text{else} \quad Z' = Z\]


\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/U to float}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/convert/uto\_float.C}
\index{PlugIn!uto\_float}
\index{GXSM-Menu!Math/Convert/to float}
\subsubsection{Info for Plug-In: Math/Convert/to float }
\begin{tabbing}
Plug-In name:   \= Percy Zahluto\_float \= Email: \= x \kill
Plug-In name:   \> uto\_float\>  File:  \> math/convert/uto\_float.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/convert/to_float.C
% ------------------------------------------------------------

\section{Convert to float}
% Name=to\_float
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Convert/to float

\label{pi:tofloat}
\subsubsection{Description}

Convert scan data type to float.

\subsubsection{Usage}

Call \GxsmMenu{Math/Convert/to float}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The conversion result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/convert/to\_float.C}
\index{PlugIn!to\_float}
\index{GXSM-Menu!Math/Convert/to float}
\subsubsection{Info for Plug-In: Math/Convert/to float }
\begin{tabbing}
Plug-In name:   \= Percy Zahlto\_float \= Email: \= x \kill
Plug-In name:   \> to\_float\>  File:  \> math/convert/to\_float.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/probe
% ------------------------------------------------------------

\chapter{Plug-Ins: math/probe}

% Inclusion of PlugInClassIntro: ./plug-ins/math/probe/PlugInClass.doc


The \emph{math/probe} plugins are designated for probe data analysis
and extraction or separation. They deal with all kind of probe and
event data attached to a scan.


A quick Overview of the ScanEvent interface: -- to be translated --

\begin{verbatim}
Also zum Einstieg, solltet Ihr Euch ein wenig mit dem Event-Handling
vertraut machen, mal scan_event.[hC] studieren -- die NetCDF load/save
routinen knnt Ihr einfach irgnorieren. Diese wird dann von mem2d.[hC]
verwendet, jedoch weniger wichtig, einzig was in mem2d.h von interesse
ist, ist die eine (und einizge) Liste (public in mem2d)

        GSList *scan_event_list;

die alle ScanEvents (Probe und User, etc...!!) enthlt.


Also zum berblick vielleicht gebe ich mal eine Kurzeinfhrung:

GSList *scan_event_list;  ist eine GSList die pointer von Type ScanEvent
enthlt.

Class ScanEvent ist ein Abstrakter Event (jedes types), und ScanEvent
hlt nicht mehr als die Koordinaten XYV + Event(s) (eine Art
Vierervektor, wenn man die Events selber noch mitnimmt und als t
sieht-:). (V == Value, optional und zur Zeit noch nicht verwendet, ist
jedoch nur logisch vorzusehen, wenn ich an Layered Scan denke (jeder
Layer N hat einen zugeordneten Value "V"), XY Koordinate ist in
absoluten Angstroems (incl Offset/Rotation!).

Also:

Der ScanEvent im berblick, der Konstructor: (bentigt Ihr nicht)
class ScanEvent
ScanEvent (double xPos, double yPos, double Val=0.);

Wichtige Member Funktionen ggf. von Interesse:

        void add_event (EventEntry *ee); // Einen realen Daten-Event (mit Daten!) hinzufgen 
        double get_position (double &x, double &y); // Position abfragen (in kommt zurck in x,y, value als return wert)
        double distance (double *xy); // Abstand zu Punkt xy, ist array xy[]={X,Y, (V, ...)_Future}
        guint get_event_count() ; // Anzahl Events in Liste

Data:
        GSList *event_list; // Liste von Daten-Events "hier" bei XYV, 
                            // i.a. nur ein DatenEvent, type der Pointer ist "EventEntry".


Dann wre da die Basis Class "EventEntry" (Ist Basis aller "Daten-Events)

class EventEntry
EventEntry (gchar *Name, time_t Time);

Ein EventEntry hat also einen Namen und eine Zeit (Zeit Koordinate,
time_t)

Wichtig: Ich habe als "Konevntion" Probe Events mit dem Namen "Probe"
versehen und User Events mit dem Namen "User", ist zum Identifikation.
Und Weiterhin sollen die Anfangsbuchstaben von Probe und User
eineindeutig sein, d.h. 'P' fr Probe:

        gchar* description () { return name; }; // der volle Name
        gchar description_id () { return name[0]; }; // Identifikation via Initial (for speed reasons)


Dann gibt es den ProbeEntry  (etwas gestrippeder Code)  fr alle Probe
artigen Daten:

class ProbeEntry : public EventEntry{
public:
        ProbeEntry (gchar *Name, time_t Time, GPtrArray *Labels, GPtrArray
*Unitssymbols, int Chunk_size); // Name, zur Zeit nur "Probe", time,
// dann ein Array von Pointern auf Labels und auf Unitssymbols, und Chunk_size.

// Chunk_size ist die Anzahl der aufgezeichneten Channels des Probe, aus
// Performance grnden speichere ich den gazne Probe-Datensatz von
// N-Punkten * J-Channels in einem linearen GArray ab mit folgender
// linearisierter Indizierung: (n*chunk_size+j) -- OK?


        virtual double get (int n, int j) // gibt den Probe Wert des N-ten
// Punktes, Channel j zurck -- die j-indizierung stimmt mit der "j"
// Indizierung von Labels und Unitssym berein. - OK?


        int get_num_sets () { return num_sets; }; // Anzahl Daten Punkte (N)
        int get_chunk_size () { return chunk_size; }; // Anzahl Channels (J)
        gchar *get_label (int j);
        gchar *get_unit_symbol (int j);
}


Analog gibt es dann noch

class UserEntry : public EventEntry{
public:
        UserEntry (gchar *Name, time_t Time, GPtrArray *Messages=NULL, int
num=0); // Name == "User" per default
...}


---

Wichtig ist, das man bevor man einen Event aus der EventListe als
ProbeEvent interpretiert den Type checked via der "ID" Funktion! Klar?

\end{verbatim}

That's it.


% PlugIn: ./plug-ins/math/probe/afm_lj_mechanical_sim.C
% ------------------------------------------------------------

\section{AFM (NC-AFM) mechanical tip apex/molecule imaging simulations}
% Name=Unnamed
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Probe/AFM\_mechanical\_sim

\label{pi:Unnamed}
\subsubsection{Description}

Simulating NC-AFM images and force curves. Based on publication:

PHYSICAL REVIEW B 90, 085421 (2014)
Mechanism of high-resolution STM/AFM imaging with functionalized tips
Prokop Hapala --Institute of Physics, Academy of Sciences of the Czech Republic, v.v.i., Cukrovarnick a 10, 162 00 Prague, Czech Republic;
Georgy Kichin, Christian Wagner, F. Stefan Tautz, and Ruslan Temirov -- Peter Gr\"unberg Institut (PGI-3), Forschungszentrum J\"ulich, 52425 J\"ulich, Germany
and J\"ulich Aachen Research Alliance (JARA), Fundamentals of Future Information Technology, 52425 J\"ulich, Germany;
Pavel Jelinek -- Institute of Physics, Academy of Sciences of the Czech Republic, v.v.i., Cukrovarnick a 10, 162 00 Prague, Czech Republic and Graduate School of Engineering, Osaka University 2-1, Yamada-Oka, Suita, Osaka 565-0871, Japan

High-resolution atomic force microscopy (AFM) and scanning tunneling microscopy (STM) imaging with
functionalized tips is well established, but a detailed understanding of the imaging mechanism is still missing. We
present a numerical STM/AFM model, which takes into account the relaxation of the probe due to the tip-sample
interaction. We demonstrate that the model is able to reproduce very well not only the experimental intra- and
intermolecular contrasts, but also their evolution upon tip approach. At close distances, the simulations unveil a
significant probe particle relaxation towards local minima of the interaction potential. This effect is responsible
for the sharp submolecular resolution observed in AFM/STM experiments. In addition, we demonstrate that sharp
apparent intermolecular bonds should not be interpreted as true hydrogen bonds, in the sense of representing
areas of increased electron density. Instead, they represent the ridge between two minima of the potential energy
landscape due to neighboring atoms.

and

related Supplementary Material: The mechanism of high-resolution STM/AFM imaging with functionalized tips.

\subsubsection{Usage}

Call \GxsmMenu{Math/Probe/AFM mechanical sim}

\subsubsection{Sources}

The active channel is used as geometry/size/offset template only. Must be of type DOUBLE.

\subsubsection{Objects}

Input data file to load as external molecule/structure model.

"model.xyz" type file. 1st line: "N" number of atoms, 2nd line comment/name/info -- ignored.
Then atom 1...N in following lines. Format:

El X Y Z   
 C 0 0 0
 O 2.365 0.213 0.03
Cu 0.1 0.7 -3.5
...   

El=Element Symbol, mut be two characters like " C" " O" "Cu", then X Y Z  coordinates in Angstroem

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\subsubsection{Configuration}

The PlugIn configurator...

\index{C-PlugIn!math/probe/afm\_lj\_mechanical\_sim.C}
\index{PlugIn!Unnamed}
\index{GXSM-Menu!Math/Probe/AFM\_mechanical\_sim}
\subsubsection{Info for Plug-In: Math/Probe/AFM\_mechanical\_sim }
\begin{tabbing}
Plug-In name:   \= Percy ZahlUnnamed \= Email: \= x \kill
Plug-In name:   \> Unnamed\>  File:  \> math/probe/afm\_lj\_mechanical\_sim.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/probe/probe_image_extract.C
% ------------------------------------------------------------

\section{Probe Image Extract}
% Name=probe\_image\_extract
% Author=Bastian Weyers
% Email=weyers@users.sf.net
% Menupath=Math/Probe/Probe\_Image\_Extract

\label{pi:probeimageextract}
\subsubsection{Description}

Extract selected probe data/values and generates a new image from that.
Select a \GxsmEmph{Rectangle}.

\subsubsection{Usage}

Call \GxsmMenu{Math/Probe/Probe\_Image\_Extract}

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A rectangle object is needed. Probe events must be present in the active scan.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\subsubsection{Configuration}

The PlugIn configurator allows to set a default index andan chanel. If this is non
zero the user is not prompted!

\index{C-PlugIn!math/probe/probe\_image\_extract.C}
\index{PlugIn!probe\_image\_extract}
\index{GXSM-Menu!Math/Probe/Probe\_Image\_Extract}
\subsubsection{Info for Plug-In: Math/Probe/Probe\_Image\_Extract }
\begin{tabbing}
Plug-In name:   \= Bastian Weyersprobe\_image\_extract \= Email: \= x \kill
Plug-In name:   \> probe\_image\_extract\>  File:  \> math/probe/probe\_image\_extract.C\\
Author:	        \> Bastian Weyers\>  Email: \> weyers@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/filter1d
% ------------------------------------------------------------

\chapter{Plug-Ins: math/filter1d}

% Inclusion of PlugInClassIntro: ./plug-ins/math/filter1d/PlugInClass.doc


The \emph{math/filter1d} plugins are all type off math applied to scan
data in a line by line manner -- not needing to know what the previous
or next line data is, such as 1D derivation, inversion\dots

% PlugIn: ./plug-ins/math/filter1d/koehler.C
% ------------------------------------------------------------

\section{Koehler filter}
% Name=koehler
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 1D/Koehler

\label{pi:koehler}
\subsubsection{Description}

\label{PlugIn-F1D-Koehler}
The Koehler filter differentiates the image data line by line (1D).
It uses a local weightened differentation and floating averagening.

Starting with the left value $Z_0$
\[ V_0 = Z_0 \]
and then using $0.92$ of the left and $0.08$ of the following $Z$ value:
\[ V_i = 0.92 V_{i-1} + 0.08 Z_i \quad \text{for all} \quad i\in{1, 2, \dots, N_x-1}\]

The next iteration doese the same starting at the right site with the current results:
\[ V_i = 0.92 V_{i+1} + 0.08 V_i \quad \text{for all} \quad i\in{N_x-2, N_x-3, \dots, 0}\]

Finally the difference of all $Z$ values with the weightened and averaged value is computed:
\[ Z'_i = Z_i - V_i \quad \text{for all} \quad i\in{0, 1, 2, \dots, N_x-1}\]

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 1D/Koehler}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\subsubsection{Configuration}

No -- the koefficients are constants and can only be changed in the PlugIn itself.

\subsubsection{References}

Filter is originated to PMSTM and Ulli Koehler?

\GxsmNote{
A similar effect (on a limited lenght) is used the the differential view now on the fly.
}

\index{C-PlugIn!math/filter1d/koehler.C}
\index{PlugIn!koehler}
\index{GXSM-Menu!Math/Filter 1D/Koehler}
\subsubsection{Info for Plug-In: Math/Filter 1D/Koehler }
\begin{tabbing}
Plug-In name:   \= Percy Zahlkoehler \= Email: \= x \kill
Plug-In name:   \> koehler\>  File:  \> math/filter1d/koehler.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/timedomfftfilter.C
% ------------------------------------------------------------

\section{Time Domain FFT Filter}
% Name=timedomfftfilter
% Author=Percy Zahl
% Email=zahl@users.sourceforge.net
% Menupath=Math/Filter 2D/t dom filter

\label{pi:timedomfftfilter}
\subsubsection{Description}

This filter acts in one dimension on real time domain of the whole
scan. To use it you need the gap-less data of all times, i.e. the
forward and backward scan is needed and the scan data should also be
gap-less and real time at the turn-over points at the end/start of
every scan lines -- this is the case for the "SignalRanger"
implementation.

\GxsmNote{Backward scan data must be in reverse (mirrored in X), as
provided by the SignalRanger.}

\GxsmNote{Any X-scan directional slope will be automatically removed
in time domain by this filter, also the scan DC component will be
eliminated.}

The filter assembles a one dimensional data set in time domain from
scan start to scan end using forward and backward scan data
sets. Transforms this into frequency domain, eliminates all multiples of
scan-width frequency comnponents (tilt in scan direction) and cuts out
the user provided band, then transforms it back into time domain and
reassembles one double width images containing forward and backward
data.


\subsubsection{Usage}

Activate a channel containing the forward $\rightarrow$ scan data and
put the channel containing the backward $\leftarrow$ scan data into
mode X. Then execute the filter \GxsmMenu{Math/Filter 1D/t dom
filter}. It will ask for the stop badn position and half width in
inverse pixels.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
This plugin is under construction.

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/filter1d/timedomfftfilter.C}
\index{PlugIn!timedomfftfilter}
\index{GXSM-Menu!Math/Filter 2D/t dom filter}
\subsubsection{Info for Plug-In: Math/Filter 2D/t dom filter }
\begin{tabbing}
Plug-In name:   \= Percy Zahltimedomfftfilter \= Email: \= x \kill
Plug-In name:   \> timedomfftfilter\>  File:  \> math/filter1d/timedomfftfilter.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/linear_stat_diff.C
% ------------------------------------------------------------

\section{Linear stationary differentation}
% Name=linear\_stat\_diff
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 1D/Lin stat diff

\label{pi:linearstatdiff}
\subsubsection{Description}

Edge enhancement via differentation as follows:
\[ I_i = \frac{1}{9}\sum_{k=i-4}^{i+4}Z_k \]
\[ Z'_i = \frac{1}{4}\frac{Z_i - I_i }
          {\sqrt{\frac{1}{2}\sum_{k=i-4}^{i+4}\left(Z_k-I_k\right)^2}}
        + \frac{I_i}{2}
\]

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 1D/Lin stat diff}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/filter1d/linear\_stat\_diff.C}
\index{PlugIn!linear\_stat\_diff}
\index{GXSM-Menu!Math/Filter 1D/Lin stat diff}
\subsubsection{Info for Plug-In: Math/Filter 1D/Lin stat diff }
\begin{tabbing}
Plug-In name:   \= Percy Zahllinear\_stat\_diff \= Email: \= x \kill
Plug-In name:   \> linear\_stat\_diff\>  File:  \> math/filter1d/linear\_stat\_diff.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/repair_cs.C
% ------------------------------------------------------------

\section{Repair filter}
% Name=repair\_cs
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 1D/Repair

\label{pi:repaircs}
\subsubsection{Description}

This filter is obsolete for all Gxsm only users. It just fixes a
high/low words order bug -- occured while data transport from DSP to
host -- in line data, e.g. data points on columns $X_2n$ and
$X_{2n+1}$ are swapped, which happened in one special old version of
Xxsm (the predictor of Gxsm). It's here, because the original old data
are backed up and may be needed to be processed with this filter to
fix.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 1D/Repair} to execute.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInNotes
%If you have any additional notes

\index{C-PlugIn!math/filter1d/repair\_cs.C}
\index{PlugIn!repair\_cs}
\index{GXSM-Menu!Math/Filter 1D/Repair}
\subsubsection{Info for Plug-In: Math/Filter 1D/Repair }
\begin{tabbing}
Plug-In name:   \= Percy Zahlrepair\_cs \= Email: \= x \kill
Plug-In name:   \> repair\_cs\>  File:  \> math/filter1d/repair\_cs.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/template.C
% ------------------------------------------------------------

\section{Template}
% Name=template
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Template

\label{pi:template}
\subsubsection{Description}

Template action.

\subsubsection{Usage}

Call \GxsmMenu{Math/Background/Template}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter1d/template.C}
\index{PlugIn!template}
\index{GXSM-Menu!Math/Background/Template}
\subsubsection{Info for Plug-In: Math/Background/Template }
\begin{tabbing}
Plug-In name:   \= Percy Zahltemplate \= Email: \= x \kill
Plug-In name:   \> template\>  File:  \> math/filter1d/template.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/despike1d.C
% ------------------------------------------------------------

\section{Despike 1d}
% Name=despike1d
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Background/Despike1d

\label{pi:despike1d}
\subsubsection{Description}

Despike 1d filter.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 1D/Despike}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter1d/despike1d.C}
\index{PlugIn!despike1d}
\index{GXSM-Menu!Math/Background/Despike1d}
\subsubsection{Info for Plug-In: Math/Background/Despike1d }
\begin{tabbing}
Plug-In name:   \= Percy Zahldespike1d \= Email: \= x \kill
Plug-In name:   \> despike1d\>  File:  \> math/filter1d/despike1d.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/diff.C
% ------------------------------------------------------------

\section{1dim differentation}
% Name=diff
% Author=Percy Zahl, Stefan Schroeder
% Email=zahl@users.sf.net
% Menupath=Math/Filter 1D/Diff

\label{pi:diff}
\subsubsection{Description}

One dimensional differentation\dots

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 1D/Diff}.
This plugin can be called from a
remote-control script with the command \GxsmTT{action('diff\_PI')}.
The kernel-size is then set to '5+1'.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter1d/diff.C}
\index{PlugIn!diff}
\index{GXSM-Menu!Math/Filter 1D/Diff}
\subsubsection{Info for Plug-In: Math/Filter 1D/Diff }
\begin{tabbing}
Plug-In name:   \= Percy Zahl, Stefan Schroederdiff \= Email: \= x \kill
Plug-In name:   \> diff\>  File:  \> math/filter1d/diff.C\\
Author:	        \> Percy Zahl, Stefan Schroeder\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/filter1d/ft1d.C
% ------------------------------------------------------------

\section{Ft1d filter}
% Name=ft1d
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Filter 1D/Ft1d

\label{pi:ft1d}
\subsubsection{Description}

\label{PlugIn-F1D-Ft1d}
The ft1d filter: line by line FT.

\subsubsection{Usage}

Call \GxsmMenu{Math/Filter 1D/Ft1d}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

\index{C-PlugIn!math/filter1d/ft1d.C}
\index{PlugIn!ft1d}
\index{GXSM-Menu!Math/Filter 1D/Ft1d}
\subsubsection{Info for Plug-In: Math/Filter 1D/Ft1d }
\begin{tabbing}
Plug-In name:   \= Percy Zahlft1d \= Email: \= x \kill
Plug-In name:   \> ft1d\>  File:  \> math/filter1d/ft1d.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/misc
% ------------------------------------------------------------

\chapter{Plug-Ins: math/misc}

% Inclusion of PlugInClassIntro: ./plug-ins/math/misc/PlugInClass.doc


The \emph{math/misc} plugins are all types of math not fitting well
into all other sections here.

% PlugIn: ./plug-ins/math/misc/shape.C
% ------------------------------------------------------------

\section{Create a shape polygon from lines}
% Name=shape
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Misc/Shape

\label{pi:shape}
\subsubsection{Description}

A brief description goes here.

\subsubsection{Usage}

Call \GxsmMenu{Math/Misc/Shape}.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/misc/shape.C}
\index{PlugIn!shape}
\index{GXSM-Menu!Math/Misc/Shape}
\subsubsection{Info for Plug-In: Math/Misc/Shape }
\begin{tabbing}
Plug-In name:   \= Percy Zahlshape \= Email: \= x \kill
Plug-In name:   \> shape\>  File:  \> math/misc/shape.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/workfuncextract.C
% ------------------------------------------------------------

\section{Smoothing layers in 3D}
% Name=workfuncextract
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Misc/Workfuncextract

\label{pi:workfuncextract}
\subsubsection{Description}

This filter extracts from a series of images in energy
(layer-dimension) the workfunction assuming the image intensity
dropping all sudden by a given percentage from it's near zero energy
value. (LEEM Mirror-Mode to Regular imaging transition detection) and
puts teh resulting energy (layer corresponding value) into the
destination image.

\subsubsection{Usage}

Call \GxsmMenu{Math/Misc/Workfuncextract}\dots

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInKnownBugs
%

\GxsmNote{
}

%% OptPlugInHints
%

\index{C-PlugIn!math/misc/workfuncextract.C}
\index{PlugIn!workfuncextract}
\index{GXSM-Menu!Math/Misc/Workfuncextract}
\subsubsection{Info for Plug-In: Math/Misc/Workfuncextract }
\begin{tabbing}
Plug-In name:   \= Percy Zahlworkfuncextract \= Email: \= x \kill
Plug-In name:   \> workfuncextract\>  File:  \> math/misc/workfuncextract.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/psdadd.C
% ------------------------------------------------------------

\section{PSD add -- SARLS}
% Name=psdadd
% Author=Martin Langer, PZ
% Email=stefan\_fkp@users.sf.net
% Menupath=Math/Misc/PSD Add

\label{pi:psdadd}
\subsubsection{Description}

Experimental filter for adding PSD-slope-signals.

\subsubsection{Usage}

It is only available form \GxsmMenu{Math/Misc/PSD Add} if the
instrument type is set to SARLS or a reload of all PlugIns is forced.

\subsubsection{Sources}

The active and X channel is used as data sources.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else
%into a new created math channel.

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
I would appreciate if one of the current SARLS group members could
figure out more about this piece of code.
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/misc/psdadd.C}
\index{PlugIn!psdadd}
\index{GXSM-Menu!Math/Misc/PSD Add}
\subsubsection{Info for Plug-In: Math/Misc/PSD Add }
\begin{tabbing}
Plug-In name:   \= Martin Langer, PZpsdadd \= Email: \= x \kill
Plug-In name:   \> psdadd\>  File:  \> math/misc/psdadd.C\\
Author:	        \> Martin Langer, PZ\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/spectrocut.C
% ------------------------------------------------------------

\section{Cut spectra from 3D data}
% Name=spectrocut
% Author=Andreas Klust
% Email=klust@users.sf.net
% Menupath=Math/Misc/Spectrocut

\label{pi:spectrocut}
\subsubsection{Description}

\label{plugin:spectrocut}
This plug-in is made for choosing areas from a topograhic scan using the
\GxsmEmph{rectangle} object.  The spectra in the correspondent spectroscopic
data taken simultaneously with the topographic data are then cut out and
saved in a file.  Currently, only an index vector is saved in the GNU Octave
ASCII format for further analysis of the data.  Its filename is hard coded
("/tmp/spec.ivec").

\GxsmHint{
This plug-in is in a very alpha stage.
}

\subsubsection{Usage}

The topographic scan must be the active, the scan with the spectoscopic data
the X channel.  The plug-in is called via \GxsmMenu{Math/Misc/Spectrocut}.

%% OptPlugInKnownBugs
%No known.

\index{C-PlugIn!math/misc/spectrocut.C}
\index{PlugIn!spectrocut}
\index{GXSM-Menu!Math/Misc/Spectrocut}
\subsubsection{Info for Plug-In: Math/Misc/Spectrocut }
\begin{tabbing}
Plug-In name:   \= Andreas Klustspectrocut \= Email: \= x \kill
Plug-In name:   \> spectrocut\>  File:  \> math/misc/spectrocut.C\\
Author:	        \> Andreas Klust\>  Email: \> klust@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/layersmooth.C
% ------------------------------------------------------------

\section{Smoothing layers in 3D}
% Name=layersmooth
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Misc/Layersmooth

\label{pi:layersmooth}
\subsubsection{Description}

This filter applies a gausian smooth to all layers of a scan. It can
also smooth accross layers in 3D, using a smoothing radius in
layer-dimension.

\subsubsection{Usage}

Call \GxsmMenu{Math/Misc/Layersmooth}\dots

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInKnownBugs
%

\GxsmNote{
Not jet finished, the 3D smooth (accross layers) is not jet
implemented. Please set Radius in Layer Dim to zero!
}

%% OptPlugInHints
%

\index{C-PlugIn!math/misc/layersmooth.C}
\index{PlugIn!layersmooth}
\index{GXSM-Menu!Math/Misc/Layersmooth}
\subsubsection{Info for Plug-In: Math/Misc/Layersmooth }
\begin{tabbing}
Plug-In name:   \= Percy Zahllayersmooth \= Email: \= x \kill
Plug-In name:   \> layersmooth\>  File:  \> math/misc/layersmooth.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/minzlayer.C
% ------------------------------------------------------------

\section{Smoothing layers in 3D}
% Name=minzlayer
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Misc/Minzlayer

\label{pi:minzlayer}
\subsubsection{Description}

This filter extracts from a series of images in energy
(layer-dimension) the enegry (layer value lookup) fiding the MIN index/ image intensity at each pixel.
Resulting energy (layer corresponding value) is placed into the destination image.

\subsubsection{Usage}

Call \GxsmMenu{Math/Misc/Minzlayer}\dots

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInKnownBugs
%

\GxsmNote{
}

%% OptPlugInHints
%

\index{C-PlugIn!math/misc/minzlayer.C}
\index{PlugIn!minzlayer}
\index{GXSM-Menu!Math/Misc/Minzlayer}
\subsubsection{Info for Plug-In: Math/Misc/Minzlayer }
\begin{tabbing}
Plug-In name:   \= Percy Zahlminzlayer \= Email: \= x \kill
Plug-In name:   \> minzlayer\>  File:  \> math/misc/minzlayer.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/make_volume.C
% ------------------------------------------------------------

\section{Absolute value}
% Name=make\_volume
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Arithmetic/Absoluet Value

\label{pi:makevolume}
\subsubsection{Description}

Takes the absoluet value.

\subsubsection{Usage}

Call \GxsmMenu{Math/Arithmetic/Absolute Value}.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel. The result is of type \GxsmEmph{float}.

\index{C-PlugIn!math/misc/make\_volume.C}
\index{PlugIn!make\_volume}
\index{GXSM-Menu!Math/Arithmetic/Absoluet Value}
\subsubsection{Info for Plug-In: Math/Arithmetic/Absoluet Value }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmake\_volume \= Email: \= x \kill
Plug-In name:   \> make\_volume\>  File:  \> math/misc/make\_volume.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/misc/findlocmax.C
% ------------------------------------------------------------

\section{Find local maxima -- SARLS}
% Name=findlocmax
% Author=M. Langer?
% Email=stefan\_fkp@users.sf.net
% Menupath=Math/Misc/Find Loc Max

\label{pi:findlocmax}
\subsubsection{Description}

Finds local maximan in a scan. One (unknown to me, PZ) unknown guy
(M.Langer?) of the SARLS group in hannover wrote this PlugIn for
searching of local maxima. It looks somehow specialized to me.

\subsubsection{Usage}

It is only available from \GxsmMenu{Math/Misc/Find Loc Max} if the
instrument type is set to SARLS or a reload of all PlugIns is forced.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else
%into a new created math channel.

\subsubsection{Files}

Saves a list of local maxima in Ascii format (List of X Y Z) to a file.

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

\GxsmNote{
I would appreciate if one of the current SARLS group members could
figure out more about this piece of code.
}

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/misc/findlocmax.C}
\index{PlugIn!findlocmax}
\index{GXSM-Menu!Math/Misc/Find Loc Max}
\subsubsection{Info for Plug-In: Math/Misc/Find Loc Max }
\begin{tabbing}
Plug-In name:   \= M. Langer?findlocmax \= Email: \= x \kill
Plug-In name:   \> findlocmax\>  File:  \> math/misc/findlocmax.C\\
Author:	        \> M. Langer?\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/math/transform
% ------------------------------------------------------------

\chapter{Plug-Ins: math/transform}

% Inclusion of PlugInClassIntro: ./plug-ins/math/transform/PlugInClass.doc


The \emph{math/transformation} plugins are all type of math doing
geometric transformations with the image like rotation, scaling, etc.

% PlugIn: ./plug-ins/math/transform/shear_y.C
% ------------------------------------------------------------

\section{Shear along Y}
% Name=shear\_y
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformation/Shear Y

\label{pi:sheary}
\subsubsection{Description}

To shear a image along Y use this transformation.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformation/Shear Y} and fill in the shear
angle as prompted.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%

\index{C-PlugIn!math/transform/shear\_y.C}
\index{PlugIn!shear\_y}
\index{GXSM-Menu!Math/Transformation/Shear Y}
\subsubsection{Info for Plug-In: Math/Transformation/Shear Y }
\begin{tabbing}
Plug-In name:   \= Percy Zahlshear\_y \= Email: \= x \kill
Plug-In name:   \> shear\_y\>  File:  \> math/transform/shear\_y.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/autoalign.C
% ------------------------------------------------------------

\section{Auto Align Multi Dimensional Movie}
% Name=autoalign
% Author=Percy Zahl, P. Thev\'enaz, U.E. Ruttimann, M. Unser
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Auto Align

\label{pi:autoalign}
\subsubsection{Description}

The purpose of this method is to autoalign image series in multiple dimensions, i.e. to correct for image drift.
The GXSM autoalign Plug-In does automatic image alignment for translation,
scaled rotation, ridig body and affine transformation, of an image series
in time and layer domain (i.e. for drift correction).
The underlying algorithm of this code is based on the following paper,
implemented as GXSM-Plugin, ported from JAVA to C++, optimized and multithreaded by P. Zahl.

\subsubsection{Usage}

Activate the movie and run it.

%% OptPlugInSection: replace this by the section caption

%% OptPlugInSubSection: replace this line by the subsection caption

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
This work is based on the following paper:

P. Thev\'enaz, U.E. Ruttimann, M. Unser
A Pyramid Approach to Subpixel Registration Based on Intensity
IEEE Transactions on Image Processing
vol. 7, no. 1, pp. 27-41, January 1998.

This paper is available on-line at
http://bigwww.epfl.ch/publications/thevenaz9801.html

Other relevant on-line publications are available at
http://bigwww.epfl.ch/publications/

Additional help available at
http://bigwww.epfl.ch/thevenaz/turboreg/

You'll be free to use this software for research purposes, but
you should not redistribute it without our consent. In addition,
we expect you to include a citation or acknowledgment of both projects whenever
you present or publish results that are based on it.

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/autoalign.C}
\index{PlugIn!autoalign}
\index{GXSM-Menu!Math/Transformations/Auto Align}
\subsubsection{Info for Plug-In: Math/Transformations/Auto Align }
\begin{tabbing}
Plug-In name:   \= Percy Zahl, P. Thev\'enaz, U.E. Ruttimann, M. Unserautoalign \= Email: \= x \kill
Plug-In name:   \> autoalign\>  File:  \> math/transform/autoalign.C\\
Author:	        \> Percy Zahl, P. Thev\'enaz, U.E. Ruttimann, M. Unser\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/merge_h.C
% ------------------------------------------------------------

\section{Horizontal merge}
% Name=merge\_h
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Merge H

\label{pi:mergeh}
\subsubsection{Description}

Used to horizontal merge to scans together. The scan are expected to
have same height.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Merge H}.

\subsubsection{Sources}

The active and X channel are merged.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInNotes
%The scan are expected to have same height.

\index{C-PlugIn!math/transform/merge\_h.C}
\index{PlugIn!merge\_h}
\index{GXSM-Menu!Math/Transformations/Merge H}
\subsubsection{Info for Plug-In: Math/Transformations/Merge H }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmerge\_h \= Email: \= x \kill
Plug-In name:   \> merge\_h\>  File:  \> math/transform/merge\_h.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/mandriftfix.C
% ------------------------------------------------------------

\section{Auto Align}
% Name=mandriftfix
% Author=Percy Zahl
% Email=zahl@gxsm.sf.net
% Menupath=Math/Transformations/Auto Align

\label{pi:mandriftfix}
\subsubsection{Description}

Apply a simple drift in pixels per frame.

\subsubsection{Usage}

Figure out the drift inbetween frames in pixels in X and Y dimension to compensate for.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/mandriftfix.C}
\index{PlugIn!mandriftfix}
\index{GXSM-Menu!Math/Transformations/Auto Align}
\subsubsection{Info for Plug-In: Math/Transformations/Auto Align }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmandriftfix \= Email: \= x \kill
Plug-In name:   \> mandriftfix\>  File:  \> math/transform/mandriftfix.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@gxsm.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/rotate.C
% ------------------------------------------------------------

\section{Rotate a scan area}
% Name=rotate
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformation/Rotate

\label{pi:rotate}
\subsubsection{Description}

To rotate a selected area select a \GxsmEmph{Rectangle} of the area to
be rotated into. Think inverse, the result is the cropped area of the
source scan, which is rotated before around the center of the selected
area. If needed data points are outside, they are replaced by the
value found a the closed edge.

\subsubsection{Usage}

Place a rectangle object and call
\GxsmMenu{Math/Transformation/Rotate}. It prompts for the rotation
angle (clockwise) if not set to any other default than zero via the
PlugIn configurator.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A rectangle object is needed.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

\subsubsection{Configuration}

The PlugIn configurator allows to set a default angle. If this is non
zero the user is not prompted for a rotation angle!

\index{C-PlugIn!math/transform/rotate.C}
\index{PlugIn!rotate}
\index{GXSM-Menu!Math/Transformation/Rotate}
\subsubsection{Info for Plug-In: Math/Transformation/Rotate }
\begin{tabbing}
Plug-In name:   \= Percy Zahlrotate \= Email: \= x \kill
Plug-In name:   \> rotate\>  File:  \> math/transform/rotate.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/scalescan.C
% ------------------------------------------------------------

\section{Scale scan in X and Y}
% Name=scalescan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Scale Scan

\label{pi:scalescan}
\subsubsection{Description}

This filter scales the scan by given factors in X and Y. The resulting
pixel value is computated by using a 2d linear approximatione inbetween
neigbour points.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Scale Scan}

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

\index{C-PlugIn!math/transform/scalescan.C}
\index{PlugIn!scalescan}
\index{GXSM-Menu!Math/Transformations/Scale Scan}
\subsubsection{Info for Plug-In: Math/Transformations/Scale Scan }
\begin{tabbing}
Plug-In name:   \= Percy Zahlscalescan \= Email: \= x \kill
Plug-In name:   \> scalescan\>  File:  \> math/transform/scalescan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/shiftarea.C
% ------------------------------------------------------------

\section{Transformation Shift-Area}
% Name=shiftarea
% Author=Stefan Schr\"oder
% Email=stefan\_fkp@users.sf.net
% Menupath=Math/Transformation/Shift Area

\label{pi:shiftarea}
\subsubsection{Description}


This plugin shifts the lower part of a scan with respect to the upper
part, according to a chosen line.

\subsubsection{Usage}

Choose a line Object an connect the two points with your line, that shall
be brought together. The green point must be lower than the red one.

\subsubsection{Sources}

You need one active scan and a line object. Rectangle works two, the
diagonal will work like the line.

\subsubsection{Objects}

If a rectangle is selected the calculated information applies to the
content of the rectangle. Otherwise, the whole scan is analyzed.

\subsubsection{Destination}

A new scan will be created, which contains the unchanged upper part and the
shifted lower part, connected. 

%% OptPlugInConfig
%None.

%% OptPlugInKnownBugs
%None?

%% OptPlugInNotes
%None.
\index{C-PlugIn!math/transform/shiftarea.C}
\index{PlugIn!shiftarea}
\index{GXSM-Menu!Math/Transformation/Shift Area}
\subsubsection{Info for Plug-In: Math/Transformation/Shift Area }
\begin{tabbing}
Plug-In name:   \= Stefan Schr\"odershiftarea \= Email: \= x \kill
Plug-In name:   \> shiftarea\>  File:  \> math/transform/shiftarea.C\\
Author:	        \> Stefan Schr\"oder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/affine.C
% ------------------------------------------------------------

\section{Affine Transformation}
% Name=affine
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformation/Affine

\label{pi:affine}
\subsubsection{Description}

In case you want to undo a linear distorsion of an image (e.g. slow
and contineous drift/creep) this transformation helps. It applies a
affine transformation to the image, e.g. two arbitrary oriented
vectors (and the image) are transformed to be a orthogonal system
afterwards.

\subsubsection{Usage}

Use a \GxsmEmph{Ksys} to set the vectors. The relative lenght between
both is ignored, they are normalized before.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A Ksys object is used for setting the two vectors.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInKnownBugs
%

\GxsmNote{
If the image is rotated or flipped more than expected, try flipping the Ksys!
I know it's a bit tricky, good ideas to fix this are welcome!
}

%% OptPlugInHints
%

\index{C-PlugIn!math/transform/affine.C}
\index{PlugIn!affine}
\index{GXSM-Menu!Math/Transformation/Affine}
\subsubsection{Info for Plug-In: Math/Transformation/Affine }
\begin{tabbing}
Plug-In name:   \= Percy Zahlaffine \= Email: \= x \kill
Plug-In name:   \> affine\>  File:  \> math/transform/affine.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/quenchscan.C
% ------------------------------------------------------------

\section{Quench Scan}
% Name=quenchscan
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Quench Scan

\label{pi:quenchscan}
\subsubsection{Description}

This filter quenches the scan to half size, therefor 2x2 pixels are
averaged.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformation/Quench Scan}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

\index{C-PlugIn!math/transform/quenchscan.C}
\index{PlugIn!quenchscan}
\index{GXSM-Menu!Math/Transformations/Quench Scan}
\subsubsection{Info for Plug-In: Math/Transformations/Quench Scan }
\begin{tabbing}
Plug-In name:   \= Percy Zahlquenchscan \= Email: \= x \kill
Plug-In name:   \> quenchscan\>  File:  \> math/transform/quenchscan.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/autoalign_stack_reg.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/math/transform/mirror_y.C
% ------------------------------------------------------------

\section{Mirror Y}
% Name=mirror\_y
% Author=A. Klust, P. Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Mirror Y

\label{pi:mirrory}
\subsubsection{Description}

Mirror scan along Y.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Mirror Y}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

\index{C-PlugIn!math/transform/mirror\_y.C}
\index{PlugIn!mirror\_y}
\index{GXSM-Menu!Math/Transformations/Mirror Y}
\subsubsection{Info for Plug-In: Math/Transformations/Mirror Y }
\begin{tabbing}
Plug-In name:   \= A. Klust, P. Zahlmirror\_y \= Email: \= x \kill
Plug-In name:   \> mirror\_y\>  File:  \> math/transform/mirror\_y.C\\
Author:	        \> A. Klust, P. Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/merge_v.C
% ------------------------------------------------------------

\section{Vertical merge}
% Name=merge\_v
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Merge V

\label{pi:mergev}
\subsubsection{Description}

Used to vertically merge two scans together. The scan are expected to have same width.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Merge V}.

\subsubsection{Sources}

The active and X channel are merged.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else
into a new created math channel.

%% OptPlugInNotes
%The scan are expected to have same height.

\index{C-PlugIn!math/transform/merge\_v.C}
\index{PlugIn!merge\_v}
\index{GXSM-Menu!Math/Transformations/Merge V}
\subsubsection{Info for Plug-In: Math/Transformations/Merge V }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmerge\_v \= Email: \= x \kill
Plug-In name:   \> merge\_v\>  File:  \> math/transform/merge\_v.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/rotate90.C
% ------------------------------------------------------------

\section{90$^\circ$ clockwise rotation}
% Name=rotate90
% Author=Andreas Klust
% Email=klust@users.sf.net
% Menupath=math-transformations-sectionRotate 90deg

\label{pi:rotate90}
\subsubsection{Description}

This plug-in rotates the active scan clockwise by 90$^\circ$.

\subsubsection{Usage}



%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes The plug-in was mainly written to facilitate
background corrections such as line regression of scans with the scan
direction up-down instead of left-right.  Just rottate the scan and
apply the usual background correction functions.

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/rotate90.C}
\index{PlugIn!rotate90}
\index{GXSM-Menu!math-transformations-sectionRotate 90deg}
\subsubsection{Info for Plug-In: math-transformations-sectionRotate 90deg }
\begin{tabbing}
Plug-In name:   \= Andreas Klustrotate90 \= Email: \= x \kill
Plug-In name:   \> rotate90\>  File:  \> math/transform/rotate90.C\\
Author:	        \> Andreas Klust\>  Email: \> klust@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/flip_diagonal.C
% ------------------------------------------------------------

\section{Flip diagonal}
% Name=flip\_diagonal
% Author=A. Klust, P. Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Flip Diagonal

\label{pi:flipdiagonal}
\subsubsection{Description}

Flips an image along it's diagonale.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Flip Diagonal}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

\index{C-PlugIn!math/transform/flip\_diagonal.C}
\index{PlugIn!flip\_diagonal}
\index{GXSM-Menu!Math/Transformations/Flip Diagonal}
\subsubsection{Info for Plug-In: Math/Transformations/Flip Diagonal }
\begin{tabbing}
Plug-In name:   \= A. Klust, P. Zahlflip\_diagonal \= Email: \= x \kill
Plug-In name:   \> flip\_diagonal\>  File:  \> math/transform/flip\_diagonal.C\\
Author:	        \> A. Klust, P. Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/OctoCorr.C
% ------------------------------------------------------------

\section{SPA--LEED octopole distorsion correction}
% Name=OctoCorr
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformation/Octo Corr

\label{pi:OctoCorr}
\subsubsection{Description}

This is a experimental filter to reduce the SPA--LEED typical octopole
cuishion distorsion using a "ab-initio" like approch.  This plugin
applies the inverse of this distorsion to any image.

Input parameters are: Energy, Stepsize and Origin (invariant Point, if
not set the user is prompted for coordinates!).  A free parameter $b$
(distorsion strength, may be left at default value (-0.4)).

\subsubsection{Usage}

Place a point object and call \GxsmMenu{Math/Transformation/Octo
Corr}.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Objects}

A point object is needed to mark the center of distorsion symmetry
(invariant point).

\subsubsection{Destination}

The computation result is placed into an existing math channel, 
else into a new created math channel.

%% OptPlugInConfig
%

%% OptPlugInNotes
%

%% OptPlugInHints
%

\index{C-PlugIn!math/transform/OctoCorr.C}
\index{PlugIn!OctoCorr}
\index{GXSM-Menu!Math/Transformation/Octo Corr}
\subsubsection{Info for Plug-In: Math/Transformation/Octo Corr }
\begin{tabbing}
Plug-In name:   \= Percy ZahlOctoCorr \= Email: \= x \kill
Plug-In name:   \> OctoCorr\>  File:  \> math/transform/OctoCorr.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/unwrap.C
% ------------------------------------------------------------

\section{Unwraps Z data in given range}
% Name=unwrap
% Author=P. Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Unwrap

\label{pi:unwrap}
\subsubsection{Description}

Flips an image along it's diagonale.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Unwarp}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

\index{C-PlugIn!math/transform/unwrap.C}
\index{PlugIn!unwrap}
\index{GXSM-Menu!Math/Transformations/Unwrap}
\subsubsection{Info for Plug-In: Math/Transformations/Unwrap }
\begin{tabbing}
Plug-In name:   \= P. Zahlunwrap \= Email: \= x \kill
Plug-In name:   \> unwrap\>  File:  \> math/transform/unwrap.C\\
Author:	        \> P. Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/shear_x.C
% ------------------------------------------------------------

\section{Shear along X}
% Name=shear\_x
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformation/Shear X

\label{pi:shearx}
\subsubsection{Description}

To shear a image along X use this transformation.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformation/Shear X} and fill in the shear
angle as prompted.

\subsubsection{Sources}

The active channel is used as data source.

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%

\index{C-PlugIn!math/transform/shear\_x.C}
\index{PlugIn!shear\_x}
\index{GXSM-Menu!Math/Transformation/Shear X}
\subsubsection{Info for Plug-In: Math/Transformation/Shear X }
\begin{tabbing}
Plug-In name:   \= Percy Zahlshear\_x \= Email: \= x \kill
Plug-In name:   \> shear\_x\>  File:  \> math/transform/shear\_x.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/multi_dim_transpose.C
% ------------------------------------------------------------

\section{Multi Dimensional Transposition}
% Name=multi\_dim\_transpose
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=math-transformations-sectionMulti Dim Transpose

\label{pi:multidimtranspose}
\subsubsection{Description}

For now this tool swappes time and layer dimensions.

\subsubsection{Usage}

Activate a channel and run it.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/multi\_dim\_transpose.C}
\index{PlugIn!multi\_dim\_transpose}
\index{GXSM-Menu!math-transformations-sectionMulti Dim Transpose}
\subsubsection{Info for Plug-In: math-transformations-sectionMulti Dim Transpose }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmulti\_dim\_transpose \= Email: \= x \kill
Plug-In name:   \> multi\_dim\_transpose\>  File:  \> math/transform/multi\_dim\_transpose.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/mirror_x.C
% ------------------------------------------------------------

\section{Mirror X}
% Name=mirror\_x
% Author= A. Klust, P. Zahl
% Email=zahl@users.sf.net
% Menupath=Math/Transformations/Mirror X

\label{pi:mirrorx}
\subsubsection{Description}

Mirrors a image along X.

\subsubsection{Usage}

Call \GxsmMenu{Math/Transformations/Mirror X}.

\subsubsection{Sources}

The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

\subsubsection{Destination}

The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

\index{C-PlugIn!math/transform/mirror\_x.C}
\index{PlugIn!mirror\_x}
\index{GXSM-Menu!Math/Transformations/Mirror X}
\subsubsection{Info for Plug-In: Math/Transformations/Mirror X }
\begin{tabbing}
Plug-In name:   \=  A. Klust, P. Zahlmirror\_x \= Email: \= x \kill
Plug-In name:   \> mirror\_x\>  File:  \> math/transform/mirror\_x.C\\
Author:	        \>  A. Klust, P. Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/reverse_layers.C
% ------------------------------------------------------------

\section{Multi Dimensional Layer Reverse}
% Name=reverse\_layers
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=math-transformations-sectionReverse Layers

\label{pi:reverselayers}
\subsubsection{Description}

Reverse Layer Order.

\subsubsection{Usage}

Activate a channel and run it.

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/reverse\_layers.C}
\index{PlugIn!reverse\_layers}
\index{GXSM-Menu!math-transformations-sectionReverse Layers}
\subsubsection{Info for Plug-In: math-transformations-sectionReverse Layers }
\begin{tabbing}
Plug-In name:   \= Percy Zahlreverse\_layers \= Email: \= x \kill
Plug-In name:   \> reverse\_layers\>  File:  \> math/transform/reverse\_layers.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/autoalign_turbo_reg.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/math/transform/volume_transform.C
% ------------------------------------------------------------

\section{Volume Transform}
% Name=volume\_transform
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=math-transformations-sectionVolume Transform

\label{pi:volumetransform}
\subsubsection{Description}

Transform/Rotate a XY-Layer set/volume along any given axis laying in XY plane by theta. A new data set with same layer number (or any given) is computed my linear (1st order) interpolation of data.

\subsubsection{Usage}

Activate a channel and run it. Needs volumetric data, i.e. a set of images in layer dimension

%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section
%...

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection
%...

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
%The active channel is used as data source.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/volume\_transform.C}
\index{PlugIn!volume\_transform}
\index{GXSM-Menu!math-transformations-sectionVolume Transform}
\subsubsection{Info for Plug-In: math-transformations-sectionVolume Transform }
\begin{tabbing}
Plug-In name:   \= Percy Zahlvolume\_transform \= Email: \= x \kill
Plug-In name:   \> volume\_transform\>  File:  \> math/transform/volume\_transform.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/math/transform/movieconcat.C
% ------------------------------------------------------------

\section{Movie Concat}
% Name=movieconcat
% Author=Percy Zahl
% Email=zahl@users.sourceforge.net
% Menupath=math-transformations-sectionMovie Concat

\label{pi:movieconcat}
\subsubsection{Description}

Movie Concat allows to concatenate two movie data set in time with a
choosen range in time and in layers of both sources. The number of
layers choosen for each must match.

\subsubsection{Usage}


%% OptPlugInSection: replace this by the section caption
%all following lines until next tag are going into this section

%% OptPlugInSubSection: replace this line by the subsection caption
%all following lines until next tag are going into this subsection

%% you can repeat OptPlugIn(Sub)Sections multiple times!

%% OptPlugInSources
The active and X marked channels are used as data sources.

%% OptPlugInObjects
%A optional rectangle is used for data extraction...

%% OptPlugInDest
%The computation result is placed into an existing math channel, else into a new created math channel.

%% OptPlugInConfig
%describe the configuration options of your plug in here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

%% OptPlugInKnownBugs
%Are there known bugs? List! How to work around if not fixed?

%% OptPlugInNotes
%If you have any additional notes

%% OptPlugInHints
%Any tips and tricks?

\index{C-PlugIn!math/transform/movieconcat.C}
\index{PlugIn!movieconcat}
\index{GXSM-Menu!math-transformations-sectionMovie Concat}
\subsubsection{Info for Plug-In: math-transformations-sectionMovie Concat }
\begin{tabbing}
Plug-In name:   \= Percy Zahlmovieconcat \= Email: \= x \kill
Plug-In name:   \> movieconcat\>  File:  \> math/transform/movieconcat.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sourceforge.net\\
\end{tabbing}



% Subdirectory: ./plug-ins/control
% ------------------------------------------------------------

\chapter{Plug-Ins: control}

% Inclusion of PlugInClassIntro: ./plug-ins/control/PlugInClass.doc


The \emph{control} plugins are those used to control the instrument
and perform special data acqusitations tasks such as DSP control,
mover/slider contol, probing (spectroscopy) and things like that.

% PlugIn: ./plug-ins/control/DSPControl.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/app_probe.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/nano_manipulator.C
% ------------------------------------------------------------

\section{Nano Manipulator (to be ported)}
% Name=nano\_manipulator
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=windows-sectionNano Manipulator

\label{pi:nanomanipulator}
\subsubsection{Description}

This is a tool to use your tip for nano manipulating.

It will connect to the DSP/SPM and provide a realtime force feedback
(using a modern Force Feedback Joystick Control Device) while
moving/pushing things around\dots

\subsubsection{Usage}


\subsubsection{Objects}

Shows a trace and current tip position\dots

%% OptPlugInDest

%% OptPlugInConfig
%

%% OptPlugInFiles

%% OptPlugInKnownBugs

\GxsmNote{
This PlugIn is work in progress.
}

%% OptPlugInHints

\subsubsection{Disclaimer}

This tool may ruin your tip and sample if impropper used!

\index{C-PlugIn!control/nano\_manipulator.C}
\index{PlugIn!nano\_manipulator}
\index{GXSM-Menu!windows-sectionNano Manipulator}
\subsubsection{Info for Plug-In: windows-sectionNano Manipulator }
\begin{tabbing}
Plug-In name:   \= Percy Zahlnano\_manipulator \= Email: \= x \kill
Plug-In name:   \> nano\_manipulator\>  File:  \> control/nano\_manipulator.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/control/spm_scancontrol.C
% ------------------------------------------------------------

\section{SPM Scan Control}
% Name=spm\_scancontrol
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=windows-sectionSPM Scan Control

\label{pi:spmscancontrol}
\subsubsection{Description}

Provides a SPM Scan Control Window and connects to the \Gxsm\ toolbar
buttons \GxsmEmph{Scan, Movie, Stop} for quick access. The control
panel offers in addition to \GxsmEmph{Scan, Movie, Stop} a
\GxsmEmph{Pause} and \GxsmEmph{HS Capture} button. Use the
\GxsmEmph{Pause} button to pause the scanning process and press it
again for continuation.  (PCI32 only)

The \GxsmEmph{HS Capture} button starts a continuous (movie) high
speed (HS) frame capturing process on the DSP, a refresh is done after
the whole scan data is received from the DSP. The scan size is limited
by the available memory (SRAM) on the DSP platform. The \GxsmEmph{HS
Capture} mode assures precise real time inter line timing on DSP level
and allows maximum frame rates due to minimized communication between
Gxsm and the DSP. (applies to PCI32 only)

Using this panel it is now possible to set the scan Y direction from
\GxsmEmph{TopDown} (default, from Top to Bottom) to
\GxsmEmph{TopDownBotUp} (alternating from Top to Bottom and vice
versa) or \GxsmEmph{BotUp} (Botton to Top).

If the \GxsmEmph{Repeat} option is checked, scanning will repeat until released
(at scan end) or stop is pressed to cancel scanning at any time.
Files are automatically saved if the  \GxsmEmph{AutoSave} check-button in the main window is checked.

Using the \GxsmEmph{Movie} mode, no single frames are saved while
scanning, but the whole movie is appended into the time-dimension of
the scan (this need sufficient amount of memory, as \Gxsm keeps
all data in memory.). Use the Movie-Control/Player window to play
it. If stopped, the last frame will be incomplete, you can truncate it using the
\GxsmMenu{Edit/Copy} tool and copy all but the last
frame. Multidimensional data is saved into the NetCDF file.

This Gxsm PlugIn module actually provides not only the the scanning
controls, it does the whole job of high-level data acquisitation/sorting itself.

\subsubsection{Usage}

Used for advanced SPM data acquisitation control, open the control
panel via \GxsmMenu{windows-sectionSPM Scan Control}.  

\GxsmNote{The \GxsmEmph{HS Capture} scan mode is always in
\GxsmEmph{TopDown} mode and no \GxsmEmph{Pause} will be accepted, use
\GxsmEmph{Stop}. This feature is implemented for the PCI32 only (old) 
and is obsolete for all newer HWIs using direct data streaming (FIFO).}

\GxsmScreenShot{SPMScanControl}{The SPM Scan Control window.}

\subsubsection{References}

%The internal used fast fourier transform is based on the FFTW library:\\
%\GxsmWebLink{www.fftw.org}\\
%Especially here:\\
%\GxsmWebLink{www.fftw.org/doc/fftw\_2.html\#SEC5}\\
About pthreads hacking, this is object of future use:\\
\GxsmWebLink{java.icmc.sc.usp.br/library/books/ibm\_pthreads/}

\GxsmNote{
In \GxsmEmph{TopDownBotUp} mode always the last scan direction is
remembered (even if the scan was stopped in between) and the opposide
scan direction is used at next \GxsmEmph{Scan Start}.
}

\GxsmHint{
You can switch the scan direction mode while running a movie or single
scan, it will be used as soon as the next scan is started!
\GxsmNote{Hacker notes: This plugin is responsible for the high level scanning
process, background/idle display refresh. It does the initial scan creation and
setup of all data types due to the configuration as provided by the user via preferences.
This setup need to match the current hardware configuration.}
}

\index{C-PlugIn!control/spm\_scancontrol.C}
\index{PlugIn!spm\_scancontrol}
\index{GXSM-Menu!windows-sectionSPM Scan Control}
\subsubsection{Info for Plug-In: windows-sectionSPM Scan Control }
\begin{tabbing}
Plug-In name:   \= Percy Zahlspm\_scancontrol \= Email: \= x \kill
Plug-In name:   \> spm\_scancontrol\>  File:  \> control/spm\_scancontrol.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/control/DriftComp.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/app_databox.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/NanoPlott.C
% ------------------------------------------------------------

\section{Nano HPLG plotter}
% Name=NanoPlott
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=windows-sectionNano Plotter

\label{pi:NanoPlott}
\subsubsection{Description}

 This is a tool to use your tip for writing or manipulating by moving
 the tip (i.e. the scan-piezo) along an arbitrary programmable
 path. There are two DSP-parameter sets for bias, feedback and scan
 settings which can be used for to assign two ''writing'' modes called
 PU (pen up) and PD (pen down). The path is read from a plotter-file in
 a very simple HPGL-plotter language style. This file can be
 created by hand (editor) or from line or polyline object(s) drawn in a
 scan.

 \GxsmScreenShot{NanoPlott}{The Nano-Plott window.}

\subsubsection{Usage}

 Set desired parameters for Pen Up and Pen Down, put in the path/file
 to your plottfile (.plt) and press start\dots You can translate and
 scale you plot data using the parameters Offset and Scale. Make sure
 the plot file name is correct in can be found from current working
 directory or use an absolute path.

\subsubsection{Objects}

 Poly line objects are used for display only -- not for input of path!

\subsubsection{Destination}

 The plotted path is shown on the active scan using poly line objects.

%% OptPlugInConfig
%

\subsubsection{Files}

 Create a simple HPGL plott file for input. You can do this with Gxsm
 itself: place a bunch of PolyLine objects and use \GxsmPopup{Grey
 2D}{File/Save Objects} to create a HPGL file, enter therefore a file
 with a \filename{.plt} extension! Use this as input for the
 NanoPlotter.

\subsubsection{Known Bugs}

 Not 100\% tested, beta state.

\GxsmNote{
}

\GxsmHint{
\ \\
PU 0.0,0.0;\\
PD 0.0,5000.0;\\
}

\subsubsection{Disclaimer}

 This tool may ruin your tip and sample, so take care!

\index{C-PlugIn!control/NanoPlott.C}
\index{PlugIn!NanoPlott}
\index{GXSM-Menu!windows-sectionNano Plotter}
\subsubsection{Info for Plug-In: windows-sectionNano Plotter }
\begin{tabbing}
Plug-In name:   \= Percy ZahlNanoPlott \= Email: \= x \kill
Plug-In name:   \> NanoPlott\>  File:  \> control/NanoPlott.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/control/rhk_scancontrol.C
% ------------------------------------------------------------

\section{RHK Scan Control (to be ported)}
% Name=rhk\_scancontrol
% Author=Farid El Gabaly, Juan de la Figuera
% Email=farid.elgabaly@uam.es, juan.delafiguera@uam.es
% Menupath=windows-sectionRHK Scan Control

\label{pi:rhkscancontrol}
\subsubsection{Description}

 
 
 Provides a Scan Control Window for the RHK STM
 100 electronics. It connects to the \Gxsm\ toolbar buttons
 \GxsmEmph{Scan, Movie, Stop} for quick access. The control panel
 offers in addition to \GxsmEmph{Scan, Movie, Stop} a \GxsmEmph{Pause}
 and \GxsmEmph{HS Capture} button. Use the \GxsmEmph{Pause} button to
 pause the scanning process and press it again for continuation.
 
 The RHK electronics is used through a stand-alone program (rhk\_controller)
 that has to be started before Gxsm. Use the computer and port in which that
 program is running as the Hardware/Device setting (localhost:5027 is the
 default).
 
 The \GxsmEmph{HS Capture} button starts a continous (movie) high
 speed (HS) frame capturing process, were a refresh is done after the
 whole scan data is received from the STM100 electronics. The scan
 size is limited by the available driver memory (currently 2Mb) on the
 rhk\_controller program. The \GxsmEmph{HS Capture} mode assures
 precise real time inter line timing and allows maximum frame rates
 due to minimized communication between Gxsm and the rhk\_controller
 program.

 This plugin is also the main RHK control panel. The RHK interface is slightly
 different from the rest of the SPM hardware supported by Gxsm. The
 difference is due to the fact that the scan generator is inside the
 RHK STM-100, so it is not under the control of Gxsm. The offset and
 scan size can only be read, as are the sample bias and the tunneling
 current. For now they are only updated when the "update" button is
 pressed, and before adquiring an image (the image size is also read from the
 RHK so this is a must).  An additional option is the automatic update of the
 parameters (every second or so), which can be turned on or off by a
 button.

 This RHK Gxsm PlugIn module actually provides not only the the
 scanning controls, it does the whole job of data adquisitation
 itself, and is a substitute for the standard Scan Control plugin.

 On the left side of the panel, there is a pixmap that shows the
 current scan area size and offset relative to the total range available.

\index{C-PlugIn!control/rhk\_scancontrol.C}
\index{PlugIn!rhk\_scancontrol}
\index{GXSM-Menu!windows-sectionRHK Scan Control}
\subsubsection{Info for Plug-In: windows-sectionRHK Scan Control }
\begin{tabbing}
Plug-In name:   \= Farid El Gabaly, Juan de la Figuerarhk\_scancontrol \= Email: \= x \kill
Plug-In name:   \> rhk\_scancontrol\>  File:  \> control/rhk\_scancontrol.C\\
Author:	        \> Farid El Gabaly, Juan de la Figuera\>  Email: \> farid.elgabaly@uam.es, juan.delafiguera@uam.es\\
\end{tabbing}

% PlugIn: ./plug-ins/control/peakfind_scan.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/app_peakfind.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/multidim_movie_control.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/inet_json_external_scandata.C
% ------------------------------------------------------------

\section{Inet JSON Scan Data Control}
% Name=inet\_json\_external\_scandata
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=windows-section Inet JSON Scan External Data
RP data streaming

\label{pi:inetjsonexternalscandata}
\subsubsection{Description}


\subsubsection{Usage}


\subsubsection{References}


\GxsmNote{
}

\GxsmHint{
}

\index{C-PlugIn!control/inet\_json\_external\_scandata.C}
\index{PlugIn!inet\_json\_external\_scandata}
\index{GXSM-Menu!windows-section Inet JSON Scan External Data}
\subsubsection{Info for Plug-In: windows-section Inet JSON Scan External Data }
\begin{tabbing}
Plug-In name:   \= Percy Zahlinet\_json\_external\_scandata \= Email: \= x \kill
Plug-In name:   \> inet\_json\_external\_scandata\>  File:  \> control/inet\_json\_external\_scandata.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/control/probe_scan.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/DSPMover.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/SpaLeedControl.C
% ------------------------------------------------------------

\section{SPA--LEED simulator control}
% Name=SpaLeedControl
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=windows-sectionSPA-LEED Ctrl

\label{pi:SpaLeedControl}
\subsubsection{Description}

A frontend for SPA--LEED and E-gun parameter control, currently used
to configure the SPA--LEED simulator kernel module. But it has the
potential for remote controling a future SPA--LEED unit :-)

\subsubsection{Usage}

Open \GxsmMenu{windows-sectionSPA-LEED Ctrl} and play.
\GxsmScreenShot{SPALEED-Control}{The SPA--LEED Control window.}

Not intuitive?

%% OptPlugInConfig

\GxsmNote{
The SPA--LEED simulator kernel module is here:\\
\GxsmFile{Gxsm/plug-ins/hard/modules/dspspaemu.o}
}

%% OptPlugInHints

\index{C-PlugIn!control/SpaLeedControl.C}
\index{PlugIn!SpaLeedControl}
\index{GXSM-Menu!windows-sectionSPA-LEED Ctrl}
\subsubsection{Info for Plug-In: windows-sectionSPA-LEED Ctrl }
\begin{tabbing}
Plug-In name:   \= Percy ZahlSpaLeedControl \= Email: \= x \kill
Plug-In name:   \> SpaLeedControl\>  File:  \> control/SpaLeedControl.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/control/DSPPeakFind.C
% ------------------------------------------------------------

\section{SPA--LEED peak finder and monitor (OBSOLETE)}
% Name=DSPPeakFind
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=windows-sectionDSP PeakFind

\label{pi:DSPPeakFind}
\subsubsection{Description}

 For SPA--LEED users Gxsm offers a peak intensity monitor and peak
 finder to follow a shifting peak. It is designed for both: Focus
 adjustment and peak intensity monitoring. It can handle a unlimited
 number of peaks simultaneous.


\subsubsection{Usage}

 Open \GxsmMenu{windows-sectionDSP PeakFind}.

\subsubsection{Configuration}

 Lots of controls\dots Since I do not know about other SPA--LEED users I'll
 not spend more time here!

%% OptPlugInFiles
%Does it uses, needs, creates any files? Put info here!

%% OptPlugInRefs
%Any references?

\subsubsection{Known Bugs}

 The long term peak intensity monitor is unstable and beta. I need more
 feedback from SPA--LEED users\dots

\GxsmNote{
}

\GxsmHint{
}

\index{C-PlugIn!control/DSPPeakFind.C}
\index{PlugIn!DSPPeakFind}
\index{GXSM-Menu!windows-sectionDSP PeakFind}
\subsubsection{Info for Plug-In: windows-sectionDSP PeakFind }
\begin{tabbing}
Plug-In name:   \= Percy ZahlDSPPeakFind \= Email: \= x \kill
Plug-In name:   \> DSPPeakFind\>  File:  \> control/DSPPeakFind.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/control/CCDControl.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/DSPProbe.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/control/app_focus.C
% ------------------------------------------------------------



% Subdirectory: ./plug-ins/hard
% ------------------------------------------------------------

\chapter{Plug-Ins: hard}

% Inclusion of PlugInClassIntro: ./plug-ins/hard/PlugInClass.doc


\label{sec:HwI-PlugIns}
Here are the GXSM-2 \emph{hard}, i.e. Hardware Interface (HwI), type
plugins. These are a special subset of GXSM plugins and only one or
none is selected on GXSM startup. HwI plugins are very similar to
standart GXSM plugins from design point of view, except of a special
and independent load strategy. A HwI plugin provides a
\GxsmSymbol{category} (same as used in standart type plugins for
automatic plugin selection), this is used here to match the
\GxsmPref{Hardware}{Card}.

The hardware interface itself is created by providing one (or more)
specialized derivation(s) of the GXSM core base class
\GxsmSymbol{XSM\_Hardware}, which defines a default set of (virtual)
generalized SPM-control functions to be overloaded later.  A pointer
to one instance of this new class has to be returned by the HwI
plugins \GxsmSymbol{get\_gxsm\_hwi\_hardware\_class(void *data)}
function which is resolved by the GXSM core HwI plugin handler. And
called to register the hardware for later use.

The current GXSM main stream and best supported hardware is the
SignalRanger DSP board, see \ref{pi:srangerhwi}.

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi_vectorgen.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi_eventhandling.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi_control.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/innovative_dsp_hwi_spa.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/spm_simulator_hwi.C
% ------------------------------------------------------------

\section{SPM SIM and Template Hardware Interface}
% Name=spm\_simulator\_hwi
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/SPM SIM Control

\label{pi:spmsimulatorhwi}
\subsubsection{Description}

\index{SPM SIM HwI / Template Code}

%% OptPlugInSources

%% OptPlugInDest

% OptPlugInNote

\index{C-PlugIn!hard/spm\_simulator\_hwi.C}
\index{PlugIn!spm\_simulator\_hwi}
\index{GXSM-Menu!Tools/SPM SIM Control}
\subsubsection{Info for Plug-In: Tools/SPM SIM Control }
\begin{tabbing}
Plug-In name:   \= Percy Zahlspm\_simulator\_hwi \= Email: \= x \kill
Plug-In name:   \> spm\_simulator\_hwi\>  File:  \> hard/spm\_simulator\_hwi.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/LAN_rhk_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/LAN_rhk_hwi.C
% ------------------------------------------------------------

\section{Local Area Network (Internet) RHK Controller Hardware Interface (to be ported)}
% Name=LAN\_rhk\_hwi
% Author=Farid El Gabaly, Juan de la Figuera
% Email=johnnybegood@users.sourceforge.net
% Menupath=Hardware/LAN\_RHK:SPM-HwI

\label{pi:LANrhkhwi}
\subsubsection{Description}

This plugin/class provides a interface for SPM adquisition through a
Local Area Network using sockets. In particular, this plugin provides 
the necessary interface to interact with the standalone \GxsmFile{rhk\_controller} program and
thus use an \GxsmEmph{RHK STM-100} (the old stand-alone models before 
rev 7, not the new DSP based systems) with Gxsm.

It can be used as the foundation of a general SPM-through-the-internet plugin.

With this one, you can:
\begin{itemize}
\item read the settings of the RHK electronics (image size, offset, 
tunneling conditions, pixels in image)
\item adquire images with the proper settings (either topographic, current 
or any other channel).
\item change from XY to YX scanning
\end{itemize}

The current limitations are:
\begin{itemize}
\item Only forward image (it is not difficult to implement saving the backward
image)
\item Only a single channel can be adquiered. Again it is not too complex to change this.
\item No spectroscopy. Actually we have the code for doing IV curves, but we do not expect
we will implement it in the \GxsmFile{rhk\_controller} program anytime soon.
\end{itemize}

The ugliest code is due to Gxsm assuming that all settings (bias, scan size, etc) are set by Gxsm, not 
by the electronics itself (as is the case for the RHK electronics, which has its own 
scanning hardware). We have hacked the PutParameter call to also receive the data, and
this is why a non standard scanning plugin is needed (rhk\_scancontrol).

The \GxsmFile{rhk\_controller} program (available from the Gsxm CVS, module RHK\_controller) 
handles all the low
level details of data aquisition with an \GxsmEmph{RHK STM-100} \GxsmWWW{www.rhk-tech.com} 
with a simple DAQ card \GxsmEmph{I/O Tech Daqboard 2000}
\GxsmWWW{www.IOtech.com}. A couple of cable adapters are needed to connect
the electronics and the adquisition card: one was the \GxsmEmph{I/O
Tech DBK202}, to separate the analogic and digital inputs and outputs
of the andquisition card; the other was a home made one to adapt the
DBK202 to the RHK unit (if anyone needs the pcb drawing, please contact Farid).
The \GxsmFile{rhk\_controller} is run with simple ASCII commands to read the RHK 
settings, and select the adquisition channel, adquiere images and so on.
Look at the program itself for more information (it is a fairly simple
C program which uses lex/yacc to parse the commands), or connect to it with 
telnet localhost 5027 and type "help".
We use a Omicron Coarse approach controller which is interfaced by TTL with 
the DAQ card. The DSPMover plugin works with it.

To manage the \GxsmEmph{I/O Tech Daqboard 2000} under linux we use the
I/O tech linux driver. The Daqboard2000.tgz file from IOTech has:

\begin{itemize}
 \item the module with the device driver, \GxsmFile{db2k}
 \item the lib to acces the device driver from a user site, \GxsmFile{libdaqx}
 \item some examples
\end{itemize}

The version used for the \GxsmEmph{I/O Tech Daqboard 2000} driver is 0.1 and
is GPL licenced. This library is not thread-safe and calls way too many
''printk'' to print debug messages. A big
problem is that it tries to reserve the buffer memory before each adquisition.
We have a patch (in the src RHK\_controller) which eliminates the printk and
reserves the memory buffer only at installation (2Mb).

\subsubsection{Usage}

Set the \GxsmPref{Hardware}{Card} to ''LAN\_RHK:SPM'', and the 
\GxsmPref{Device}{Hardware} to
''localhost:5027' if you are running \GxsmFile{rhk\_controller} in the same computer. 
Start the \GxsmFile{rhk\_controller} \GxsmEmph{before} the Gxsm program. The output of the
\GxsmFile{rhk\_controller} program should say ''someone connected'' when starting Gxsm.

%% OptPlugInSources

%% OptPlugInDest

% OptPlugInNote

You can see some data taken with it in \GxsmWebLink{hobbes.fmc.uam.es/loma}.

\index{C-PlugIn!hard/LAN\_rhk\_hwi.C}
\index{PlugIn!LAN\_rhk\_hwi}
\index{GXSM-Menu!Hardware/LAN\_RHK:SPM-HwI}
\subsubsection{Info for Plug-In: Hardware/LAN\_RHK:SPM-HwI }
\begin{tabbing}
Plug-In name:   \= Farid El Gabaly, Juan de la FigueraLAN\_rhk\_hwi \= Email: \= x \kill
Plug-In name:   \> LAN\_rhk\_hwi\>  File:  \> hard/LAN\_rhk\_hwi.C\\
Author:	        \> Farid El Gabaly, Juan de la Figuera\>  Email: \> johnnybegood@users.sourceforge.net\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/innovative_dsp_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/LAN_rhk_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/tc211_ccd.C
% ------------------------------------------------------------

\section{TC211 CCD Interface}
% Name=tc211\_ccd
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Hardware/TC211-CCD-HwI

\label{pi:tc211ccd}
\subsubsection{Description}

This is an experimental hardware interface plugin.  Grabbing video
data from a parport attached TC211 CCD camera based on the design
presented in the ''c't magazine f\"ur computer technik'', Januar 1992,
p.162ff.

\subsubsection{Usage}

Configure the \GxsmPref{Hardware}{Card} to ''TC211-CCD''. Load
the ''ccd.o'' kernel module before starting the GXSM, setup /dev/ccd
correct. Check the module source code for correct LPT port.

\subsubsection{Sources}


\subsubsection{Destination}

Usual scan destination channel.

% OptPlugInNote
Used for my very old experimental Astro CCD camera. The special kernel
module ''ccd'' is used for data transfer.

\index{C-PlugIn!hard/tc211\_ccd.C}
\index{PlugIn!tc211\_ccd}
\index{GXSM-Menu!Hardware/TC211-CCD-HwI}
\subsubsection{Info for Plug-In: Hardware/TC211-CCD-HwI }
\begin{tabbing}
Plug-In name:   \= Percy Zahltc211\_ccd \= Email: \= x \kill
Plug-In name:   \> tc211\_ccd\>  File:  \> hard/tc211\_ccd.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/demo_hwi_control.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk3_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/kmdsp_hwi.C
% ------------------------------------------------------------

\section{Interface to the spm2 scan device}
% Name=kmdsp\_hwi
% Author=Marcello Carla'
% Email=carla@fi.infn.it
% Menupath=Tools/SR-DSP Control

\label{pi:kmdsphwi}
\subsubsection{Description}


The spm2 package provides the control of a Scanning Probe Microscope
through one or two common use DAQ boards (http://spm.polosci.unifi.it)
and a software simulated DSP. This module supports the use of the spm2
package from within the GXSM program.

\index{C-PlugIn!hard/kmdsp\_hwi.C}
\index{PlugIn!kmdsp\_hwi}
\index{GXSM-Menu!Tools/SR-DSP Control}
\subsubsection{Info for Plug-In: Tools/SR-DSP Control }
\begin{tabbing}
Plug-In name:   \= Marcello Carla'kmdsp\_hwi \= Email: \= x \kill
Plug-In name:   \> kmdsp\_hwi\>  File:  \> hard/kmdsp\_hwi.C\\
Author:	        \> Marcello Carla'\>  Email: \> carla@fi.infn.it\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/comedi_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi_mover.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/comedi_hwi.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi_vectorgen.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi_eventhandling.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi.C
% ------------------------------------------------------------

\section{Signal Ranger Hardware Interface}
% Name=sranger\_hwi
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/SR-DSP Control

\label{pi:srangerhwi}
\subsubsection{Description}

This provides the Signal Ranger-STD and -SP2 hardware interface (HwI)
for GXSM.  It contains all hardware close and specific settings and
controls for feedback, scanning, all kind of probing (spectroscopy and
manipulations) and coarse motion control including the auto approach
controller. Invisible for the user it interacts with the SRanger DSP,
manages all DSP parameters and data streaming for scan and probe.



%The \GxsmEntry{SR DSP Control} Dialog is divided into several sections:
%1) Feedback & Scan: This folder contains all necessary options regarding feedback and scan.
%2) Trigger: For Multi-Volt and Current imaging
%3) Advanced: Different settings for advanced features of the Signal Ranger.
%4) STS: Parameter for dI/dV spectroscopy can be defined here.
%5) FZ: In this section information about force - distance curves can be set.
%6) LM: For manipulation of x, y, or z use this dialog.
%7) Lock-In: This slice contains the parameter set for the build in Lock-In.
%8) AX: Auxiliary
%9) Graphs: Choose sources and decide how to plot them.


\subsection{SR-DSP Feedback and Scan Control}

The Feedback \& Scan folder contains all necessary options regarding
feedback and scan.  Here the feedback parameters and tunneling/force
settings are adjusted. The second purpose of this control panel is the adjustment of
all scan parameters of the digital vector scan generator like speed.

\GxsmScreenShot{SR-DSP-Control-FB}{GXSM SR DSP Control window: Feedback and Scan Control page}
\GxsmScreenShot{SR-DSP-Control-Advanced}{GXSM SR DSP Control window: Advanced settings page}

\begin{description}

\item[Bias] Voltage that is applied to OUT6. Beware: The entered value
will be divided by the \GxsmPref{InstSPM}{BiasGain} value. Without an
additional amplification the \GxsmEntry{Instrument/BiasGain} value has
to be set to 1.

\item[Current(STM) / SetPoint(AFM)] Set point the DSP is trying to
reach. For a correct conversion of Current / SetPoint to incoming
voltages at IN5 the values of \GxsmPref{InstSPM}{nAmpere2Volt} and
\GxsmPref{InstSPM}{nNewton2Volt} have to be set correctly.

\item[CP, CI] Parameters for the feedback loop. CP is proportional to
the difference between the set point and the current value at IN5. CI
integrates this difference. Higher values for CP / CI mean a faster
loop.

\item[MoveSpd, ScanSpd] MoveSpd is valid for movements without taking
data (e.g. change xy-offset or moving to the starting point of an area
scan). ScanSpd is valid if the DSP is taking data.  PiezoDriveSetting:
Usually a high voltage amplifier has different gains. A change of the
gain can easily be mentioned in GXSM by activating the appropriate
factor. A change of this values acts instantly. The available gain
values can be defined in the \GxsmPref{InstSPM}{Analog/V1-V9}. After
changing the preferences GXSM needs to be restarted to take
effect. Remark: Piezo constants and other parameters have to be
charged. Please use the \GxsmPref{InstSPM}{Instrument/PiezoAV} for
this odd values.  
\end{description}

\GxsmHint{Good conservative start values for the feedback loop gains
CP and CI are 0.01 for both. Typically they can be increased up to
0.1, depending on the the system, tip and sample. In general CP can be
about 150\% of CI to gain more stability with same CI. }


\subsection{Trigger -- Multi-Volt and -Current Control}


It is possible to trigger automatic changes of Bias or
Current-Setpoint while scanning at up to four given X indices each, for
Bias and Current for forward and backward scan direction.

If the index given is reached, the DSP will trigger a bias or
current-setpoint change. The bias is never changed instantly, but is
ramped with an fixed speed of (54 V/s @ 10V max. Bias) from that
position to the new value. The index is actually down-counted to zero
for each scan line, thus index 0 means the last point of every scan
line.

The first line sets up the trigger points for X-forward (Xm) and
X-backward (Xp) for bias changes: Index-Xp, new Bias, Index-Xm, new
Bias.  The second to fourth line does the same in an equivalent
way. The next frame sets up the similar task for changes of the current
setpoint. Any Index never reached will just never trigger, thus an
index of -1 will disable it.

To enable or updated the trigger data table, toggle/enable the Trigger
Enable check-box. At startup, GXSM will always read the current DSP
persistent trigger table and trigger-enable state.

While the trigger is enabled, the Bias and Current settings are
locked. Any attempts to change it (i.e. the slider) will temporary
enforce your setting until the next trigger hits.

You can turn the Trigger feature on or off at any time.

\GxsmScreenShot{SR-DSP-Control-Trigger}{Trigger Control window}

\subsection{Advanced Feedback and Probe Control}


Advanced is a collection of different settings, to handle the advanced
capabilities of the Signal Ranger DSP. It is quite a mixture of
different tools.

\begin{description}
\item[FB Switch] This option enables or disables the feedback
loop. Disabling will keep the current Z-position.  

\item[Automatic Raster Probe] In general spectra can easily be taken
while doing an area scan. Activating this feature forces the DSP to
take spectra every line with an intended misalignment. A value of 1
means a spectrum will be taken every scan point. A value of 9 means a
distance of 9 area scan points between two spectra. The driven
spectrum depends on the probe control that is selected (STS, Z, PL).
Single spectra of a Raster Probe Scan easily can be handled by using
the \GxsmPopup{Events}{Show Probe} feature in the area plot. For a
conversion into a layer based image please use the
\GxsmMenu{Math/Probe/ImageExtract} plug-in.

\item[Show Expert Controls] This option hides or reveals some advanced options in
different folders. In this help file controls will be mentioned as
Expert Controls, if they are revealed by this option.  

\item[DynZoom] With the Signal Ranger DSP it is possible to dynamical zoom
while scanning.  

\item[PrePts] Problems with drift in x-direction can be reduced by scanning
a larger distance. The DSP adds equivalent points at both ends of a
line which will be ignored in the resulting scan data. The total
scan size will get larger in x by a factor of $(1 + 2 * PrePts / ScanPointsX)$.
Use the Pan-View plug-in to prevent trouble with the maximum scan size.
\end{description}



\subsubsection{IV-Type Spectroscopy}



\GxsmScreenShot{SR-DSP-Control-Advanced-Raster}{Advanced setup with Raster enabled}
\GxsmScreenShot{SR-DSP-Control-STS}{STS folder}

This is the dialog for scanning tunneling spectroscopy (STS). Sources
can be chosen in the Graphs Folder (Please have a look at the Graphs
section for details).

\begin{description}
\item[IV-Start-End] These are the start and the end values of the
spectrum. Optional a repetition counter is shown (Expert Control
option). This forces the Signal Ranger to do the STS spectrum n times.

\item[IV-dz] Lowering of the tip can improve the signal to noise ratio
especially at low voltages. IV-dz is the maximum lowering depth which is
reached at 0V. The lowering depth is equal to zero if the the I/V curve
meets the bias voltage. Lowering the tip means a decrease of the
tunneling gap. An automatic correction of the resistance is
implemented by means of several (\#) dI/dz spectra at the bias voltage
(Expert Control option).  

\item[Points] Number of points the spectrum will have. Please have a look at
\GxsmEntry{Int} for additional informations.  

\item[IV-Slope] Slope while collecting data.  

\item[Slope-Ramp] Slope while just moving.  

\item[Final-Delay] After running a spectrum this is the time the DSP waits
to enable the feedback again.  

\item[Recover] This is the time between two spectra where the feedback is
activated for a readjustment of the distance (Expert Control option).

\item[Status] Gives information about the ongoing spectrum:

\item[Tp] Total time the probe needs.  

\item[dU] Maximum difference of the voltages that will be applied.

\item[dUs] Stepsize of the data points.  

\item[Feedback On] Decides whether the feedback will be on or off while
taking a spectrum.  

\item[Dual] When activated the DSP will take two spectra. One spectrum is
running from Start to End directly followed by a spectrum from the End
to the Start value.  

\item[Int] When activated the DSP will average all fetched data between two
points. It can easily be seen, that decreasing the values of IV-Slope
or Points will increase the oversampling and therefore will improve
the quality of the spectrum.See note ($*$) below.

\item[Ramp] This option forces the DSP to stream all data to the PC
including the Slope-Ramps.  

\item[Save] When activated, GXSM will save spectra automatically to your
home directory.  

\item[Plot] When activated, GXSM will automatically show/update the plots
chosen in the Graphs dialog.
\end{description}


\GxsmNote{$*$ The sampling rate of the Signal Ranger is 22.1 kHz so the
time between two points of a spectrum leads directly to the number of
interim points that can be used for oversampling.
%
total time for the spectrum:
\[ ts = dU / IV-Slope \]
%
time per point:
\[ tp = ts / Points = dU / (IV-Slope * Points) \]
%
number of samples at one point:
\[ N = tp * 22100 Hz = 22100 Hz * dU / (IV-Slope * Points) \]
}


\subsubsection{Vertical (Z) Manipulation}

Manipulation in general is controlled or forced top motion in one or
more dimensions for any desired purpose.
This is the dialog for distance spectroscopy and forced Z/tip manipulation.

\GxsmScreenShotDual{SR-DSP-Control-Z}{GXSM SR DSP Control window, left: Z manipulation}{SR-DSP-Control-LM}{LM, lateral and Z manipulation}

\begin{description}
\item[Z-Start-End] These are the start and the end values of the spectrum in
respect to the current position.  

\item[Points] Number of points the spectrum will have. Please have a look at
\GxsmEntry{Int} for additional informations.

\item[Z-Slope] Slope while collecting data.

\item[Slope-Ramp] Slope while just moving.

\item[Final-Delay] After running a spectrum this is the time the DSP waits
to enable the feedback again.

\item[Status] Gives information about the ongoing spectrum:

\item[Tp] Total time the probe needs. 
\end{description}

Informations about the check options can be found in STS.



\subsubsection{Lateral Manipulation }

With LM a lateral manipulation of the tip/sample is possible.
But also the Z-dimension can be manipulated at the same time if dZ set to a non zero value.

\begin{description}
\item[dxyz] Distance vector that will be covered.

\item[Points] While moving it is possible to collect data. Points defines the number of collected data points.

\item[LM-Slope] Speed of the tip/sample.

\item[Final-Delay] Timeout after lateral manipulation.

\item[Status] Gives information about the ongoing move.
\end{description}

Informations about the check options can be found in STS.




\subsubsection{Tip Enhancements and Field based Manipulation}

There are several possibilities to prepare a tip. One is to dip the
tip into the sample in a controlled manner (use \GxsmEntry{Z} for
this). Another option is applying a charge pulse using this \GxsmEntry{PL} dialog.

\GxsmScreenShot{SR-DSP-Control-PL}{GXSM SR DSP Control window: PL mode}

\begin{description}
\item[Duration] Determines the duration of the pulse.
\item[Volts] Applied voltage.

\item[Slope] Slope to reach \GxsmEntry{Volts}.

\item[Final Delay] Delay for relaxing the I/V-converter after pulsing.

\item[Repetitions] How many pulses are applied.

\item[Status] Gives information about the ongoing pulse. 
\end{description}

Informations about the check options can be found in STS.


\subsubsection{Control of the digital (DSP) Lock-In}

The Lock-In folder provides all settings concerning the build in
digital Lock-In. The Lock-In and with it the bias modulation is
automatically turned on if any Lock-In data channel is requested,
either for probing/STS (in Graphs) or as a scan data source
(Channelselector) for imaging.

There are a total of five digital correlation sums computed:

Averaged Input Signal (LockIn0), 

Phase-A/1st order (LockIn1stA),
Phase-B/1st order (LockIn1stB),

Phase-A/2nd order (LockIn2ndA),
Phase-B/2nd order (LockIn2ndB).

\GxsmNote{Please always select LockIn0 for STS.}

\GxsmScreenShot{SR-DSP-Control-LockIn}{GXSM SR DSP Control window: Lock-In settings}

\begin{description}
\item[AC-Amplitude] The amplitude of the overlaid Lock-In AC voltage.
\item[AC-Frequency] The base frequency of the Lock-In. There are four fixed frequency choices.
\item[AC-Phase-AB] Phase for A and B signal, applied for both, 1st and 2nd order.
\item[AC-Avg-Cycles] This sets the length for averaging, i.e. the corresponding time-constant.
\end{description}

For adjustments purpose only are the following parameters and the execute function here,
not needed to run the Lock-In for all other modes. 
The special probe mode implemented in this section can actually sweep the phase of the Lock-In,
it is useful to figure out the correct phase to use:

\begin{description}
\item[span] Full phase span to sweep.
\item[pts] Number data points to acquire while phase sweep.
\item[slope] Phase ramp speed. 
\end{description}

The digital Lock-In is restricted to a fixed length of base period
(choices are 128, 64, 32, 16 samples/per period with a fixed sample
rate of 22100 samples/s) and a fixed number of 8 periods for computing
the correlation sum: The total number of periods used for correlation
of data can be increased by setting AC-Avg-Cycles greater than one,
then overlapping sections of the 8 period long base window is used for
building the correlation sum. Thus the total integration length (time constant ) is

\[ \tau = \frac{\text{AC-Ave-Cycels} \cdot 8}{\text{Frq}} \]
\[ \text{Frq} = \frac{22100 \:\text{Hz}}{M = 128, 64, 32, 16} \].

There for the following discrete frequencies are available: 172.7$\:$Hz, 345.3$\:$Hz, 690.6$\:$Hz, 1381.2$\:$Hz.


The four correlation sums for A/B/1st/2nd are always computed in
parallel on the DSP if the Lock-In is enabled -- regardless what data
is requested. The correlation length is given by:

\[ N = 128 \cdot \text{AC-Ave-Cycels} \cdot 8\]
\[ \omega = 2 \pi \cdot \text{Frq} \]

Lock-In data calculations and reference signal generation is all in digital regime on the DSP in real-time. 
The modulation is applied to the Bias voltage by default automatically only if the Lock-In is active:
\[ U_{\text{ref}} = \text{AC-Amp} \cdot \sin(\omega t) + \text{Bias}\]

Averaged signal and Lock-In output signals calculated:
\[ U_{\text{LockIn0}} = \sum_{i=0}^{N-1}{U_{in,i}} \]
\[ U_{\text{LockIn1stA}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(i \frac{2\pi}{M} + \text{Phase-A})  }    \]
\[ U_{\text{LockIn1stB}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(i \frac{2\pi}{M} + \text{Phase-B})  }    \]
\[ U_{\text{LockIn2ndA}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(2 i \frac{2\pi}{M} + \text{Phase-A})  }    \]
\[ U_{\text{LockIn2ndA}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(2 i \frac{2\pi}{M} + \text{Phase-B})  }    \]

\GxsmNote{Implemented in FB\_spm\_probe.c, run\_lockin() (C) by P.Zahl 2002-2007. }

\GxsmNote{All Lock-In data is raw summed in 32bit integer variables by the DSP, they are not normalized at this time and moved to \Gxsmx via FIFO.
\Gxsmx applies the normalization before plotting. }


Informations about the check options can be found in STS.

\clearpage

\subsubsection{Auxiliary Probe Control}


\GxsmScreenShot{SR-DSP-Control-AX}{GXSM SR DSP Control window: AX (Auxiliary) settings}

This folder can be used for control and data acquisition from several
kind of simple instruments like a QMA or Auger/CMA.

\GxsmNote{Best is to setup a new user for this instrument and
configure the Bias-Gain so the ``Voltage'' corresponds to what you
need. As input you can select any channel, including Lock-In and
Counter. Here the Gate-Time is used to auto set the V-slope to match
V-range and points.}

\clearpage


\subsubsection{Data Sources and Graphing Control}

In the Graphs folder all available data channels are listed. If a
Source is activated, measured data will be transferred into the
buffer. Saving the buffer will automatically save all activated
sources.  Additionally it is possible to define a source as to be
displayed. 


\GxsmScreenShot{SR-DSP-Control-Graphs}{GXSM SR DSP Control window, Graphs page: Plot and Data sources setup.}


\GxsmHint{Beware: If a channel is not marked as a Source there will be no data
to be displayed even if X or Y is checked.}


\clearpage




\subsection{SR-DSP Mover and Approach Control}


GXSM with the SRanger also provides ramp like signal generation for
slip-stick type slider/mover motions which are often used for coarse
positioning aud tip approach. Set
\GxsmPref{User}{User/SliderControlType} to \GxsmEntry{mover} to get
the most configurable Mover Control dialog. If set to
\GxsmEntry{slider} (default setting) the dialog will be simplified for
Z/approach only. The different tabs are only for users convenience to
store different speed/step values, the output will always occur as
configured on the \GxsmEntry{Config} folder.

\GxsmScreenShotDual{SR-DSP-Mover}{GXSM SR generic coarse mover controller}{SR-DSP-Mover-Auto}{Auto approach controller}
\GxsmScreenShot{SR-DSP-MoverConfig}{GXSM SR DSP configuration of SRanger inertial driver engine.}


\clearpage


\subsection{Extra Python SR-DSP Control and Configuration Scripts}


The Python script \GxsmFile{SRanger/TiCC-project-files/FB\_spmcontrol/python\_scripts/sr\_spm\_control.py}
can be used for inspection and DSP/SPM software configuartion:

\GxsmScreenShot{SR-spm-control}{Main Menu}
\GxsmScreenShot{SR-spm-control-AIC-Offset}{AIC Offset Control}
\GxsmScreenShot{SR-spm-control-CR-ratemeter}{CoolRunner Rate Meter}
\GxsmScreenShot{SR-spm-control-gain}{AIC Gain Control}
\GxsmScreenShot{SR-spm-control-info}{SR-DSP/SPM software version info}
\GxsmScreenShot{SR-spm-control-settings}{SPM settings}
\GxsmScreenShot{SR-CR-Stage-LVDT-Control}{DSP Stage/LVDT Control}

\clearpage

\subsubsection{Usage}

Set the \GxsmPref{Hardware}{Card} to ''SRanger:SPM''.

\GxsmNote{
Launch\\ \filename{/SRanger/TiCC-project-files/FB\_spmcontrol/FB\_spmcontrol.out}\\
on the SR before starting \Gxsm!
\\
Execute ``loadusb'' like this before starting \Gxsm or any other DSP tool:
\\
\GxsmFile{besocke@thundera:~/SRanger/loadusb\$ ./loadusb ../TiCC-project-files/FB\_spmcontrol/FB\_spmcontrol.out}
}

%% OptPlugInSources

%% OptPlugInDest

% OptPlugInNote
Special features and behaviors to be documented here!

\index{C-PlugIn!hard/sranger\_hwi.C}
\index{PlugIn!sranger\_hwi}
\index{GXSM-Menu!Tools/SR-DSP Control}
\subsubsection{Info for Plug-In: Tools/SR-DSP Control }
\begin{tabbing}
Plug-In name:   \= Percy Zahlsranger\_hwi \= Email: \= x \kill
Plug-In name:   \> sranger\_hwi\>  File:  \> hard/sranger\_hwi.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/hard/demo_hwi.C
% ------------------------------------------------------------

\section{Demo Hardware Interface}
% Name=demo\_hwi
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/SR-DSP Control

\label{pi:demohwi}
\subsubsection{Description}

This provides a demonstartion hardware interface (HwI)
for GXSM.  It contains all hardware close and specific settings and
controls for feedback, scanning, all kind of probing (spectroscopy and
manipulations).

All functions are simulated.

\index{C-PlugIn!hard/demo\_hwi.C}
\index{PlugIn!demo\_hwi}
\index{GXSM-Menu!Tools/SR-DSP Control}
\subsubsection{Info for Plug-In: Tools/SR-DSP Control }
\begin{tabbing}
Plug-In name:   \= Percy Zahldemo\_hwi \= Email: \= x \kill
Plug-In name:   \> demo\_hwi\>  File:  \> hard/demo\_hwi.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi.C
% ------------------------------------------------------------

\section{Signal Ranger MK2/3-A810 Hardware Interface}
% Name=sranger\_mk2\_hwi
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/SR-DSP Control

\label{pi:srangermk2hwi}
\subsubsection{Description}

\index{Signal Ranger MK2 HwI}
\index{Signal Ranger MK2/3 HwI}
This provides the SignalRanger-MK2 and -MK3-Pro (equipped with the A810
analog IO module) hardware interface (HwI) for GXSM.  It contains all
hardware close and specific settings and controls for feedback,
scanning, all kind of probing (spectroscopy and manipulations) and
coarse motion control including the auto approach
controller. Invisible for the user it interacts with the SRanger DSP,
manages all DSP parameters and data streaming for scan and probe. The
newer MK3-Pro (mark 3) DSP provides more computing power and a 32bit
architecture and is capable of running a software PLL on top of the
standart A810 architecture and a PLL optimized A810 module what is
fully compatible but provided a more precise (stabilized) frequency
reference for higher PAC/PLL precision.

\GxsmNote{THIS PLUGIN IS DERIVED FROM THE ORIGINAL SR MODULE AND IT
  STARTS WITH EXACTLY THE SAME FEATURES. THIS DOCUMENT SECTION IS
  STILL WRITING IN PROGRESS.  We assume by now that the SR-MK2 or MK3-Pro is
  equiped with the Analog-810 (MK2-A810 or MK3-PLL SPM Controller), this is 
  the new SPM dedicated analog module GXSM will supports best starting in 2009
  (official introduction: Feb-2009) on. Main differenes/upgrades are 75/150kHz
  loop, high stability and precision AD/DA, lowest possible loop delays
  (less than 5 samples total), no hardware FIR/IIR or oversampling any
  longer on any channel.}

\GxsmNote{The MK2-A810 AD/DA channel configuration is by now
  equivaltent to the old SRanger with excetion of the new 4-channel
  feedback soure mixer inputs.  SR-AIC0..7-in/out correspondes to
  MK2-A810 AD/DA0..7 (See Appendix, SRanger DSP).\\ In brief:\\
  DA0/1/2:
  X0/Y0/Z0, DA3/4/5: Xs/Ys/Zs, DA6/7: Bias, Motor.\\
  AD0: real time IIR enables channel, Mixer input 0 (default feedback
  in for Current-Signal), AD1,2,3: additional input channels usable
  for feedack source mixer, AD4..7: Auxilary.  }

\GxsmNote{Notes on the latest MK3-Pro-A810/PLL ``Snowy Janus Hack'':
Starting with this experimental SVN revision
https://sourceforge.net/p/gxsm/svn/HEAD/tree/branches/Gxsm-2x3-transition-sig
a totally real time and hot configurable so called signal
configuration allows for any in- and output configuration and thus all
there is a default assignment so far known from the MK2. Please refer
to the MK3 subsection for deviations from the MK2 interface and setup.}

%The \GxsmEntry{SR DSP Control} Dialog is divided into several sections:
%1) Feedback & Scan: This folder contains all necessary options regarding feedback and scan.
%3) Advanced: Different settings for advanced features of the Signal Ranger.
%4) STS: Parameter for dI/dV spectroscopy can be defined here.
%5) FZ: In this section information about force - distance curves can be set.
%6) LM: For manipulation of x, y, or z use this dialog.
%7) Lock-In: This slice contains the parameter set for the build in Lock-In.
%8) AX: Auxiliary
%9) Graphs: Choose sources and decide how to plot them.

\GxsmGraphic{SR-DSP-MK3-DSP-Block}{0.285}{Schematic diagram of the
    DSP code topology: Startup section configures the DSP system, sets
    up timers for data processing interrupt subroutine (ISR) and enters the
    never ending idle loop, which implements a state machine.}

\GxsmGraphic{SR-DSP-MK3-mixer}{0.33}{Schematic diagram of the new DSP feedback with four signal
    source mixer. The input signals are transformed as requested
    (TR$_i$: linear/logarithmic/fuzzy) and the error signal $\Delta_i$
    is computed for every channel $i$ using individual set points. The
    sum of previously with gain $G_i$ scaled delta signals is computed
    and feed into the feedback algorithm $FB$ as $\Delta$.}
%
\GxsmGraphic{SR-DSP-MK3-IIR-plot-q}{0.35}{Life IIR performance demonstration in Gxsm
    self-test configuration. A stair
    case like current input signal starting at $3.6\:$pA noise level
    assuming $1\:$V/nA (or a $\times 10^9$ gain)
    with logarithmic steps starting at $20\:\mbox{pA}$ and scaled by
    $\times 2$ for the following steps (ADC-0 (black)) is generated using
    the Gxsm "PL"-Vector Probe mode. At the same time the IIR-response 
    (via Z-mon (red)) and the real-time $q$ (blue) is recorded.
    IIR settings used:
    $f_{\mbox{\tiny min}} = 50\:\mbox{Hz}$, $f_{\mbox{\tiny max}} =
    20\:\mbox{kHz}$, $\mbox{I}_c = 500\:\mbox{pA}$.}
%
New: The A810 DSP code implements a high resolution (HR) mode for
the DAC. This increases the bit resolution of selected output
channels up to 3 bits. This is possible on DSP software level now
running sampling and data processing at full 150$\:$kHz but limiting
all other DSP tasks like scan and feedback to a reasonable fraction
of this. For all input channels an automatic scan speed depending
bandwidth adjustment (simple averaging) is used as before, but now
the gained resolution due to statistics is not any longer thrown
away (rounded off to integer), but the full 32 bit accumulated value
and normalization count is kept and transferred. A normalization to
the original 16 bit magnitude, but now as floating point number, is
done by the HwI as data post processing. For performance reasons and
future expansions the FIFO data stream consisting of a set of 32 bit
signals is now compressed using first order linear predictor and
custom encoded byte packed.

In particular the signal to noise ratio of small or noisy signals will
increase automatically with lowering the scan speed (given here in
pixels/s). All available input channels ADC$_i$ are managed in this
automatic scan speed matching bandwidth mode:
\[ \mbox{V} = \frac{1}{N} \sum_{n=0}^{N-1} \mbox{ADC}_{i}(n)\mbox{,} \quad N = \frac{75000\:\mbox{Hz}}{\mbox{Pixel}/\mbox{s}} \]
or in signal noise gain ($S_N$) terms
\[ S_N = 20 \log\left(\frac{1}{\sqrt{N}}\right) \]
is the gain in signal to noise ratio -- assuming statistical noise --
on top of the available 16$\:$bits (1$\:$bit RMS) of the
MK2-A810.

This now requires tp adjust the Gxsm preferences as indicated on Gxsm startup
if not setup correctly. Refer also to the sample configuration shown in the
appendix \ref{A810-gxsm-pref} of this HwI section.

Further the latest experimental release revises the feedback loop
configuration and allows up to four signals (provided on ADC0$\dots$3)
to be user configurable as feedback sources using linear or
logarithmic signal transformations and even can be mixed and weighted
in different ways via the gains $G_i$ as illustrated in Fig.~\ref{fig:SR-DSP-MK3-mixer}. It also includes a special ``FUZZY'' mix mode for
signal level depended enabling of a particular chanqnel only if its
signal is beyond a given level; only the ``amount beyond'' is used for
$\Delta_i$ computation.

This multi channel feedback mode allows for example contineous
transitions between STM and AFM or Dynamic Force Microscope (DFM)
operation modes. The ``FUZZY'' mode can be used in many ways, one may
be a kind of ``tip guard'' mechanism watching for special conditions,
i.e. watching the power dissipation signal commonly available from
Phase Locked Loop (PLL) controllers used for DFM.

For channel ADC$_0$ a real time self adaptive Infinite Respose (IIR)
filter which adjusts its frequency as function of the signal
magnitude is implemented -- assuming to be used for sampling the
tunnel current in STM mode.  The user selects a crossover current
I$_c$ and cut-off lower limit frequency $f_{\mbox{\tiny min}}$, also
the upper bandwidth can be limited to $f_{\mbox{\tiny max}}$. This
will then in real time limit the ADC$_0$ input bandwidth in dependence
of the signal magnitude $|\mbox{I}_n|$ according to:

% CODE snipets for ref.
% 	// IIR self adaptive filter parameters
% 	double ca,cb;
% 	double Ic = gapp->xsm->Inst->VoltIn2Dig (gapp->xsm->Inst->nAmpere2V (1e-3*IIR_I_crossover)); // given in pA
% 	dsp_feedback.ca_q15   = sranger_mk2_hwi_hardware->float_2_sranger_q15 (ca=exp(-2.*M_PI*IIR_f0_max/75000.));
% 	dsp_feedback.cb_Ic    = (DSP_LONG) (32767. * (cb = IIR_f0_min/IIR_f0_max * Ic));
% 	dsp_feedback.I_cross  = (int)Ic; 
% 	dsp_feedback.I_offset = 1+(int)(gapp->xsm->Inst->VoltIn2Dig (gapp->xsm->Inst->nAmpere2V (1e-3*LOG_I_offset))); // given in pA
% ... dataprocess...
% 	if (feedback.I_cross > 0){
% 		// IIR self adaptive
% 		feedback.I_fbw = AIC_IN(0);
% 		AbsIn = _abss(AIC_IN(0));
% 		feedback.q_factor15 = _lssub (Q15L, _smac (feedback.cb_Ic, AbsIn, Q15) / _sadd (AbsIn, feedback.I_cross));
% 		feedback.zxx = feedback.q_factor15;
% 		if (feedback.q_factor15 < feedback.ca_q15)
% 		      feedback.q_factor15 = feedback.ca_q15;
% 		feedback.I_iir = _smac ( _lsmpy ( _ssub (Q15, feedback.q_factor15), AIC_IN(0)),  feedback.q_factor15, _lsshl (feedback.I_iir, -16));
% 		AIC_IN(0) = _lsshl (feedback.I_iir, -16);
% 	}
% ------
% Ic, IIR_f0_min,max
% ca_q  = exp(-2pi IIR_f0_max / 75000)  ----> f0 = -ln(q) / 2pi * 75000Hz
% cb_Ic = IIR_f0_min / IIR_f0_max * Ic
% I_offset
% --> q    = (IIR_f0_min / IIR_f0_max * Ic + abs(I_n)) [=cb_Ic] / (abs(I_n) + I_c)
% --> if (q < ca) q=ca_q // limit to max BW
% --> ~I_n = q * ~I_n-1  +  (1-q) * I_n

\[ f_0(q) = -75000\:\mbox{Hz} \frac{\ln(q)}{2 \pi}, \quad 
q(\mbox{I}_n) = 1-\frac{\frac{f_{\mbox{\tiny min}}}{f_{\mbox{\tiny max}}} \mbox{I}_c + |\mbox{I}_n|}{\mbox{I}_c + |\mbox{I}_n|}
\]

This real time computed $q$ is limited to a $q_{\mbox{\tiny min}}$
matching the given $f_{\mbox{\tiny max}}$ before the bandwidth limited
(IIR filter) current signal $\tilde{\mbox{I}}_n$ which is recursively
computed on the DSP according to:

\[ \tilde{\mbox{I}}_n = q \tilde{\mbox{I}}_{n-1} + (1-q) \mbox{I}_n \]

Fig.~\ref{fig:SR-DSP-MK3-IIR-plot-q} illustrates the IIR filter response to a
logarithmic steepening stair case test input signal. This is a live
IIR performance demonstration utilizing the Gxsm Vector Probe Engine
itself and having Gxsm and the MK2-A810 set up in a
self-test configuration. The stair case like
current input signal is starting at about $3.6\:$pA noise level
assuming $1\:$V/nA (or a $\times 10^9$ gain). The logarithmic steps
start at $20\:\mbox{pA}$ and scale by $\times 2$ for the adjacent
steps (ADC-0 (black)). The test signal is generated using the Gxsm
"PL"-Vector Probe mode. At the same time the IIR-response (via Z-mon
(red)) and the real-time $q$ (blue) is recorded.

The IIR settings used for this demonstration are: $f_{\mbox{\tiny min}} =
50\:\mbox{Hz}$, $f_{\mbox{\tiny max}} = 20\:\mbox{kHz}$, $\mbox{I}_c =
500\:\mbox{pA}$.

Looking at the IIR signal (red) the filter effectivity is clearly
visible for small signals, also the fast "step-up" response is
demonstrated by comparing with the slower "step-down" response.
Also note the $q$ cut-off indicated as the q cut-off level at 20$\:$kHz.

For a low signal to noise ratio (given for tunneling currents in the
pA regime) the feedback stability can be gained by a combination of
IIR filtering and slower scanning.
% Typically small tunnel signals at high amplifier gains are more noisy
% due to statistics and the feedback (Z) stability can be regained by
% signal recovery techniques like IIR filtering using experiment and
% system adapted bandwidth limiting and slow scanning. 
This digital self adapting IIR filter implementation allows full
control of the frequency ranges and guarantees a fast tip response to
a sudden increase of the tunnel signal (up to full band width) as
needed to prevent the tip from crashing into step bunches or other
``edges''.


\subsection{SR-DSP Feedback and Scan Control}

\index{Signal Ranger MK2 Feedback}
\index{Signal Ranger MK2 Scan Control }
The Feedback \& Scan folder contains all necessary options regarding
feedback and scan.  Here the feedback parameters and tunneling/force
settings are adjusted. The second purpose of this control panel is the adjustment of
all scan parameters of the digital vector scan generator like speed.

\GxsmScreenShotW{SR-DSP-MK3-DSP-Feedback-Scan}{GXSM3 MK3-PLL/A810 DSP Control window: Feedback and Scan Control page with activated configuration mode and internal offset-adding}{0.9\textwidth}
\GxsmScreenShotW{SR-DSP-MK3-DSP-Advanced}{GXSM3 MK3-PLL/A810 DSP Control window: Advanced settings page with activated configuration mode}{0.9\textwidth}

\begin{description}

\item[Bias] Voltage that is applied to OUT6. The entered value will be
  divided by the \GxsmPref{InstSPM}{BiasGain} value. Without an
  additional amplification or attenuation the
  \GxsmEntry{Instrument/BiasGain} value has to be set to 1.

\item[Feedback Mixer Source: SCurrent] The signal from ADC0 is feed to
  the self adaptive FIR (if enabled in Advanced Settings) and the
  processed as any other Mixer Source Input. However, this channel is
  expected to be used for (STM) Current Setpoint as it is converted
  due to the setting of \GxsmPref{InstSPM}{nAmpere2Volt}.

\item[Feedback Mixer Source: SSetPoint, SAux2,3] Further Mixer input
  signals from ADC1, ADC2 and ADC3.

\item[Mixer Gains] For scaling of the error signal (SetPoint -
  Source), use about 0.5 at max. Bascially works as pre-scaling of CP
  and CI together if only one channel is used.

\item[CP, CI] Parameters for the feedback loop. CP is proportional to
  the difference between the set point and the current value at IN5.
  CI integrates this difference. Higher values for CP / CI mean a
  faster loop.

\item[MoveSpd, ScanSpd] MoveSpd is valid for movements without taking
  data (e.g. change xy-offset or moving to the starting point of an
  area scan). ScanSpd is valid if the DSP is taking data.
  PiezoDriveSetting: Usually a high voltage amplifier has different
  gains. A change of the gain can easily be mentioned in GXSM by
  activating the appropriate factor. A change of this values acts
  instantly. The available gain values can be defined in the
  \GxsmPref{InstSPM}{Analog/V1-V9}. After changing the preferences
  GXSM needs to be restarted to take effect. Remark: Piezo constants
  and other parameters have to be charged. Please use the
  \GxsmPref{InstSPM}{Instrument/PiezoAV} for this odd values.
\item[LDCdx,dy] Coefficients for Linear Drift Correction -- active if
  \GxsmEmph{Enable LDC} is checked. While checked, any manual Offset
  changes are prohibited (blocked) -- uncheck to perform offset
  changes. This is the speed and direction the tip is moving to
  correct for drift. Use the negative number found via
  \GxsmPopup{Scan}{View/Coordinates/Relative, check Time} and set a
  Globel Reference Point via Point-Object in a previous Scan to mark a
  feature.
\end{description}

\GxsmHint{Good conservative start values for the feedback loop gains
  CP and CI (on a MK2-A810 system, 32 bit internal handling) are 0.004 
  for both. Typically they can be increased up to 0.01, depending on the
  the system, tip and sample. \\
  The MK3Pro-A810 handels the feedback 
  internally with 64 bit. Therefore, the values for the feedback are 
  roughly a factor of 256 higher than for a MK2 based system. Good 
  standard values for the Mk3Pro-A810 based system will be between 20 
  and 40. A meaningfull maximum is 256. CP = 100 (MK3Pro-A810) results 
  in 1 mV change per 1 V error signal.\\
  In general CP can be about 150\% of CI to gain more 
  stability with same CI. The feedback transfer is 1:1 (error to output
  per loop) if all gains, CP and CI, are set to one in linear mode.}


\subsection{Advanced Feedback and Probe Control}


Advanced is a collection of different settings, to handle the advanced
capabilities of the Signal Ranger DSP. It is quite a mixture of
different tools.

\begin{description}
\item[FB Switch] This option enables or disables the feedback loop.
  Disabling will keep the current Z-position.

\item[Frq-Ref] must be set to 75000$\:$kHz and not changed at any time
  (guru mode only).

\item[IIR] ADC0 (Current) can be real time signal magnituden dependent
  IIR filtered. A self adjusting IIR algorithm is used. See
  introduction to this plugin for details.

\item[Automatic Raster Probe] In general spectra can easily be taken
  while doing an area scan. Activating this feature forces the DSP to
  take spectra every line with an intended misalignment. A value of 1
  means a spectrum will be taken every scan point. A value of 9 means
  a distance of 9 area scan points between two spectra. The driven
  spectrum depends on the probe control that is selected (STS, Z, PL).
  Single spectra of a Raster Probe Scan easily can be handled by using
  the \GxsmPopup{Events}{Show Probe} feature in the area plot. For a
  conversion into a layer based image please use the
  \GxsmMenu{Math/Probe/ImageExtract} plug-in.

\item[Show Expert Controls] This option hides or reveals some advanced
  options in different folders. In this help file controls will be
  mentioned as Expert Controls, if they are revealed by this option.

\item[DynZoom] With the Signal Ranger DSP it is possible to dynamical
  zoom while scanning -- side effects on offest as zooming (data point
  separation adjustment) occurrs in real time at the current tip
  position, guru mode only. Always set back to one at scan start.

\item[PrePts] Problems with piezo creep in x-direction can be reduced
  by scanning a larger distance. The DSP adds equivalent points at
  both ends of a line which will be ignored in the resulting scan
  data. The total scan size will get larger in x by a factor of $(1 +
  2 * PrePts / ScanPointsX)$.  Use the Pan-View plug-in to prevent
  trouble with the maximum scan size.
\end{description}



\subsubsection{STS}


\index{Signal Ranger MK2/3 Spectroscopy}
\index{Signal Ranger MK2/3 Manipulation}
\index{Signal Ranger MK2/3 Vector Probe}

\GxsmScreenShotW{SR-DSP-MK3-DSP-Advanced-Raster}{Advanced setup with Raster enabled}{0.9\textwidth}
\GxsmScreenShotW{SR-DSP-MK3-DSP-STS}{STS tab of the MK3 DSP control}{0.9\textwidth}

This is the dialog for scanning tunneling spectroscopy (STS). Sources
can be chosen in the Graphs Folder (Please have a look at the Graphs
section for details).

\begin{description}
\item[IV-Start-End, \#IV] These are the start and the end values of
  the spectrum. Optional a repetition counter is shown (Expert Control
  option enabled). This forces the Signal Ranger to do the STS
  spectrum n times.

\item[IV-dz] Lowering of the tip can improve the signal to noise ratio
  especially at low voltages. IV-dz is the maximum lowering depth
  which is reached at 0V. The lowering depth is equal to zero if the
  the I/V curve meets the bias voltage. Lowering the tip means a
  decrease of the tunneling gap. An automatic correction of the
  resistance is implemented by means of several (\#) dI/dz spectra at
  the bias voltage (Expert Control option).

\item[Points] Number of points the spectrum will have. Please have a
  look at \GxsmEntry{Int} for additional informations.

\item[IV-Slope] Slope while collecting data.  

\item[Slope-Ramp] Slope while just moving.  

\item[Line-dXY, \#Pts] Only shown if Expert Control option is set.
  Only if \#Pts is set to more than one the complete procedure
  previously defined will be repeated on \#Pts points equally spread
  along the via Line-dXY defined vector starting at the current tip
  position. Markers will be placed into the active scan window once
  done if Auto Plot is selected or every time updated if Plot is hit.
  To find the propper Vector coordinates, use the Line Object and read
  the dxy vector from the status line as indiceted by d(dx, dy).
  IV-Line Slope is used for moving speed from point to point --
  feedback will be enabled and the recovery delay is applied before
  the next STS probe cycle starts. Enable ``Show Probe Events'' (Scan
  side pane, Probe Events), else nothing will be shown on the scan.
  See demo setup in appendix \ref{A810-sts-demo} to this section.

\item[Final-Delay] After running a spectrum this is the time the DSP
  waits to enable the feedback again.

\item[Recover] This is the time between two spectra where the feedback
  is activated for a readjustment of the distance (Expert Control
  option).

\item[Status] Gives information about the ongoing spectrum:

\item[Tp] Total time the probe needs.  

\item[dU] Maximum difference of the voltages that will be applied.

\item[dUs] Stepsize of the data points.  

\item[Feedback On] Decides whether the feedback will be on or off
  while taking a spectrum.

\item[Dual] When activated the DSP will take two spectra. One spectrum
  is running from Start to End directly followed by a spectrum from
  the End to the Start value.

\item[Int] When activated the DSP will average all fetched data
  between two points. It can easily be seen, that decreasing the
  values of IV-Slope or Points will increase the oversampling and
  therefore will improve the quality of the spectrum.See note ($*$)
  below.

\item[Ramp] This option forces the DSP to stream all data to the PC
  including the Slope-Ramps.

\item[Save] When activated, GXSM will save spectra automatically to
  your home directory.

\item[Plot] When activated, GXSM will automatically show/update the
  plots chosen in the Graphs dialog.
\end{description}


\GxsmNote{$*$ The sampling rate of the Signal Ranger is 22.1 kHz so
  the time between two points of a spectrum leads directly to the
  number of interim points that can be used for oversampling.
%
total time for the spectrum:
\[ ts = dU / IV-Slope \]
%
time per point:
\[ tp = ts / Points = dU / (IV-Slope * Points) \]
%
number of samples at one point:
\[ N = tp * 75000 Hz = 75000 Hz * dU / (IV-Slope * Points) \]
}


\subsubsection{Vertical (Z) Manipulation}

Manipulation in general is controlled or forced top motion in one or
more dimensions for any desired purpose.
This is the dialog for distance spectroscopy and forced Z/tip manipulation.

\GxsmScreenShotW{SR-DSP-MK3-DSP-Z}{GXSM SR DSP Control window, tab Z manipulation}{0.9\textwidth}

\begin{description}
\item[Z-Start-End] These are the start and the end values of the spectrum in
respect to the current position.  

\item[Points] Number of points the spectrum will have. Please have a look at
\GxsmEntry{Int} for additional informations.

\item[Z-Slope] Slope while collecting data.

\item[Slope-Ramp] Slope while just moving.

\item[Final-Delay] After running a spectrum this is the time the DSP waits
to enable the feedback again.

\item[Status] Gives information about the ongoing spectrum:

\item[Tp] Total time the probe needs. 
\end{description}

Informations about the check options can be found in STS.



\subsubsection{Lateral Manipulation (LM)}

With LM a lateral manipulation of the tip/sample is possible.
But also the Z-dimension can be manipulated at the same time if dZ set to a non zero value.

\begin{description}
\item[dxyz] Distance vector that will be covered.

\item[Points] While moving it is possible to collect data. Points defines the number of collected data points.

\item[LM-Slope] Speed of the tip/sample.

\item[Final-Delay] Timeout after lateral manipulation.

\item[Status] Gives information about the ongoing move.
\end{description}

Informations about the check options can be found in STS.




\subsubsection{Pulse (PL) and Tip Forming or controlled crash Z manipulations}

There are several possibilities to prepare or manipulate a tip or locale surface area. One is to dip the
tip into the sample in a controlled manner, another option is applying a charge pulse or both combined.

%\GxsmScreenShotW{SR-DSP-MK3-DSP-PL}{GXSM SR DSP Control window: PL mode setup}{0.9\textwidth}
%\GxsmScreenShot{A810-DSP-Control-PL-demo}{GXSM2 SR DSP Control window: PL mode - demo setup with PanView showing Z adjusted to 4.7$\:$\AA\ for testing.}
%\GxsmScreenShot{A810-DSP-Control-PL-plot-demo}{GXSM2 SR DSP Control window: PL mode - demo plot in self-test mode (Bias loop back to current)}
%\GxsmScreenShot{A810-DSP-Control-Graphs-PLdemo}{GXSM2 SR DSP Control window: PL mode - demo Graphs configuration}
%\GxsmScreenShot{A810-DSP-Control-PL-demo3x}{GXSM2 SR DSP Control window: PL mode - demo for repetions}
%\GxsmScreenShot{A810-DSP-Control-PL-plot-demo3x}{GXSM2 SR DSP Control window: PL mode - demo for repetitions}



\GxsmScreenShot{SR-DSP-MK3-ADV-configure}{SR-DSP-MK3-ADV-configure}
\GxsmScreenShot{SR-DSP-MK3-ADV-simple}{SR-DSP-MK3-ADV-simple}
\GxsmScreenShot{SR-DSP-MK3-DSP-Advanced}{SR-DSP-MK3-DSP-Advanced}
\GxsmScreenShot{SR-DSP-MK3-DSP-Advanced-Raster}{SR-DSP-MK3-DSP-Advanced-Raster}
\GxsmScreenShot{SR-DSP-MK3-DSP-AX}{SR-DSP-MK3-DSP-AX}
\GxsmScreenShot{SR-DSP-MK3-DSP-Feedback-Scan}{SR-DSP-MK3-DSP-Feedback-Scan}
\GxsmScreenShot{SR-DSP-MK3-DSP-Graphs}{SR-DSP-MK3-DSP-Graphs}
\GxsmScreenShot{SR-DSP-MK3-DSP-LockIn}{SR-DSP-MK3-DSP-LockIn}
\GxsmScreenShot{SR-DSP-MK3-DSP-PL}{SR-DSP-MK3-DSP-PL}
\GxsmScreenShot{SR-DSP-MK3-DSP-STS}{SR-DSP-MK3-DSP-STS}
\GxsmScreenShot{SR-DSP-MK3-DSP-Z}{SR-DSP-MK3-DSP-Z}
\GxsmScreenShot{SR-DSP-MK3-FBS-bias-log-configure}{SR-DSP-MK3-FBS-bias-log-configure}
\GxsmScreenShot{SR-DSP-MK3-FBS-configure}{SR-DSP-MK3-FBS-configure}
\GxsmScreenShot{SR-DSP-MK3-FBS-CZ-FUZZY-LOG-bias-log}{SR-DSP-MK3-FBS-CZ-FUZZY-LOG-bias-log}
\GxsmScreenShot{SR-DSP-MK3-FBS-simple}{SR-DSP-MK3-FBS-simple}
\GxsmScreenShot{SR-DSP-MK3-Graphs}{SR-DSP-MK3-Graphs}
\GxsmScreenShot{SR-DSP-MK3-LockIn-configure}{SR-DSP-MK3-LockIn-configure}
\GxsmScreenShot{SR-DSP-MK3-LockIn-simple}{SR-DSP-MK3-LockIn-simple}
\GxsmScreenShot{SR-DSP-MK3-Mover-config}{SR-DSP-MK3-Mover-config}
\GxsmScreenShot{SR-DSP-MK3-PAC-FB-Controllers}{SR-DSP-MK3-PAC-FB-Controllers}
\GxsmScreenShot{SR-DSP-MK3-PAC-Operation}{SR-DSP-MK3-PAC-Operation}
\GxsmScreenShot{SR-DSP-MK3-VP-configure}{SR-DSP-MK3-VP-configure}
\GxsmScreenShot{SR-DSP-MK3-VP-simple}{SR-DSP-MK3-VP-simple}



\clearpage

\begin{description}
\item[Duration] Determines the duration of the pulse.
\item[Slope] Slope to reach \GxsmEntry{Volts and dZ}.
\item[Volts] Applied voltage.
\item[dZ] Gap or Z change.


\item[Final Delay] Delay for relaxing the I/V-converter after pulsing.

\item[Repetitions] How many pulses are applied.

\item[Step,dZ] Option to shift up/down every consecutive puls (for multiple repetitions)

\item[Status] Gives information about the ongoing pulse. 
\end{description}

Informations about the check options can be found in STS.



\subsubsection{Laser Pulse (LPC) user form}


\subsubsection{Slow Pulse (SP) user form}


\subsubsection{Time Spectrum (TS)}


\subsubsection{Tracking (TK) mode}

\index{Signal Ranger MK2/3 Tracking}

Real time tracking of simple features like local maxima or minima in Topography (Z, feedback on), Current or other signal external sources on A810-IN1 or 2 (TK-ref option menu).
This modes generated a special vector tracking sequence moving the tip starting at current tip position in circle (TK-nodes polygon (TK-points are used as step size each segment, moving at TK-Speed) with radius TK-rad, if TK-rad2 is > 0 it will use a double circle testing pattern) like motion. While moving on this pattern it will recognize the extrema (min/max) and if the gradient relative to the tips initial origin is up or down (as specified via TK-mode) it will relocate the tip and start over TK-Reps times.


\subsubsection{Control of the digital (DSP) Lock-In}

\index{Signal Ranger MK2/3 LockIn}
The Lock-In folder provides all settings concerning the build in
digital Lock-In. The Lock-In and with it the bias modulation is
automatically turned on if any Lock-In data channel is requested,
either for probing/STS (in Graphs) or as a scan data source
(Channelselector) for imaging.

There are a total of five digital correlation sums computed:

Averaged Input Signal (LockIn0), 

Phase-A/1st order (LockIn1stA),
Phase-B/1st order (LockIn1stB),

Phase-A/2nd order (LockIn2ndA),
Phase-B/2nd order (LockIn2ndB).

\GxsmNote{Please always select LockIn0 for STS.}

\GxsmScreenShotW{SR-DSP-MK3-DSP-LockIn}{GXSM SR DSP Control window: Lock-In settings and enabled configuration mode.}{0.9\textwidth}

\begin{description}
\item[AC-Amplitude] The amplitude of the overlaid Lock-In AC voltage.
\item[AC-Frequency] The base frequency of the Lock-In. There are four fixed frequency choices.
\item[AC-Phase-AB] Phase for A and B signal, applied for both, 1st and 2nd order.
\item[AC-Avg-Cycles] This sets the length for averaging, i.e. the corresponding time-constant.
\end{description}

For adjustments purpose only are the following parameters and the execute function here,
not needed to run the Lock-In for all other modes. 
The special probe mode implemented in this section can actually sweep the phase of the Lock-In,
it is useful to figure out the correct phase to use:

\begin{description}
\item[span] Full phase span to sweep.
\item[pts] Number data points to acquire while phase sweep.
\item[slope] Phase ramp speed. 
\end{description}

The digital Lock-In is restricted to a fixed length of base period
(choices are 128, 64, 32, 16 samples/per period with a fixed sample
rate of 75000 samples/s) and a fixed number of 8 periods for computing
the correlation sum: The total number of periods used for correlation
of data can be increased by setting AC-Avg-Cycles greater than one,
then overlapping sections of the 8 period long base window is used for
building the correlation sum. Thus the total integration length (time constant ) is

\[ \tau = \frac{\text{AC-Ave-Cycels} \cdot 8}{\text{Frq}} \]
\[ \text{Frq} = \frac{75000 \:\text{Hz}}{M = 128, 64, 32, 16} \].

There for the following discrete frequencies are available: 585.9$\:$Hz, 1171.9$\:$Hz, 2343.7$\:$Hz, 4687.5$\:$Hz.


The four correlation sums for A/B/1st/2nd are always computed in
parallel on the DSP if the Lock-In is enabled -- regardless what data
is requested. The correlation length is given by:

\[ N = 128 \cdot \text{AC-Ave-Cycels} \cdot 8\]
\[ \omega = 2 \pi \cdot \text{Frq} \]

Lock-In data calculations and reference signal generation is all in digital regime on the DSP in real-time. 
The modulation is applied to the Bias voltage by default automatically only if the Lock-In is active:
\[ U_{\text{ref}} = \text{AC-Amp} \cdot \sin(\omega t) + \text{Bias}\]

Averaged signal and Lock-In output signals calculated:
\[ U_{\text{LockIn0}} = \sum_{i=0}^{N-1}{U_{in,i}} \]
\[ U_{\text{LockIn1stA}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(i \frac{2\pi}{M} + \text{Phase-A})  }    \]
\[ U_{\text{LockIn1stB}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(i \frac{2\pi}{M} + \text{Phase-B})  }    \]
\[ U_{\text{LockIn2ndA}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(2 i \frac{2\pi}{M} + \text{Phase-A})  }    \]
\[ U_{\text{LockIn2ndA}} = \frac{2 \pi}{N} \sum_{i=0}^{N-1}{\text{AC-Amp} \cdot U_{in,i} \cdot \sin(2 i \frac{2\pi}{M} + \text{Phase-B})  }    \]

\GxsmNote{Implemented in FB\_spm\_probe.c, run\_lockin() (C) by P.Zahl 2002-2007. }

\GxsmNote{All Lock-In data is raw summed in 32bit integer variables by the DSP, they are not normalized at this time and moved to \Gxsmx via FIFO.
\Gxsmx applies the normalization before plotting. }


Information about the check options can be found in STS.

\clearpage

\subsubsection{Auxiliary Probe Control}


\GxsmScreenShotW{SR-DSP-MK3-DSP-AX}{GXSM SR DSP Control window: AX (Auxiliary) settings}{0.9\textwidth}

This folder can be used for control and data acquisition from several
kind of simple instruments like a QMA or Auger/CMA.

\GxsmNote{Best is to setup a new user for this instrument and
  configure the Bias-Gain so the ``Voltage'' corresponds to what you
  need. As input you can select any channel, including Lock-In and
  Counter. Here the Gate-Time is used to auto set the V-slope to match
  V-range and points.}

\clearpage


\subsubsection{Data Sources and Graphing Control}

In the Graphs folder all available data channels are listed. If a
Source is activated, measured data will be transferred into the
buffer. Saving the buffer will automatically save all activated
sources.  Additionally it is possible to define a source as to be
displayed. 

\GxsmScreenShotW{SR-DSP-MK3-DSP-Graphs}{GXSM SR DSP Control window, Graphs page: Plot and Data sources setup.}{0.9\textwidth}

\GxsmHint{Beware: If a channel is not marked as a Source there will be no data
to be displayed even if X or Y is checked.}

\clearpage

\subsection{SR-DSP Mover and Approach Control}

\index{Signal Ranger MK2/3 Mover}
\index{Signal Ranger MK2/3 Auto Approach}
\index{Signal Ranger MK2/3 Coarse Motions}
\label{pi:A810-mover}
GXSM with the SRanger also provides signal generation for
slip-stick type slider/mover motions which are often used for coarse
positioning aud tip approach. Set
\GxsmPref{User}{User/SliderControlType} to \GxsmEntry{mover} to get
the most configurable Mover Control dialog. If set to
\GxsmEntry{slider} (default setting) the dialog will be simplified for
Z/approach only. The different tabs are only for users convenience to
store different speed/step values, the output will always occur as
configured on the \GxsmEntry{Config} folder.

\GxsmScreenShot{SR-DSP-MoverConfig}{SR-DSP-MoverConfig}

\GxsmScreenShot{SR-DSP-Mover-configure}{SR-DSP-Mover-configure}

\GxsmScreenShot{SR-DSP-Mover-XY-configure}{SR-DSP-Mover-XY-configure}

\GxsmScreenShot{SR-DSP-Mover-Z0-simple}{SR-DSP-Mover-Z0-simple}

 % \GxsmScreenShotDual{SR-DSP-Mover}{GXSM SR generic coarse mover controller}{SR-DSP-Mover-Auto}{Auto approach controller}

To configure the mover output signal type and channles select the ``Config'' tab. Select the ``Curve Mode'', normally a simple Sawtooth will do it.
Then select the output configuration meeting your needs best. The MK3 ``Signal Master'' allows fully custom
assignment of the generic ``X'' and ``Y'' mover actions to any available output channel. See below  Wave$[0,1]$ out on  and Fig.~\ref{fig:screenshot:SR-DSP-MK3-Mover-config}.

\GxsmScreenShot{SR-DSP-MK3-Mover-config}{GXSM SR DSP configuration of SRanger (MK2/3Pro) inertial mover driver wave generate engine.}

More complex wave forms are available such as:
\begin{description}
\item[Wave: Sawtooth] Just a simple linear ramp and then a jump back to the initial value.
\item[Wave: Sine] For testing and maybe some inch worm drive.
\item[Wave: Cyclo, Cyclo+, Cyclo-, Inv Cyclo+, Inv Cyclo-] A cycloidal wave function (see \\ http://dx.doi.org/10.1063/1.1141450) should provide an even more abrupt change of the motion direction than the jump of the sawtooth and therefore work with lower amplitudes (or at lower temperatures) better. Depending on the option choosen, the signal is just limited to positive or negative values.
\item[Wave: KOALA] Intendet to be used with a KOALA drive (see http://dx.doi.org/10.1063/1.3681444). This wave form will require signal at two output channels with a phase shift of $\pi$. The wave form is shown in Fig.~\ref{fig:SR-DSP-MK3-Mover-Koala-waveform}.
\GxsmGraphic{SR-DSP-MK3-Mover-Koala-waveform}{2}{Wave form used to operate a KOALA drive STM.}
\item[Wave: Besocke] Intendet to be used with a Besocke style STM (see https://doi.org/10.1016/0039-6028(87)90151-8): 3 piezos walk up and down a ramp. In this particular case, the piezos have three segments at their outer side (u, v, w). This coarse motion will require signals at three output channels. These signals vary for different directions of movement. The fundamental waveform is shown in Fig.~\ref{fig:SR-DSP-MK3-Mover-Besocke-waveform}. By an additional analog switch, which can be controlled by the GPIO ports, one can change between xy motion (translation) and z motion (rotation). The switch either routes to the equivalent segments of the piezo the same signal (rotation) or projections on the three segments according to the 120$^\circ$ rotation between the three piezos (translation).

The time delay between the points A and B and also between D and E is named `settling time t1', the time delay between B and C is `period of fall t2'. t2 should be shorter than the actual time for the scan head to fall back onto the ramp. If the z-jump corresponds to about $\Delta h= 1\,\mu$m, the period of fall can be estimated according to the uniformly accelerated fall to be $t2=\sqrt{\frac{\Delta h}{g}}\approx 0.44\,$ms. 

These delays are both variable in the interface. The slip-stick amplitude is given by the voltage difference between C to D. The amplitude of the z-jump is defined as relative ratio to this value.
\GxsmGraphic{SR-DSP-MK3-Mover-Besocke-waveform}{0.5}{Basic wave form used for Besocke drive STM.}
\item[Pulse: positive] Uses an analog channel to generate a simple on/off pulse similar to the GPIOs but you can controll the voltage range.
\end{description}

\subsubsection{Autoapproach}


Main idea of autoapproach is to extract and retract scanner with tip (and enabled feedback)
between each macro approach step to prevent destruction of the tip.

For correct use of wave outputs/coarse motion controls and autoapproach it is necessary to setup
the output configuration and if needed the GPIO ports, which may control macro approach motor.
In config tab is possible to set:

\begin{description}
\item[Wave(0,1) out on] select the actual physical output channels used to output Wave X/Y vector. The defaults are: OUTMIX8 to Ch3 (normally X-Scan) and 9 to Ch4 (normally Y-Scan).
You may alternatively also choose the pre set options below.
\item[GPIO Pon] Sets ports as logic 1 or 0 in point $e$ - at the beginning of each pulse (see Fig.~\ref{fig:SR-DSP-MK3-DSP-AutoApproach}).
\item[GPIO Poff] Sets ports in point $f$ -at the end of each pulse.
\item[GPIO Preset] Sets ports in point $g$ - at the end of each pulse set.
\item[GPIO XY-scan] Sets ports while scanning.
\item[GPIO tmp1,2] Sets ports while switching mode.
\item[GPIO direction] Sets ports as input or output pin. Logical 1 means output.
\item[GPIO delay] Sets time delay $d$.
\end{description}

\GxsmNote{All previous settings (except GPIO delay) must be set in hexadecimal format.}

Autoapproach is stopped, when measured signal reaches setpoint value. This value is set in SR DSP Control window (SCurrent value).

\GxsmGraphic{SR-DSP-MK3-DSP-AutoApproach}{0.5}{Autoapproach signals. $Z_s$ is scannig signal in Z axis.}

In all tabs there is possible to set number of pulses in each step (input field \GxsmEntry{Max. Steps}).
In the Fig.~\ref{fig:SR-DSP-MK3-DSP-AutoApproach}, it is marked with letter $a$. Length of each step ($c$) is determined by input field \GxsmEntry{Duration}.

%% OptPlugInSubSection: Stepper motor tab
%
%This tab is used for control macro approach, which can be realised by stepper motor. 
%Approach motor is controlled by pulses on GPIO ports (in the Fig.~\ref{fig:screenshot:stepperMotorPulses})
%
%There are used these three signals:
%
%\begin{description}
%\item[Enable] Turn on the stepper motor. If is set to 0, no current is flowing (it can rotate freely).
%\item[Direction] Sets direction of motor rotation. If is set to 1, it will rotate CCW.
%\item[Clock] Each pulse means one step.
%\end{description}
%
%\GxsmScreenShot{stepperMotorPulses}{Pulses used for control of stepper motor.}
%\GxsmScreenShot{SR-DSP-Mover-StepperMotor}{Stepper motor control tab.}
%It is also possible, besides the manual mode, use the automatic approach. 
%
%\GxsmHint{Beware:MK2-A810 operates with 3.3V logic!}
%
%\GxsmNote{For easy stepper motor control via MK2/MK3Pro-A810 use stepper motor controller L297.}
%
%\clearpage

\subsection{SR-DSP Phase/Amplitude Convergent Detector (PAC) Control}

\label{pi:A810-PAC}
GXSM with the SRanger MK3-Pro Phase/Amplitude Convergent Detector.... (PLL).


\clearpage

\subsubsection{Usage}

Set the \GxsmPref{Hardware}{Card} to ''SRangerMK2:SPM''.

\GxsmNote{
The MK2 has to be programmed (Flashed) with the DSP software\\
\filename{/SRanger/TiCC-project-files/MK2-A810\_FB\_spmcontrol/FB\_spmcontrol.out}\\
using the manufacturer supplied tools before it can be used with \Gxsm.
Power cycle the MK2 after flashing and before plugging into the Linux system.
}

\subsection{Setup -- Gxsm Configurations for the MK2-A810.}

\label{A810-gxsm-pref}
Quick sample reference for the MK2-A810 specific \Gxsm preferences.
\GxsmScreenShotDual{A810-PrefHardware}{MK2-A810 Hardware selection and device path setup.}{A810-PrefInstSPM}{Instrument configuration}
\GxsmScreenShotDualN{A810-PrefDataAq-1}{Data Acquisition Channel configuration: Data Sources}{A810-PrefDataAq-2}{}
\GxsmScreenShotDualN{A810-PrefDataAq-3}{Data Acquisition Channel configuration, more.}{A810-PrefDataAq-4}{}
\clearpage

\subsection{Sample STS IV,dIdV}

\label{A810-sts-IV-demo}
Quick screen shot for a STS setup for taking IV and dIdV data at a point (current ti position).
Example taken with home build Besocke style STM at room temperature, real data here!
\GxsmScreenShotDual{A810-DSP-Control-STS-demo-IVdIdV}{STS Setup for IV and dIdV}{A810-DSP-Control-STS-LCK-demo-IVdIdV}{Lock-In configuration used}
\GxsmScreenShotDual{A810-DSP-Control-STS-Graphs-demo-IVdIdV}{Data channel selection and graphing configuration for this STS probe}{A810-DSP-Control-STS-demo-IVdIdV-data}{Plot of the resulting data taking.}
\clearpage

\subsection{Sample STS along line demo setup}

\label{A810-sts-demo}
Quick screen shot for a STS setup along a line. Gxsm in self test configuration.
\GxsmScreenShotDual{A810-DSP-Control-STS-demo}{STS Setup}{A810-DSP-Control-STS-demo-graph}{Plotted Graphs}
\GxsmScreenShot{A810-DSP-Control-STS-demo-plot}{Scan with markers}
\clearpage


\subsection{Signal Ranger MK3-Pro-A810/PLL Additional Features Guide}

\index{Signal Ranger MK3-Pro/PLL}
\index{Signal Ranger MK3}
\label{SR-Mark3}

\subsubsection{Introduction to a Open Signal Scheme}


Adding more real time flexibility and the need to access even
more data channels/signals -- to manage a huge expansion of the ``signal
space''. See also the development background story about all this up front
in the \Gxsm\ preface \ref{pre-signalrevolution}.

Signals on the DSP are simply speaking just variables. Therefore, 
it is easy to maniplate them by connecting them to different 
source channels (i.e. ADC0-ADC7) or output channels
(i.e. DAC0-DAC7). In this view, they are ``hot plug-able'' like a 
physical wire in your rack. They can be pulled from one 
connector and plug into another. But be aware, you have to know
what you do. Secure the tip before trying new connections! Got me?

\GxsmScreenShotS{signal-graph}{Signal Graph for typical STM operation, as created by the tool and graphviz from the actual life DSP configuration.}{0.13}

A typical STM configuration will look like the mostly default
configuration as shown in Fig.~\ref{fig:screenshot:signal-graph}. This life signal
visualization is provided via the configuration application. Use the
xdot viewer (the configuration application attempts to launch xdot for
you automatically, if not present nothing will happen and only a
signal\_graph.dot and .svg output files are created.  of better
viewing, zooming and signal highlighting.

\GxsmWarning{Please acknowledge and understand this message as you
work with the ``Signal Monitor'' and ``Patch Rack'' tools: Due to
the nature of a parallel execution of programs or multitasking on
the host side and the graceful management of multiple processes
talking to the DSP (MK3-Pro here) at the same time there can be
``race'' conditions occur under certain circumstances accessing the
same DSP resources from two or more processes at the same
time. While it's guaranteed every process is receiving one completed
data read/write access package of any size, so it can not be
guaranteed that per process consecutive requests are consecutive for
the DSP as any other processes request may be served at any time in
between. This poses normally and per design no problem as long as
different processes request/operate on independent DSP resources or
tasks.\\ Now you must understand in this special case of the signal
management the actual signal configuration of any signal can be
requested and in a consecutive request read back as result.  Both,
\Gxsmx and the SPM configuration script are making use of this at
times and it's as of now the users responsibility to not run the
script's ``Signal Monitor'' or ``Patch Rack'' at the same time as
\Gxsmx will make signal configuration read back requests. You must
terminate (or at least temporary stop) any other signal requesting
script/process at the following times when \Gxsmx makes signal read
back requests: When \Gxsmx start up, Scan Start and Probe
Start/Graphs Plot Refreshes. In general don't run any not necessary
scripts, but for sure you may want to run the script to make
adjustments at initial system configuration/setup or tests or just
to monitor signals via the Recorder (Signal Oscilloscope) or run a
frequency/PLL tune -- this all is perfectly fine. It is not
sufficient to close the ``Patch Rack'' or ``Monitor'' Window as this
is only hiding the window, not destroying the tasks behind it. The
``background task'' requesting signals are installed at 1st time
opening the window for the ``Monitor'' or ``Patch Rack''. In future
this problem may be controlled via spin-locks, but as of now this is
a not essential overhead of USB communications.}

\clearpage

\subsubsection{Getting Started}

Prerequisites: Having build and installed the latest code including a
updated DSP MK3. Locate the configuration application (python script)
in the \Gxsmx source code tree. Also you may want to have the dot file
viewer ``xdot'' installed for convenient automatic viewing of the
signal configuration with important signal highlighting ability. As
those graphs may have many possibly overlapping signals.



\subsubsection{Signal Monitoring and Configuration}

\index{Signal Ranger MK3 Signals}
The python application suite shown in Fig.~\ref{fig:screenshot:MK3-spm-configurator-apps}

\filename{plug-ins/hard/MK3-A810\_spmcontrol/python\_scripts/mk3\_spm\_configurator.py}

provides monitoring and configuration tools including the PLL tune
application and step response test tools not directly provided via the
\Gxsmx GUI itself.

\GxsmScreenShotS{MK3-spm-configurator-apps}{SPM Configurator Python Apps}{0.2}

The actual readings of the two banks of each 8 AD and DA converters
provided by the A810 expansion board can be monitored via the A810
AD/DA Monitor App as shown in Fig.~\ref{fig:screenshot:MK3-spm-configurator-A810-mon}.
\GxsmScreenShotS{MK3-spm-configurator-A810-mon}{A810 AD/DA
Monitor}{0.2}

A subset of all signals can be configured via the Signal-Monitor for
watching. In general for testing and debugging any signal can be
selected at any monitor slot as shown in
Fig.~\ref{fig:screenshot:MK3-spm-configurator-2-signal-mon}. But for normal operation
\Gxsmx and als the SmartPiezoDrive (see \ref{sec:SPD}) are
automatically assigning Signal for efficient monitoring use and
without in depth knowledge those shall not be altered after \Gxsmx
start up.  

{
\tiny
\ctable[
caption={MK3 DSP Signal Description},
label={tab:DSPsignals},
botcap, % caption below table
sideways % This rotates the table
]{|l|r|l|l|c|p{3cm}|l|p{5cm}|}{}{
\hline
Type & Dim & DSP Variable & Signal Name & Unit & Conversion Factor & Module & Signal Description \\ \hline \hline
SI32 & 1 & analog.in[0] &  In 0 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT1 \\
SI32 & 1 & analog.in[1] &  In 1 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT2 \\
SI32 & 1 & analog.in[2] &  In 2 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT3 \\
SI32 & 1 & analog.in[3] &  In 3 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT4 \\
SI32 & 1 & analog.in[4] &  In 4 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT5 \\
SI32 & 1 & analog.in[5] &  In 5 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT6 \\
SI32 & 1 & analog.in[6] &  In 6 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT7 \\
SI32 & 1 & analog.in[7] &  In 7 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_IN &  ADC INPUT8 \\
SI32 & 1 & analog.counter[0] &  Counter 0 &  CNT &  1 &  Counter &  FPGA based Counter Channel 1 \\
SI32 & 1 & analog.counter[1] &  Counter 1 &  CNT &  1 &  Counter &  FPGA based Counter Channel 2 \\
SI32 & 1 & probe.LockIn\_0A &      LockIn A-0 &    *V &    DSP32Qs15dot16TO\_Volt &  LockIn &  LockIn A 0 (average over full periods) \\
SI32 & 1 & probe.LockIn\_1stA &    LockIn A-1st &  *dV &   DSP32Qs15dot16TO\_Volt &  LockIn &  LockIn A 1st order \\
SI32 & 1 & probe.LockIn\_2ndA &    LockIn A-2nd &  *ddV &  DSP32Qs15dot16TO\_Volt &  LockIn &  LockIn A 2nd oder \\
SI32 & 1 & probe.LockIn\_0B &      LockIn B-0 &    *V &    DSP32Qs15dot16TO\_Volt &  LockIn &  LockIn B 0 (average over full periods) \\
SI32 & 1 & probe.LockIn\_1stB &    LockIn B-1st &  *dV &   DSP32Qs15dot16TO\_Volt &  LockIn &  LockIn B 1st order \\
SI32 & 1 & probe.LockIn\_2ndB &    LockIn B-2nd &  *ddV &  DSP32Qs15dot16TO\_Volt &  LockIn &  LockIn B 2nd order \\
SI32 & 1 & probe.LockIn\_ref &     LockIn Ref &     V &    DSP32Qs15dot0TO\_Volt &   LockIn &  LockIn Reference Sinewave (Modulation) (Internal Reference Signal) \\
SI32 & 1 & probe.PRB\_ACPhaseA32 & LockIn Phase A & deg &  180./(2913*CPN(16)) &    LockIn &  DSP internal LockIn PhaseA32 watch \\
SI32 & 1 & InputFiltered &   PLL Res Out &      V &                   10./CPN(22) &  PAC &  Resonator Output Signal \\
SI32 & 1 & SineOut0 &        PLL Exci Signal &  V &                   10./CPN(22) &  PAC &  Excitation Signal \\
SI32 & 1 & phase &           PLL Res Ph &      deg &          180./(CPN(22)*M\_PI) &  PAC &  Resonator Phase (no LP filter) \\
SI32 & 1 & PI\_Phase\_Out &    PLL Exci Frq &     Hz &  (150000./(CPN(29)*2.*M\_PI)) &  PAC &  Excitation Freq. (no LP filter) \\
SI32 & 1 & amp\_estimation &  PLL Res Amp &      V &                   10./CPN(22) &  PAC &  Resonator Amp. (no LP filter) \\
SI32 & 1 & volumeSine &      PLL Exci Amp &     V &                   10./CPN(22) &  PAC &  Excitation Amp. (no LP filter) \\
SI32 & 1 & Filter64Out[0] &  PLL Exci Frq LP &  Hz &  (150000./(CPN(29)*2.*M\_PI)) &  PAC &  Excitation Freq. (with LP filter) \\
SI32 & 1 & Filter64Out[1] &  PLL Res Ph LP &   deg &        (180./(CPN(29)*M\_PI)) &  PAC &  Resonator Phase (with LP filter) \\
SI32 & 1 & Filter64Out[2] &  PLL Res Amp LP &   V &               (10./(CPN(29))) &  PAC &  Resonator Ampl. (with LP filter) \\
SI32 & 1 & Filter64Out[3] &  PLL Exci Amp LP &  V &               (10./(CPN(29))) &  PAC &  Excitation Ampl. (with LP filter) \\
SI32 & 1 & feedback\_mixer.FB\_IN\_processed[0] &  MIX IN 0 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 0 processed input signal \\
SI32 & 1 & feedback\_mixer.FB\_IN\_processed[1] &  MIX IN 1 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 1 processed input signal \\
SI32 & 1 & feedback\_mixer.FB\_IN\_processed[2] &  MIX IN 2 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 2 processed input signal \\
SI32 & 1 & feedback\_mixer.FB\_IN\_processed[3] &  MIX IN 3 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 3 processed input signal \\
SI32 & 1 & feedback\_mixer.channel[0] &  MIX OUT 0 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 0 output signal \\
SI32 & 1 & feedback\_mixer.channel[1] &  MIX OUT 1 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 1 output signal \\
SI32 & 1 & feedback\_mixer.channel[2] &  MIX OUT 2 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 2 output signal \\
SI32 & 1 & feedback\_mixer.channel[3] &  MIX OUT 3 &  V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Channel 3 output signal \\
SI32 & 1 & feedback\_mixer.delta &  MIX out delta &       V &  DSP32Qs23dot8TO\_Volt &  Mixer &  Mixer Processed Summed Error Signal (Delta) (Z-Servo Input normally) \\
SI32 & 1 & feedback\_mixer.q\_factor15 & MIX0 qfac15 LP &   Q &        (1/(CPN(15))) &  Mixer &  Mixer Channel 0 actuall life IIR cutoff watch: q LP fg; f in Hz via: (-log (qf15 / 32767.) / (2.*M\_PI/75000.)) \\
SI32 & 1 & analog.avg\_signal &   signal AVG-256 &  V &    DSP32Qs15dot0TO\_Volt/256. &  RMS &  Averaged signal from Analog AVG module \\
SI32 & 1 & analog.rms\_signal &   signal RMS-256 &  V$^2$ & (DSP32Qs15dot0TO\_Volt *DSP32Qs15dot0TO\_Volt/256.) &  RMS &  RMS signal from Analog AVG module \\
SI32 & 1 & z\_servo.control &     Z Servo &       V &  DSP32Qs15dot16TO\_Volt &  Z\_Servo &  Z-Servo output \\
SI32 & 1 & z\_servo.neg\_control & Z Servo Neg &   V &  DSP32Qs15dot16TO\_Volt &  Z\_Servo &  -Z-Servo output \\
SI32 & 1 & z\_servo.watch &       Z Servo Watch &  B &                   1 &  Z\_Servo &  Z-Servo status (boolean) \\
SI32 & 1 & m\_servo.control &     M Servo &       V &  DSP32Qs15dot16TO\_Volt &  M\_Servo &  M-Servo output \\
SI32 & 1 & m\_servo.neg\_control & M Servo Neg &   V &  DSP32Qs15dot16TO\_Volt &  M\_Servo &  -M-Servo output \\
SI32 & 1 & m\_servo.watch &       M Servo Watch &  B &                   1 &  M\_Servo &  M-Servo statuis (boolean) \\
\hline
}}

{
\tiny
\ctable[
caption={MK3 DSP Signal Description continued},
label={tab:DSPsignalscont},
botcap, % caption below table
sideways % This rotates the table
]{|l|r|l|l|c|p{3cm}|l|p{5cm}|}{}{
\hline
Type & Dim & DSP Variable & Signal Name & Unit & Conversion Factor & Module & Signal Description \\ \hline \hline
SI32 & 1 & probe.Upos &  VP Bias &   V &  DSP32Qs15dot16TO\_Volt &  VP &  Bias after VP manipulations \\
SI32 & 1 & probe.Zpos &  VP Z pos &  V &  DSP32Qs15dot16TO\_Volt &  VP &  temp Z offset generated by VP program \\
SI32 & 1 & scan.xyz\_vec[i\_X] &  X Scan &            V &  DSP32Qs15dot16TO\_Volt &  Scan &  Scan generator: X-Scan signal \\
SI32 & 1 & scan.xyz\_vec[i\_Y] &  Y Scan &            V &  DSP32Qs15dot16TO\_Volt &  Scan &  Scan generator: Y-Scan signal \\
SI32 & 1 & scan.xyz\_vec[i\_Z] &  Z Scan &            V &  DSP32Qs15dot16TO\_Volt &  Scan &  Scan generator: Z-Scan signal (**unused) \\
SI32 & 1 & scan.xy\_r\_vec[i\_X] &  X Scan Rot &       V &  DSP32Qs15dot16TO\_Volt &  Scan &  final X-Scan signal in rotated coordinates \\
SI32 & 1 & scan.xy\_r\_vec[i\_Y] &  Y Scan Rot &       V &  DSP32Qs15dot16TO\_Volt &  Scan &  final Y-Scan signal in rotated coordinates \\
SI32 & 1 & scan.z\_offset\_xyslope &  Z Offset from XY Slope &       V &  DSP32Qs15dot16TO\_Volt &  Scan &  Scan generator: Z-offset generated by slop compensation calculation (integrative) \\
SI32 & 1 & scan.xyz\_gain &      XYZ Scan Gain &     X &                      1 &  Scan &  XYZ Scan Gains: bitcoded -/8/8/8 (0..255)x -- 10x all: 0x000a0a0a \\
SI32 & 1 & move.xyz\_vec[i\_X] &  X Offset &          V &  DSP32Qs15dot16TO\_Volt &  Scan &  Offset Move generator: X-Offset signal \\
SI32 & 1 & move.xyz\_vec[i\_Y] &  Y Offset &          V &  DSP32Qs15dot16TO\_Volt &  Scan &  Offset Move generator: Y-Offset signal \\
SI32 & 1 & move.xyz\_vec[i\_Z] &  Z Offset &          V &  DSP32Qs15dot16TO\_Volt &  Scan &  Offset Move generator: Z-Offset signal \\
SI32 & 1 & move.xyz\_gain &      XYZ Offset Gains &  X &                      1 &  Scan &  XYZ Offset Gains: bitcoded -/8/8/8 (0..255)x -- not yet used and fixed set to 10x (0x000a0a0a) \\
SI32 & 1 & analog.wave[0] &  Wave X &  V &  DSP32Qs15dot0TO\_Volt &  Coarse &  Wave generator: Wave-X (coarse motions) \\
SI32 & 1 & analog.wave[1] &  Wave Y &  V &  DSP32Qs15dot0TO\_Volt &  Coarse &  Wave generator: Wave-Y (coarse motions) \\
SI32 & 1 & autoapp.count\_axis[0] &  Count Axis 0 &  1 &      1 &  Coarse &  Coarse Step Counter Axis 0 (X) \\
SI32 & 1 & autoapp.count\_axis[1] &  Count Axis 1 &  1 &      1 &  Coarse &  Coarse Step Counter Axis 1 (Y) \\
SI32 & 1 & autoapp.count\_axis[2] &  Count Axis 2 &  1 &      1 &  Coarse &  Coarse Step Counter Axis 2 (Z) \\
SI32 & 1 & analog.bias &         Bias &         V &  DSP32Qs15dot16TO\_Volt &  Control &  DSP Bias Voltage reference following smoothly the Bias Adjuster \\
SI32 & 1 & analog.bias\_adjust &  Bias Adjust &  V &  DSP32Qs15dot16TO\_Volt &  Control &  Bias Adjuster (Bias Voltage) setpoint given by user interface \\
SI32 & 1 & analog.motor &        Motor &        V &  DSP32Qs15dot16TO\_Volt &  Control &  Motor Voltage (auxillary output shared with PLL excitiation if PAC processing is enabled!) \\
SI32 & 1 & analog.noise &        Noise &         1 &                   1 &  Control &  White Noise Generator \\
SI32 & 1 & analog.vnull &        Null-Signal &   0 &                   1 &  Control &  Null Signal used to fix any module input at Zero \\
SI32 & 1 & probe.AC\_amp &        AC Ampl &      V &   DSP32Qs15dot0TO\_Volt &  Control &  AC Amplitude Control for Bias modulation \\
SI32 & 1 & probe.AC\_amp\_aux &    AC Ampl Aux &  V &   DSP32Qs15dot0TO\_Volt &  Control &  AC Amplitude Control (auxillary channel or as default used for Z modulation) \\
SI32 & 1 & probe.noise\_amp &     Noise Ampl &   V &   DSP32Qs15dot0TO\_Volt &  Control &  Noise Amplitiude Control \\
SI32 & 1 & probe.state &         LockIn State &   X &                  1 &  Control &  LockIn Status watch \\
SI32 & 1 & state.DSP\_time &  TIME TICKS &  s &  1./150000. &  DSP &  DSP TIME TICKS: real time DSP time based on 150kHz data processing loop for one tick. 32bit free running \\
SI32 & 1 & feedback\_mixer.iir\_signal[0] &  IIR32 0 &  V &  DSP32Qs15dot16TO\_Volt &  DBGX\_Mixer &  Mixer processed input tap 0 32bit \\
SI32 & 1 & feedback\_mixer.iir\_signal[1] &  IIR32 1 &  V &  DSP32Qs15dot16TO\_Volt &  DBGX\_Mixer &  Mixer processed input tap 1 32bit \\
SI32 & 1 & feedback\_mixer.iir\_signal[2] &  IIR32 2 &  V &  DSP32Qs15dot16TO\_Volt &  DBGX\_Mixer &  Mixer processed input tap 2 32bit \\
SI32 & 1 & feedback\_mixer.iir\_signal[3] &  IIR32 3 &  V &  DSP32Qs15dot16TO\_Volt &  DBGX\_Mixer &  Mixer processed input tap 3 32bit \\
\hline
}}

{
\tiny
\ctable[
caption={ MK3 DSP Signal Description continued. With \newline
{\small DSP32Qs15dot0TO\_Volt } := {$10/32767$}, \newline
{\small DSP32Qs23dot8TO\_Volt } := {$10/(32767 * 2^8)$}, \newline
{\small DSP32Qs15dot16TO\_Volt} := {$10/(32767 * 2^{16})$}\ and \newline
{\small CPN(N) } := $2^N-1$
},
label={tab:DSPsignalscontcont},
botcap, % caption below table
sideways % This rotates the table
]{|l|r|l|l|c|p{3cm}|l|p{5cm}|}{}{
\hline
Type & Dim & DSP Variable & Signal Name & Unit & Conversion Factor & Module & Signal Description \\ \hline \hline
SI32 & 1 & analog.out[0].s &  Out 0 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 1 \\
SI32 & 1 & analog.out[1].s &  Out 1 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 2 \\
SI32 & 1 & analog.out[2].s &  Out 2 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 3 \\
SI32 & 1 & analog.out[3].s &  Out 3 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 4 \\
SI32 & 1 & analog.out[4].s &  Out 4 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 5 \\
SI32 & 1 & analog.out[5].s &  Out 5 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 6 \\
SI32 & 1 & analog.out[6].s &  Out 6 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 7 \\
SI32 & 1 & analog.out[7].s &  Out 7 &  V &  DSP32Qs15dot16TO\_Volt &  Analog\_OUT &  DAC OUTPUT 8 \\
SI32 & 1 & analog.out[8].s &  Wave Out 8 &  V &  DSP32Qs15dot0TO\_Volt &  Analog\_OUT &  VIRTUAL OUTPUT 8 (Wave X default) \\
SI32 & 1 & analog.out[9].s &  Wave Out 9 &  V &  DSP32Qs15dot0TO\_Volt &  Analog\_OUT &  VIRTUAL OUTPUT 9 (Wave Y default) \\
SI32 & 1 & state.mode &          State mode &       X &  1 &  Process\_Control &  DSP statmachine status \\
SI32 & 1 & move.pflg &           Move pflag &       X &  1 &  Process\_Control &  Offset Move generator process flag \\
SI32 & 1 & scan.pflg &           Scan pflag &       X &  1 &  Process\_Control &  Scan generator process flag \\
SI32 & 1 & probe.pflg &          Probe pflag &      X &  1 &  Process\_Control &  Vector Probe (VP) process flag \\
SI32 & 1 & autoapp.pflg &        AutoApp pflag &    X &  1 &  Process\_Control &  Auto Approach process flag \\
SI32 & 1 & CR\_generic\_io.pflg &  GenericIO pflag &  X &  1 &  Process\_Control &  Generic IO process flag \\
SI32 & 1 & CR\_out\_pulse.pflg &   IO Pulse pflag &   X &  1 &  Process\_Control &  IO pulse generator process flag \\
SI32 & 1 & probe.gpio\_data &     GPIO data &        X &  1 &  Process\_Control &  GPIO data-in is read via VP if GPIO READ option is enabled \\
VI32 & 64 &  VP\_sec\_end\_buffer[0] &  "VP SecV" &   "xV" &  DSP32Qs15dot16TO\_Volt &  "VP" &  "VP section data tranfer buffer vector [64 = 8X Sec + 8CH matrix] \\
\hline
}
}


{\small
\setcounter{LTchunksize}{25}
\begin{center}
\begin{longtable}{|lr|l|l|}
\caption[Module Inputs]{Module Input Definitons.} \\
%Input name and Block Start ID && Type & Input Description \\ \hline  
\endfirsthead
\endhead
\hline \multicolumn{4}{|r|}{{Continued on next page}} \\ \hline
\endfoot
\hline \hline
\endlastfoot
%
\hline Input name and Block Start ID && Type & Input Description \\ \hline  \hline
\hline \multicolumn{2}{|l|}{{DSP\_SIGNAL\_BASE\_BLOCK\_A\_ID = 0x1000}} & \multicolumn{2}{|l|}{Servo, Mixer, Inputstage, Scanmap}\\ \hline
DSP\_SIGNAL\_Z\_SERVO\_INPUT\_ID & & SI32 & Z Servo Delta \\ \hline
DSP\_SIGNAL\_M\_SERVO\_INPUT\_ID & & SI32 & Motor Servo Delta \\ \hline
DSP\_SIGNAL\_MIXER0\_INPUT\_ID  & & SI32 & Mixer CH 0 \\ \hline
DSP\_SIGNAL\_MIXER1\_INPUT\_ID  & & SI32 & Mixer CH 1 \\ \hline
DSP\_SIGNAL\_MIXER2\_INPUT\_ID  & & SI32 & Mixer CH 2 \\ \hline
DSP\_SIGNAL\_MIXER3\_INPUT\_ID  & & SI32 & Mixer CH 3 \\ \hline
DSP\_SIGNAL\_DIFF\_IN0\_ID & & SI32 & Differential IN 0 \\ \hline
DSP\_SIGNAL\_DIFF\_IN1\_ID & & SI32 & Differential IN 1 \\ \hline
DSP\_SIGNAL\_DIFF\_IN2\_ID & & SI32 & Differential IN 2 \\ \hline
DSP\_SIGNAL\_DIFF\_IN3\_ID & & SI32 & Differential IN 3 \\ \hline
DSP\_SIGNAL\_SCAN\_CHANNEL\_MAP0\_ID & & SI32 & Scan Channel Map 0 \\ \hline
DSP\_SIGNAL\_SCAN\_CHANNEL\_MAP1\_ID & & SI32 & Scan Channel Map 1 \\ \hline
DSP\_SIGNAL\_SCAN\_CHANNEL\_MAP2\_ID & & SI32 & Scan Channel Map 2 \\ \hline
DSP\_SIGNAL\_SCAN\_CHANNEL\_MAP3\_ID & & SI32 & Scan Channel Map 3 \\ \hline
%
\hline \multicolumn{2}{|l|}{{DSP\_SIGNAL\_BASE\_BLOCK\_B\_ID = 0x2000}} &  \multicolumn{2}{|l|}{Vector Probe/LockIn Module} \\ \hline
DSP\_SIGNAL\_LOCKIN\_A\_INPUT\_ID & & SI32 & Lock-In Ch-A \\ \hline
DSP\_SIGNAL\_LOCKIN\_B\_INPUT\_ID & & SI32 & Lock-In Ch-B \\ \hline
DSP\_SIGNAL\_VECPROBE0\_INPUT\_ID & & SI32 & VP Source Signal, 32bit, no oversampling \\ \hline
DSP\_SIGNAL\_VECPROBE1\_INPUT\_ID & & SI32 & VP Source Signal, 32bit, no oversampling \\ \hline
DSP\_SIGNAL\_VECPROBE2\_INPUT\_ID & & SI32 & VP Source Signal, 32bit, no oversampling \\ \hline
DSP\_SIGNAL\_VECPROBE3\_INPUT\_ID & & SI32 & VP Source Signal, 32bit, no oversampling \\ \hline
DSP\_SIGNAL\_VECPROBE0\_CONTROL\_ID & & SI32 & VP Control Signal (modified by VP) \\ \hline
DSP\_SIGNAL\_VECPROBE1\_CONTROL\_ID & & SI32 & VP Control Signal (modified by VP) \\ \hline
DSP\_SIGNAL\_VECPROBE2\_CONTROL\_ID & & SI32 & VP Control Signal (modified by VP) \\ \hline
DSP\_SIGNAL\_VECPROBE3\_CONTROL\_ID & & SI32 & VP Control Signal (modified by VP) \\ \hline
DSP\_SIGNAL\_VECPROBE\_TRIGGER\_SIGNAL\_ID & & SI32 & VP Trigger Control Signal Input \\ \hline
%
\hline \multicolumn{2}{|l|}{{DSP\_SIGNAL\_BASE\_BLOCK\_C\_ID = 0x3000}} &  \multicolumn{2}{|l|}{Output Signal Mixer Stage 8x + 2 Virtual} \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH0\dots7\_INPUT\_ID & & SI32 & OUTPUT CH0\dots7 Source \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH0\dots7\_ADD\_A\_INPUT\_ID & & SI32 & A Signal to add \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH0\dots7\_SUB\_B\_INPUT\_ID & & SI32 & B Signal to subtract \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH0\dots7\_SMAC\_A\_INPUT\_ID & & SI32 & if set: gain for A Signal \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH0\dots7\_SMAC\_B\_INPUT\_ID & & SI32 & if set: gain for B Signal to add \\ \hline \hline
%
DSP\_SIGNAL\_OUTMIX\_CH8\_INPUT\_ID & & SI32 & Coarse Wave Signal selection \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH8\_ADD\_A\_INPUT\_ID & & SI32 & Signal to add \\ \hline \hline
DSP\_SIGNAL\_OUTMIX\_CH9\_INPUT\_ID & & SI32 & Coarse Wave Signal selection \\ \hline
DSP\_SIGNAL\_OUTMIX\_CH9\_ADD\_A\_INPUT\_ID & & SI32 & Signal to add \\ \hline
%
\hline \multicolumn{2}{|l|}{{DSP\_SIGNAL\_BASE\_BLOCK\_D\_ID = 0x4000}} &  \multicolumn{2}{|l|}{Recorder and AVG/RMS Modules} \\ \hline
DSP\_SIGNAL\_ANALOG\_AVG\_INPUT\_ID & & SI32 & Source for AVG/RMS Module \\ \hline
DSP\_SIGNAL\_SCOPE\_SIGNAL1\_INPUT\_ID & & SI32 & Recorder/Scope Input 1 \\ \hline
DSP\_SIGNAL\_SCOPE\_SIGNAL2\_INPUT\_ID & & SI32 & Recorder/Scopt Input 2 \\ \hline
%
\end{longtable}
\end{center}
}


\GxsmWarning{Reassigning Monitoring signals while normal Gxsm
operation may result in wrong signal reading in the PanView and may
corrupt the Gxsm-SmartPiezoDrive Link.}

The Signal Monitor also allows to visualize Signals in a Galvanometer
style for a better visual on changing readings as shown in Figs.~
\ref{fig:screenshot:MK3-spm-configurator-2-signal-mon-meter} and
\ref{fig:screenshot:MK3-spm-configurator-2-signal-mon-meter-rangefix}.

\GxsmNote{The more gizmos you watch via Galvos or the scope, the more
CPU time and USB bandwidth is utilized due to rapid refresh rates.
This is normally no problem unless a high data throughput is requested
for scanning or spectroscopy. It is advisable for normal operation
to minimize or best not run any of the configurator scripts while
taking data.}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-mon}{Signal Monitor}{0.2}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-mon-meter}{Signal Monitor with Meter}{0.2}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-mon-meter-rangefix}{Signal Monitor with Meter and full scale range override}{0.2}

\clearpage



\subsubsection{Signal Patching / Configuration}


To configure your own very custom SPM you may completely reroute any
of the ``red'' signals (or make use of generic unutilized signals and
inputs).  For this purpose use the Patch Rack application shown in
Figs.~\ref{fig:screenshot:MK3-spm-configurator-2-signal-patchrack1},
\ref{fig:screenshot:MK3-spm-configurator-2-signal-patchrack2}, and
\ref{fig:screenshot:MK3-spm-configurator-2-signal-patchrack3}.

Here you are the master and have to make sure thinks add up right. The
Signal Monitor will be of great use to verify the functions.

\GxsmNote{Note to author: Need to add notes on signal precisions, etc.}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-patchrack1}{Signal Patchrack}{0.2}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-patchrack2}{Signal Patchrack}{0.2}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-patchrack3}{Signal Patchrack}{0.2}

When satisfied with the signal configuration the Signal Manager
application (Fig.~\ref{fig:screenshot:MK3-spm-configurator-2-signal-manager})
allows to store the current life configuration to the MK3's FLASH
memory. It will be automatically reloaded on any later DSP power-up.
However, DSP software upgrades may include a modified signal table, in
this case always the ``Gxsm-MK2-like'' build in default initialization
will be loaded and the (old) FLASH configuration will be ignored as
the configuration table includes a signal revision control mechanism
to prevent future problems with new or eventually non existent
signals.  The ``Gxsm-MK2-like'' default configuration can be reloaded
at any time:
\begin{description}
\item[REVERT TO POWER UP DEFAULTS] This actually loads the pre
defined ``Gxsm-MK2-like'' build in defaults configuration.
\item[STORE TO FLASH] This stores the current signal configuration to flash.
\item[RESTORE FROM FLASH] This attempts to restore a signal
configuration from flash if a valid flash table exists and the
revision is compatible with the DSP code revision. Reflashing the DSP
code does NOT alter the signal configuration table and depending on
what is new the configuration will be in most cases still be
usable. Only if the signal or input descriptions have changed it
will fail -- nothing will be changed in this case. You can just
watch the configuration via the Patch Rack or compare the Signal
Graphs.
\item[ERASE (INVALIDATE) FLASH TABLE] This simply deletes any stored
signal configuration and thus invalidates the table. It does not
change the current configuration, but the next DSP power cycle will
obviously end up with the default configuration.
\end{description}

\GxsmHint{Advise: keep a human readable printout of your
configuration. The list on the terminal, a few screen shots as shown
here and may be also the signal graph.}

\GxsmNote{Notes to author: It is surely possible to save configuration
to a file on disk for later restore, but this is not yet
implemented.}

\GxsmScreenShotS{MK3-spm-configurator-2-signal-manager}{Signal
Manager/Flash Configurator. Please note, here are additional FLASH
test/debugging controls visible which will be excluded per default
soon.}{0.2}
\clearpage



\subsubsection{Vizualization of the current Signal Configuration}


The ``Create Signal Graph'' application inspects the current DSP
configuration, checks for errors and generates via the GraphViz tool a
dot file and a svg presentation of the configuration as shown in
Fig.~\ref{fig:screenshot:signal-graph}. This app writes a dot and svg file. It
attempts to launch xdot for viewing. This fails if xdot is not installed.

\clearpage




\subsubsection{Signal Oszilloscope}

\index{Signal Ranger MK3 Signal Scope}

\GxsmScreenShotS{MK3-spm-configurator-6-scope}{Signal Oszilloscope}{0.2}

\clearpage



\subsubsection{GXSM Signal Master Evolved and beyond}

\index{Signal Selection in GXSM} Configuring and selecting signals for
aquisition withing GXSM is not highly
flexible. Fig.~\ref{fig:screenshot:GXSM-SIGNAL-MASTER-EVOLVED} highlights the
dependencies from where signals are taken and now are dynamically set
for given slots in the channelselector source and VPsig source pull
down menus.

-- drafting --

Now full signal propagation and management via Gxsm including proper
unit and scaling support derived from signal definition table. All life,
actual settings read back from DSP at Gxsm startup and refresh at scan
start (in case of external manipulations).  Mixer channel signal
selections are now reflected by signal name in Channelselector and
also automatically used as Scan title/file name.  New are also up to 4
fully free assignable signals (32bit res.) as scan-source signal and
can be selected via the Channelselector, also automatic label
propagation and automatic resources updates for channel assignment
including units and scaling.  Along with this also new is a on
pixel/sub-grid level real time (fast) VP execute with
"end-of-VP-section" data assignment to a special 8x8 signal matrix "VP
Sec Vec64". More later about this. In general you can manipulate for
example the bias while FB hold or on, etc... in pixel level and
acquire at end of every VP section a value and assign this to a scan
channel as data source.

\GxsmScreenShotS{GXSM-SIGNAL-MASTER-EVOLVED}{Signal Master
Evolved}{0.2}

\clearpage




\subsubsection{PAC/PLL Support and Tuning with Gxsm -- Startup guidelines}

\index{Signal Ranger MK3 PAC/PLL Tuning}

Please start reading and understanding first the PLL principle of
operation, find the PLL user manual here:
\url{http://www.softdb.com/_files/_dsp_division/SPM_PLL_UsersManual.pdf}

The \Gxsm\ GUI is pretty much identical beyond a little different look
and arrangement of same control elements.  And the operation is
identical as Gxsm uses this SoftdB PAC-library and their DSP level
application interface.

For Gxsm as of now the PAC/PLL is started on channels\footnote{Channel
count convention is here 0 \dots 7.}  IN-4 (signal input) and OUT-7
(excitation) via the library call ``StartPLL(4,7);''. This implies for
all further operations that channel OUT-7 is not any more available
for any other uses, but only when the PAC processing is enabled.

\GxsmNote{About the MK3-Pro/A810-PLL and the by SoftdB provided active
miniature test oscillator PCB with two identical BNC's for input and
output: The excitation ``exec. signal input to the quartz'' side
(goes to A810 OUT-7) can be identified looking at the PCB and
finding the BNC what is connected only via R10 to the quartz (big
black block) or the BNC just next to the ON/OFF switch. The other
end connect to IN-4.}

\GxsmNote{Simple alternative to the active oscillator: you can actually
just get a simple passive ``watch'' quartz with $32.768$ kHz and
hook it it directly inbetween OUT-7 and IN-4. Hint: just mount it
inside a convenient small BNC-BNC ``filter'' box. It will work nice
with just 0.5V excitaion!}

\begin{enumerate}
\item For PAC/PLL signal monitoring select the two PLL related signals of interest
(for example the Resonator Amplitude ``PLL ResAmp'' and Phase (Frequency equivalent) ``PLL ResPh'')
to watch with the scope via the Patch Rack and assign to ``SCOPE\_SIGNAL1/2\_INPUT''.

\GxsmScreenShotS{MK3-spm-configurator-2-signal-patchrack-PLL-scope}{Example
Signal Patch Configuration for PLL view}{0.2}

\item Then select the phase detector time constant ``TauPAC'' -- set it
to 20 $\mu$s or faster.  \textbf{Referring to the PLL manual ``4.1 Phase
Detector Time Cst (s)'':} This control adjusts the time constant
of the phase detector. We suggest keeping time constant to $20 \mu$s
(fast set-up), which allows a bandwidth of about $8$ kHz. Note that
the auto-adjustment functions for the PI gains of both controllers
(amplitude and phase) automatically\footnote{This is \textbf{not} the
case for the Gxsm control and to use the auto gain adjustments
you must set TauPAC manually to 20 $\mu$s.} set the time constant
to 20us.  This way, the bandwidth of the controller is only limited
by the PI gains and the LP filter.

Any further tweaking of the time constant will prevent the auto-set
via ``Q'' from resulting in stable control loop conditions, so you
have to manually tweak those.

\item Then turn on the PAC Processing by activating the check box. Or toggle
to restart with changed time constant!

\item Operational ranges setup. This defines the range mapping and
actual sensitivities for excitation frequency, resonator phase,
excitation and resonator amplitudes.  Set the phase range to $360$
\degree ($\pm180$ \degree) for tuning (see Fig.~\ref{fig:screenshot:MK3-Gxsm-PLL-Control-op}). 
Select reasonable ranges for amplitudes matching your system needs.
\GxsmScreenShotS{MK3-Gxsm-PLL-Control-op}{PAC/PLL initial operation
boundary setup example. Time constant set to 20 $\mu$s here, PAC
processing enabled.}{0.5}

\item Check signals, manually set a estimated frequency, play manually
and check for any initial response using the monitoring option to
just read the values. Leave both FB Controllers off for now. You
should see some with frequency changing resonator response
amplitude, make sure ranges are working for you, if not, readjust.
\GxsmScreenShotS{MK3-Gxsm-PLL-Control-phase0}{PAC/PLL -- initial
manual pre-check of signals and responses.}{0.2} \clearpage

\item Now open the tune App to initiate a default sweep.
\GxsmScreenShotS{MK3-spm-configurator-7-tuneapp-initial}{PAC/PLL
Tune App -- initial run with phase reference set to zero. Here a
passive watch quartz was used.}{0.2} \clearpage

\item You may now already adjust the ``Setpoint-Phase'' to the value
the tune app detected phase at resonance. This is important as the
Phase controller works always around phase zero. And you have to
compensate via this Setpoint the phase offset. This done a
consecutive tune sweep should align the phase accordingly.
\GxsmScreenShotS{MK3-spm-configurator-7-tuneapp-phase-set}{PAC/PLL
Tune App -- frequency sweep with phase reference value was set to
initial phase at resonance as needed for phase locked loop (PLL is
always operating around phase 0). Here a passive watch quartz was
used}{0.2} \clearpage

\item Use the oscilloscope app to inspect the signals for further fine
tuning.\footnote{To be resolved issue,
currently the scope max block size/count is about 2000. Hi-level
Python issue. The DSP has storage for up to 1e6-1 value
pairs.}
\GxsmScreenShotS{MK3-spm-configurator-6-scope-PACsig}{Oscilloscope app
for viewing PLL operation. Use AC coupling for both channels so that 
you can enlarge the signals in a convient way.}{0.2}

\item Re run the tune tool with phase set to initial detected value
(relative to the initial reference set to zero! Keep in mind any
further adjustments are relative.).
\GxsmScreenShotS{MK3-Gxsm-PLL-Control-phase-set}{PAC/PLL Feedback
settings with phase reference set to initial phase at resonance
(here -73.7$\degree$).}{0.2} \clearpage

\item Enter the Q value computed by the tune app fit here to auto-set
the amplitude controller gains. Usually a good starting point.
Remember, those are only good for a phase detector time constant of
$20 \mu$s or faster as otherwise you limit the bandwidth before the
controllers! Select a reasonable amplitude setpoint, make sure the
excitation range is sufficient and turn on the amplitude controller.
\GxsmScreenShotS{MK3-Gxsm-PLL-Control-PAC-Ampl-FB}{PAC/PLL --
Amplitude FB on}{0.2}

\item Assuming the amplitude controller works you may proceed and
engage the phase controller to finally close the phase locked loop.
Just select the desired bandwidth. Then engage the controller check
box.
\GxsmScreenShotS{MK3-Gxsm-PLL-Control-PAC-ampl-phase-FB}{PAC/PLL
fully operational with both controller engaged. Amplitude
stabilized. Phase fixed.}{0.2}

\item Step Response Test Tool -- not yet completed -- need to fix
related issue with the python problem with big buffer transfers.

\end{enumerate}

\clearpage

\GxsmScreenShotS{MK3-DSP-Control-FB}{DSP Control -- Mixer, Servo}{0.2}
\index{Signal Ranger MK3 Mixer, Z-Servo}

\GxsmScreenShotS{MK3-DSP-Control-FB-w-Mservo}{DSP Control with M-Servo input configured}{0.2}
\index{Signal Ranger MK3 M-Servo}

\clearpage

Few MK3-Pro related notes on LockIn updates:

\begin{itemize}
\item Reference Sinus table length is 512 samples, MK3 LockIn operated
on full rate of $150$ kHz. Available frequencies are: $\times$ 1, 2,
4, $\dots$ 32 (all 512 $\dots$ $\frac{512}{32}$ samples per period)
$\rightarrow$ 292.968 Hz, 585.938 Hz, 1171.875 Hz, 2343.75 Hz,
4687.5 Hz, 9375.0 Hz.
\item Do not run LockIn in ``run free'' mode for Phase adjusting sweep.
\item Amplitude setting is respected in real time.
\item To change frequency in ``run free'' mode you must toggle it
on/off after chaning to re initialize. Touch frq. entry to update on
actual set frequincy.
\end{itemize}

\GxsmScreenShotS{MK3-DSP-Control-LockIn}{DSP Control -- LockIn: Free run mode enabled.}{0.5}
\index{Signal Ranger MK3 LockIn}

\clearpage


\GxsmScreenShotS{MK3-DSP-Control-LM}{DSP VP-LM -- tip forming example procedure}{0.2}

\GxsmScreenShotS{MK3-DSP-Control-Graphs-LM}{Graphs example for VP-LM}{0.2}

\clearpage

\subsection{Optional MK3-Pro-SmartPiezoDrive with Gxsm Link}

\index{Signal Ranger MK3-Smart Piezo Drive}
\index{MK3-Smart Piezo Drive}
\index{Smart Piezo Drive}
\label{sec:SPD}
The Smart Piezo Drive Linux Frontend
(Fig.~\ref{fig:screenshot:MK3-SmartPiezoDriveControl-Link}) with Gxsm-DSP
Offset-Link capability is provided via this python application:

\filename{plug-ins/hard/MK3-A810\_spmcontrol/python\_scripts/mk3\_spd\_control.py}

It communicates with the SPM contol DSP and periodically reads and
updated it's offset settings of the Link is enabled. For this the last
4 Signal Monitor slots are utilized and these signals should not be
changed when the Link is up. It automatically is setting up the Link
and Signals at startup and expects those not to be changed later.

\GxsmWarning{Beware: Later reassigning any of the last 4 Signal
Monitor slots will result in wrong offset or gain settings.}

\GxsmScreenShotS{MK3-SmartPiezoDriveControl-Link}{MK3 based Smart
Piezo Drive (HV Amplifier) Control Panel with Gxsm-Link for digital
Offset control.}{0.3}
\clearpage

%% OptPlugInSources

%% OptPlugInDest

% OptPlugInNote
Special features and behaviors to be documented here!

\index{C-PlugIn!hard/sranger\_mk2\_hwi.C}
\index{PlugIn!sranger\_mk2\_hwi}
\index{GXSM-Menu!Tools/SR-DSP Control}
\subsubsection{Info for Plug-In: Tools/SR-DSP Control }
\begin{tabbing}
Plug-In name:   \= Percy Zahlsranger\_mk2\_hwi \= Email: \= x \kill
Plug-In name:   \> sranger\_mk2\_hwi\>  File:  \> hard/sranger\_mk2\_hwi.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/hard/kmdsp_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk3_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/comedi_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi_control.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi_mover.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/innovative_dsp_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/kmdsp_hwi_control.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_mk3_hwi_pac.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/demo_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/grab_v4l.C
% ------------------------------------------------------------

\section{Video4Linux Grabber (experimental, to be ported)}
% Name=grab\_v4l
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Hardware/video4linux-HwI

\label{pi:grabv4l}
\subsubsection{Description}

This is an experimental hardware interface plugin.
Grabbing video data using the Video4Linux (v4l) device.

It's using v4l, so set Hardware/Device to the desired /dev/videoXX device!

\subsubsection{Usage}

Set the \GxsmPref{Hardware}{Card} to ''grab\_v4l''.

\subsubsection{Sources}

v4l device, i.e. (S)-Video/TV/\dots

\subsubsection{Destination}

Usual scan destination channel.

% OptPlugInNote
Experimental.

\index{C-PlugIn!hard/grab\_v4l.C}
\index{PlugIn!grab\_v4l}
\index{GXSM-Menu!Hardware/video4linux-HwI}
\subsubsection{Info for Plug-In: Hardware/video4linux-HwI }
\begin{tabbing}
Plug-In name:   \= Percy Zahlgrab\_v4l \= Email: \= x \kill
Plug-In name:   \> grab\_v4l\>  File:  \> hard/grab\_v4l.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/innovative_dsp_hwi.C
% ------------------------------------------------------------

\section{Innovative DSP Hardware Interface for PC31 and PCI32 (OBSOLETE or to be ported)}
% Name=innovative\_dsp\_hwi
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Hardware/Innovative\_DSP:SPM:SPA-HwI

\label{pi:innovativedsphwi}
\subsubsection{Description}

This provides the Innovative DSP hardware interface for GXSM.
Supported are PC31 and PCI32.

\subsubsection{Usage}

Set the \GxsmPref{Hardware}{Card} to ''Innovative\_Dsp:SPM'' or
''Innovative\_Dsp::SPA''.

%% OptPlugInSources

%% OptPlugInDest

% OptPlugInNote
This is an experimental code since GXSM2 and HwI. Use GXSM-1 (''Gxsm''
CVS branch) for a stable version.

\index{C-PlugIn!hard/innovative\_dsp\_hwi.C}
\index{PlugIn!innovative\_dsp\_hwi}
\index{GXSM-Menu!Hardware/Innovative\_DSP:SPM:SPA-HwI}
\subsubsection{Info for Plug-In: Hardware/Innovative\_DSP:SPM:SPA-HwI }
\begin{tabbing}
Plug-In name:   \= Percy Zahlinnovative\_dsp\_hwi \= Email: \= x \kill
Plug-In name:   \> innovative\_dsp\_hwi\>  File:  \> hard/innovative\_dsp\_hwi.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/hard/sranger_mk2_hwi_dev.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/sranger_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/kmdsp_hwi_spm.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/demo_hwi_dev.C
% ------------------------------------------------------------



% Subdirectory: ./plug-ins/hard/MK3-A810_spmcontrol/python3_scripts
% ------------------------------------------------------------

\chapter{Plug-Ins: hard/MK3-A810\_spmcontrol/python3\_scripts}

% PlugIn: ./plug-ins/hard/MK3-A810_spmcontrol/python3_scripts/mk3_reset.C
% ------------------------------------------------------------



% Subdirectory: ./plug-ins/hard/MK3-A810_spmcontrol/experimental_python_scripts
% ------------------------------------------------------------

\chapter{Plug-Ins: hard/MK3-A810\_spmcontrol/experimental\_python\_scripts}

% PlugIn: ./plug-ins/hard/MK3-A810_spmcontrol/experimental_python_scripts/test.C
% ------------------------------------------------------------

% PlugIn: ./plug-ins/hard/MK3-A810_spmcontrol/experimental_python_scripts/mk3_reset.C
% ------------------------------------------------------------



% Subdirectory: ./plug-ins/common
% ------------------------------------------------------------

\chapter{Plug-Ins: common}

% Inclusion of PlugInClassIntro: ./plug-ins/common/PlugInClass.doc


Here are the GXSM-2 \emph{common} type plugins. These plugins are of general
purpose such as plugin management itself, printing, data viewing and
other tasks not fitting into the following sections.

% PlugIn: ./plug-ins/common/editnc.C
% ------------------------------------------------------------

\section{View NetCDF file data}
% Name=editnc
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/NetCDF-View

\label{pi:editnc}
\subsubsection{Description}

 It shows all information stored in any NetCDF file. Huge data fields
 are truncated and only the first few values are shown.

\subsubsection{Usage}

 Call it from Tools menu and select a NetCDF file when the file open dialog is presented.

%% OptPlugInKnownBugs
%No bugs known.

\GxsmNote{
}

\index{C-PlugIn!common/editnc.C}
\index{PlugIn!editnc}
\index{GXSM-Menu!Tools/NetCDF-View}
\subsubsection{Info for Plug-In: Tools/NetCDF-View }
\begin{tabbing}
Plug-In name:   \= Percy Zahleditnc \= Email: \= x \kill
Plug-In name:   \> editnc\>  File:  \> common/editnc.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/common/listplugins.C
% ------------------------------------------------------------

\section{Show plug-in details}
% Name=listplugins
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/Plugin Details

\label{pi:listplugins}
\subsubsection{Description}

\label{plugin:listplugins}
This plugin lists all currently loaded plugins and shows all available
information about those.  In addition, it allows to call/run the About and
Configure subroutines of each plugin -- if available. 

\subsubsection{Usage}

Call it using the menu \GxsmMenu{Tools/Plugin Details}.

%% OptPlugInKnownBugs
%No known.

\index{C-PlugIn!common/listplugins.C}
\index{PlugIn!listplugins}
\index{GXSM-Menu!Tools/Plugin Details}
\subsubsection{Info for Plug-In: Tools/Plugin Details }
\begin{tabbing}
Plug-In name:   \= Percy Zahllistplugins \= Email: \= x \kill
Plug-In name:   \> listplugins\>  File:  \> common/listplugins.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/common/pyremote.C
% ------------------------------------------------------------

\section{Python remote control}
% Name=pyremote
% Author=Stefan Schr\"oder
% Email=stefan\_fkp@users.sf.net
% Menupath=Tools/Pyremote Console

\label{pi:pyremote}
\subsubsection{Description}

 This plugin is an interface to an embedded Python
 Interpreter.

\subsubsection{Usage}

 Choose Pyremote Console from the \GxsmMenu{Tools} menu to enter a
 python console. A default command script is loaded when the console
 is started for the first time, but is not executed automatically. In
 the appendix you will find a tutorial with examples and tips and
 tricks.

\subsection{Reference}


The following script shows you all commands that the gxsm-module supports:

\begin{alltt}
# list core gxsm module functions:
print dir(gxsm)

# list buildin help on functions:
for h in gxsm.help ():
	print (h)

# list all by gxsm known entry (set/get) reference names:
for h in gxsm.list_refnames ():
	print ('{} \t=>\t {}'.format(h, gxsm.get(h))) 

# list all action hooks to activate function 
# via a script triggered button press 
# or call plugin hook enabled math plugins:
for h in gxsm.list_actions ():
	print (h)
\end{alltt}

The result will look like this (with added notes):

\begin{alltt}

** gxsm python module:
['__doc__', '__loader__', '__name__', '__package__', '__spec__', 'action', 'add_layerinformation', 
'add_marker_object', 'autodisplay', 'autosave', 'autoupdate', 
'chfname', 'chmodea', 'chmodem', 'chmoden', 'chmodeno', 'chmodex', 'chview1d', 'chview2d', 'chview3d', 
'createscan', 'createscanf', 'crop', 'da0', 'direct', 'echo', 'export', 'get', 'get_data_pkt', 
'get_differentials', 'get_dimensions', 'get_geometry', 'get_object', 'get_slice', 
'get_v_lookup', 'get_x_lookup', 'get_y_lookup', 
'gets', 'help', 'import', 'list_actions', 'list_refnames', 'load', 'log', 'logev', 
'moveto_scan_xy', 'progress', 'put_data_pkt', 'quick', 'rtquery', 'save', 'save_drawing', 'saveas', 
'scaninit', 'scanline', 'scanupdate', 'scanylookup', 'set', 'set_scan_lookup', 'set_scan_unit', 
'set_v_lookup', 'set_view_indices', 'set_x_lookup', 'set_y_lookup', 'signal_emit', 'sleep', 
'startscan', 'stopscan', 'unitbz', 'unitev', 'units', 'unitvolt', 'waitscan', 'y_current']

***
(1) Gxsm3 python remote console -- gxsm.help on build in commands
 The following list shows a brief explanation of the commands, together with
 the signature (that is the type of arguments).

 '()' equals no argument. E.g. \verb+startscan()+

 '(N)' equals one Integer arument. E.g. \verb+chview1d(2)+

 '(X)' equals one Float argument. No example.

 '(S)' equals a string. Often numbers are evaluated as strings first. Like in \verb+set("RangeX", "234.12")+

 '(S,N)' equals two parameters. E.g. \verb+gnuexport("myfilename.nc", 1)+

--------------------------------------------------------------------------------
gxsm.help : List Gxsm methods: print gxsm.help ()
gxsm.set : Set Gxsm entry value, see list_refnames: gxsm.set ('refname','value as string')
gxsm.get : Get Gxsm entry as value, see list_refnames. gxsm.get ('refname')
gxsm.gets : Get Gxsm entry as string. gxsm.gets ('refname')
gxsm.list_refnames : List all available Gxsm entry refnames (Better: pointer hover over Gxsm-Entry
                     to see tooltip with ref-name). print gxsm.list_refnames ()
gxsm.action : Trigger Gxsm action (menu action or button signal), see list_actions: gxsm.action('action')
gxsm.list_actions : List all available Gxsm actions (Better: pointer hover over Gxsm-Button 
                    to see tooltip with action-name): print gxsm.list_actions ()
gxsm.rtquery : Gxsm hardware Real-Time-Query: svec[3] = gxsm.rtquery('X|Y|Z|xy|zxy|o|f|s|i|U') 
gxsm.y_current : RTQuery Current Scanline.
gxsm.moveto_scan_xy : Set tip position to Scan-XY: gxsm.moveto_scan_xy (x,y)
gxsm.createscan : Create Scan int: gxsm.createscan (ch,nx,ny,nv pixels, rx,ry in A, array.array('l', [...]), append)
gxsm.createscanf : Create Scan float: gxsm.createscan (ch,nx,ny,nv pixels, rx,ry in A, array.array('f', [...]), append)
gxsm.set_scan_unit : Set Scan X,Y,Z,L Dim Unit: gxsm.set_scan_unit (ch,'X|Y|Z|L|T','UnitId string','Label string')
gxsm.set_scan_lookup : Set Scan Lookup for Dim: gxsm.set_scan_lookup (ch,'X|Y|L',start,end)
gxsm.get_geometry : Get Scan Geometry: [rx,ry,x0,y0,alpha]=gxsm.get_geometry (ch)
gxsm.get_differentials : Get Scan Scaling: [dx,dy,dz,dl]=gxsm.get_differentials (ch)
gxsm.get_dimensions : Get Scan Dimensions: [nx,ny,nv,nt]=gxsm.get_dimensions (ch)
gxsm.get_data_pkt : Get Data Value at point: value=gxsm.get_data_pkt (ch, x, y, v, t)
gxsm.put_data_pkt : Put Data Value to point: gxsm.put_data_pkt (value, ch, x, y, v, t)
gxsm.get_slice : Get Data Slice from Scan Imagein ch, values are scaled by dz to unit: [nx,ny,array]=gxsm.get_slice (ch, v, t, yi, yn)
gxsm.get_x_lookup : Get Scan Data index to world mapping: x=gxsm.get_x_lookup (ch, i)
gxsm.get_y_lookup : Get Scan Data index to world mapping: y=gxsm.get_y_lookup (ch, i)
gxsm.get_v_lookup : Get Scan Data index to world mapping: v=gxsm.get_v_lookup (ch, i)
gxsm.set_x_lookup : Set Scan Data index to world mapping: x=gxsm.get_x_lookup (ch, i, v)
gxsm.set_y_lookup : Set Scan Data index to world mapping: y=gxsm.get_y_lookup (ch, i, v)
gxsm.set_v_lookup : Set Scan Data index to world mapping: v=gxsm.get_v_lookup (ch, i, v)
gxsm.get_object : Get Object Coordinates: [type, x,y,..]=gxsm.get_object (ch, n)
gxsm.add_marker_object : Put Marker Object at pixel coordinates or current tip pos (id='xy'|grp=-1):
                          gxsm.add_marker_object (ch, label=str|'xy', mgrp=0..5|-1, x=ix,y=iy, size=0..1)
gxsm.startscan : Start Scan.
gxsm.stopscan : Stop Scan.
gxsm.waitscan : Wait Scan. ret=gxsm.waitscan(blocking=true). ret=-1: no scan in progress, else current line index.
gxsm.scaninit : Scaninit.
gxsm.scanupdate : Scanupdate.
gxsm.scanylookup : Scanylookup.
gxsm.scanline : Scan line.
gxsm.autosave : Save: Auto Save Scans. gxsm.autosave (). Returns current scanline y index and file name(s) if scanning.
gxsm.autoupdate : Save: Auto Update Scans. gxsm.autoupdate (). Returns current scanline y index and file name(s) if scanning.
gxsm.save : Save: Auto Save Scans: gxsm.save ()
gxsm.saveas : Save File As: gxsm.saveas (ch, 'path/fname.nc')
gxsm.load : Load File: gxsm.load (ch, 'path/fname.nc')
gxsm.export : Export scan: gxsm.export (ch, 'path/fname.nc')
gxsm.import : Import scan: gxsm.import (ch, 'path/fname.nc')
gxsm.save_drawing : Save Drawing to file: gxsm.save_drawing (ch, time, layer, 'path/fname.png|pdf|svg')
gxsm.set_view_indices : Set Ch view time and layer indices: gxsm.set_view_indices (ch, time, layer)
gxsm.autodisplay : Autodisplay active channel: gxsm.autodisplay ()
gxsm.chfname : Get Ch Filename: filename = gxsm.chfname (ch)
gxsm.chmodea : Set Ch Mode to A: gxsm.chmodea (ch)
gxsm.chmodex : Set Ch Mode to X: gxsm.chmodex (ch)
gxsm.chmodem : Set Ch Mode to MATH: gxsm.chmodem (ch)
gxsm.chmoden : Set Ch Mode to Data Channel <X+N>: gxsm.chmoden (ch,n)
gxsm.chmodeno : Set View Mode to No: gxsm.chmodeno (ch)
gxsm.chview1d : Set View Mode to 1D: gxsm.chmode1d (ch)
gxsm.chview2d : Set View Mode to 2D: gxsm.chmode2d (ch)
gxsm.chview3d : Set View Mode to 3D: gxsm.chmode3d (ch)
gxsm.quick : Quick.
gxsm.direct : Direct.
gxsm.log : Log.
gxsm.crop : Crop (ch-src, ch-dst)
gxsm.unitbz : UnitBZ.
gxsm.unitvolt : UnitVolt.
gxsm.unitev : UniteV.
gxsm.units : UnitS.
gxsm.echo : Echo string to terminal. gxsm.echo('hello gxsm to terminal') 
gxsm.logev : Write string to Gxsm system log file and log monitor: gxsm.logev ('hello gxsm to logfile/monitor') 
gxsm.progress : Show/update gxsm progress info. fraction<0 init, 0..1 progress, >1 close: gxsm.progress ('Calculating...', fraction) 
gxsm.add_layerinformation : Add Layerinformation to active scan. gxsm.add_layerinformation('Text',ch)
gxsm.da0 : Da0. -- N/A for SRanger
gxsm.signal_emit : Action-String. 
gxsm.sleep : Sleep N/10s: gxsm.sleep (N) 
*
--------------------------------------------------------------------------------
(2) Gxsm3 python remote console -- help on reference names
  used for gxsm.set and get, gets commands.
  Hint: hover the pointer over any get/set enabled Gxsm entry to see it`s ref-name!
  Example: gxsm.set ("dsp-fbs-bias", "1.0")
--------------------------------------------------------------------------------
script-control 	=>	 0.0
TimeSelect 	=>	 0.0
Time 	=>	 1.0
LayerSelect 	=>	 0.0
Layers 	=>	 1.0
Rotation 	=>	 0.0
ScanY 	=>	 0.0
ScanX 	=>	 0.0
OffsetY 	=>	 0.0
OffsetX 	=>	 0.0
PointsY 	=>	 400.0
PointsX 	=>	 400.0
StepsY 	=>	 2.0050125313283207
StepsX 	=>	 2.0050125313283207
RangeY 	=>	 800.0
RangeX 	=>	 800.0
dsp-pac-ph-bw-set 	=>	 8000.0
dsp-pac-ph-ci-gain 	=>	 -127.2
dsp-pac-ph-cp-gain 	=>	 -61.6
dsp-pac-ph-set 	=>	 -100.0
dsp-pac-res-gain 	=>	 1.0
dsp-pac-res-q-factor 	=>	 30000.0
dsp-pac-am-bw-set 	=>	 8.0
dsp-pac-am-ci-gain 	=>	 -77.5
dsp-pac-am-cp-gain 	=>	 8.1
dsp-pac-am-set 	=>	 0.1
dsp-pac-excitation-sine-freq 	=>	 32766.4
dsp-pac-excitation-sine-amp 	=>	 0.5
dsp-pac-tau 	=>	 1.5e-05
dsp-pac-res-amp-max 	=>	 5.0
dsp-pac-res-amp-min 	=>	 0.0
dsp-pac-res-amp-range 	=>	 1.25
dsp-pac-res-amp-ref 	=>	 0.0
dsp-pac-exci-amp-max 	=>	 1.0
dsp-pac-exci-amp-min 	=>	 -0.05
dsp-pac-exci-amp-range 	=>	 0.625
dsp-pac-exci-amp-ref 	=>	 0.0
dsp-pac-res-phase-max 	=>	 180.0
dsp-pac-res-phase-min 	=>	 -180.0
dsp-pac-res-phase-range 	=>	 7.16
dsp-pac-res-phase-ref 	=>	 0.0
dsp-pac-exci-freq-max 	=>	 41000.0
dsp-pac-exci-freq-min 	=>	 29000.0
dsp-pac-exci-freq-range 	=>	 187.0
dsp-pac-exci-freq-ref 	=>	 0.0
dsp-VP-Lim-Val-Dn 	=>	 1.0
dsp-VP-Lim-Val-Up 	=>	 1.0
dsp-X-Final-Delay 	=>	 0.01
dsp-AX-GateTime 	=>	 0.001
dsp-AX-Final-Delay 	=>	 0.01
dsp-AX-Slope-Ramp 	=>	 100.0
dsp-AX-V-Slope 	=>	 100.0
dsp-AX-rep 	=>	 1.0
dsp-AX-Points 	=>	 100.0
dsp-AX-V-End 	=>	 1.0
dsp-AX-V-Start 	=>	 0.0
dsp-LCK-AC-Repetitions 	=>	 1.0
dsp-LCK-AC-Final-Delay 	=>	 0.01
dsp-LCK-AC-Slope 	=>	 12.0
dsp-LCK-AC-Points 	=>	 720.0
dsp-ALCK-C-Phase-Span 	=>	 360.0
dsp-LCK-AC-avg-Cycles 	=>	 32.0
dsp-LCK-AC-Phase-B 	=>	 90.0
dsp-LCK-AC-Phase-A 	=>	 0.0
dsp-LCK-AC-Frequency 	=>	 1171.88
dsp-LCK-AC-Z-Amp 	=>	 0.0
dsp-LCK-AC-Bias-Amp 	=>	 0.02
dsp-LCK-CORRSUM-SHR 	=>	 0.0
dsp-LCK-CORRPRD-SHR 	=>	 14.0
dsp-Noise-Amplitude 	=>	 0.0
dsp-TK-Delay 	=>	 1.0
dsp-TK-Speed 	=>	 1000.0
dsp-TK-Mode 	=>	 -1.0
dsp-TK-Reps 	=>	 100.0
dsp-TK-Nodes 	=>	 12.0
dsp-TK-Points 	=>	 10.0
dsp-TK-rad2 	=>	 0.0
dsp-TK-rad 	=>	 2.0
dsp-GVP-GPIO-Lock-57 	=>	 57.0
dsp-GVP-Final-Delay 	=>	 0.01
dsp-gvp-pcjr44 	=>	 0.0
dsp-gvp-nrep44 	=>	 0.0
dsp-gvp-data44 	=>	 0.0
dsp-gvp-n44 	=>	 0.0
dsp-gvp-dt44 	=>	 0.0
dsp-gvp-dsig44 	=>	 0.0
dsp-gvp-dz44 	=>	 0.0
dsp-gvp-dy44 	=>	 0.0
dsp-gvp-dx44 	=>	 0.0
dsp-gvp-du44 	=>	 0.0
dsp-gvp-pcjr43 	=>	 0.0
dsp-gvp-nrep43 	=>	 0.0
dsp-gvp-data43 	=>	 0.0
dsp-gvp-n43 	=>	 0.0
dsp-gvp-dt43 	=>	 0.0
dsp-gvp-dsig43 	=>	 0.0
dsp-gvp-dz43 	=>	 0.0
dsp-gvp-dy43 	=>	 0.0
dsp-gvp-dx43 	=>	 0.0
dsp-gvp-du43 	=>	 0.0
dsp-gvp-pcjr42 	=>	 0.0
dsp-gvp-nrep42 	=>	 0.0
dsp-gvp-data42 	=>	 0.0
dsp-gvp-n42 	=>	 0.0
dsp-gvp-dt42 	=>	 0.0
dsp-gvp-dsig42 	=>	 0.0
dsp-gvp-dz42 	=>	 0.0
dsp-gvp-dy42 	=>	 0.0
dsp-gvp-dx42 	=>	 0.0
dsp-gvp-du42 	=>	 0.0
dsp-gvp-pcjr41 	=>	 0.0
dsp-gvp-nrep41 	=>	 0.0
dsp-gvp-data41 	=>	 0.0
dsp-gvp-n41 	=>	 0.0
dsp-gvp-dt41 	=>	 0.0
dsp-gvp-dsig41 	=>	 0.0
dsp-gvp-dz41 	=>	 0.0
dsp-gvp-dy41 	=>	 0.0
dsp-gvp-dx41 	=>	 0.0
dsp-gvp-du41 	=>	 0.0
dsp-gvp-pcjr40 	=>	 0.0
dsp-gvp-nrep40 	=>	 0.0
dsp-gvp-data40 	=>	 0.0
dsp-gvp-n40 	=>	 0.0
dsp-gvp-dt40 	=>	 0.0
dsp-gvp-dsig40 	=>	 0.0
dsp-gvp-dz40 	=>	 0.0
dsp-gvp-dy40 	=>	 0.0
dsp-gvp-dx40 	=>	 0.0
dsp-gvp-du40 	=>	 0.0
dsp-gvp-pcjr39 	=>	 0.0
dsp-gvp-nrep39 	=>	 0.0
dsp-gvp-data39 	=>	 0.0
dsp-gvp-n39 	=>	 0.0
dsp-gvp-dt39 	=>	 0.0
dsp-gvp-dsig39 	=>	 0.0
dsp-gvp-dz39 	=>	 0.0
dsp-gvp-dy39 	=>	 0.0
dsp-gvp-dx39 	=>	 0.0
dsp-gvp-du39 	=>	 0.0
dsp-gvp-pcjr38 	=>	 0.0
dsp-gvp-nrep38 	=>	 0.0
dsp-gvp-data38 	=>	 0.0
dsp-gvp-n38 	=>	 0.0
dsp-gvp-dt38 	=>	 0.0
dsp-gvp-dsig38 	=>	 0.0
dsp-gvp-dz38 	=>	 0.0
dsp-gvp-dy38 	=>	 0.0
dsp-gvp-dx38 	=>	 0.0
dsp-gvp-du38 	=>	 0.0
dsp-gvp-pcjr37 	=>	 0.0
dsp-gvp-nrep37 	=>	 0.0
dsp-gvp-data37 	=>	 0.0
dsp-gvp-n37 	=>	 0.0
dsp-gvp-dt37 	=>	 0.0
dsp-gvp-dsig37 	=>	 0.0
dsp-gvp-dz37 	=>	 0.0
dsp-gvp-dy37 	=>	 0.0
dsp-gvp-dx37 	=>	 0.0
dsp-gvp-du37 	=>	 0.0
dsp-gvp-pcjr36 	=>	 0.0
dsp-gvp-nrep36 	=>	 0.0
dsp-gvp-data36 	=>	 0.0
dsp-gvp-n36 	=>	 0.0
dsp-gvp-dt36 	=>	 0.0
dsp-gvp-dsig36 	=>	 0.0
dsp-gvp-dz36 	=>	 0.0
dsp-gvp-dy36 	=>	 0.0
dsp-gvp-dx36 	=>	 0.0
dsp-gvp-du36 	=>	 0.0
dsp-gvp-pcjr35 	=>	 0.0
dsp-gvp-nrep35 	=>	 0.0
dsp-gvp-data35 	=>	 0.0
dsp-gvp-n35 	=>	 0.0
dsp-gvp-dt35 	=>	 0.0
dsp-gvp-dsig35 	=>	 0.0
dsp-gvp-dz35 	=>	 0.0
dsp-gvp-dy35 	=>	 0.0
dsp-gvp-dx35 	=>	 0.0
dsp-gvp-du35 	=>	 0.0
dsp-gvp-pcjr34 	=>	 0.0
dsp-gvp-nrep34 	=>	 0.0
dsp-gvp-data34 	=>	 0.0
dsp-gvp-n34 	=>	 0.0
dsp-gvp-dt34 	=>	 0.0
dsp-gvp-dsig34 	=>	 0.0
dsp-gvp-dz34 	=>	 0.0
dsp-gvp-dy34 	=>	 0.0
dsp-gvp-dx34 	=>	 0.0
dsp-gvp-du34 	=>	 0.0
dsp-gvp-pcjr33 	=>	 0.0
dsp-gvp-nrep33 	=>	 0.0
dsp-gvp-data33 	=>	 0.0
dsp-gvp-n33 	=>	 0.0
dsp-gvp-dt33 	=>	 0.0
dsp-gvp-dsig33 	=>	 0.0
dsp-gvp-dz33 	=>	 0.0
dsp-gvp-dy33 	=>	 0.0
dsp-gvp-dx33 	=>	 0.0
dsp-gvp-du33 	=>	 0.0
dsp-gvp-pcjr32 	=>	 0.0
dsp-gvp-nrep32 	=>	 0.0
dsp-gvp-data32 	=>	 0.0
dsp-gvp-n32 	=>	 0.0
dsp-gvp-dt32 	=>	 0.0
dsp-gvp-dsig32 	=>	 0.0
dsp-gvp-dz32 	=>	 0.0
dsp-gvp-dy32 	=>	 0.0
dsp-gvp-dx32 	=>	 0.0
dsp-gvp-du32 	=>	 0.0
dsp-gvp-pcjr31 	=>	 0.0
dsp-gvp-nrep31 	=>	 0.0
dsp-gvp-data31 	=>	 0.0
dsp-gvp-n31 	=>	 0.0
dsp-gvp-dt31 	=>	 0.0
dsp-gvp-dsig31 	=>	 0.0
dsp-gvp-dz31 	=>	 0.0
dsp-gvp-dy31 	=>	 0.0
dsp-gvp-dx31 	=>	 0.0
dsp-gvp-du31 	=>	 0.0
dsp-gvp-pcjr30 	=>	 0.0
dsp-gvp-nrep30 	=>	 0.0
dsp-gvp-data30 	=>	 0.0
dsp-gvp-n30 	=>	 0.0
dsp-gvp-dt30 	=>	 0.0
dsp-gvp-dsig30 	=>	 0.0
dsp-gvp-dz30 	=>	 0.0
dsp-gvp-dy30 	=>	 0.0
dsp-gvp-dx30 	=>	 0.0
dsp-gvp-du30 	=>	 0.0
dsp-gvp-pcjr29 	=>	 0.0
dsp-gvp-nrep29 	=>	 0.0
dsp-gvp-data29 	=>	 0.0
dsp-gvp-n29 	=>	 0.0
dsp-gvp-dt29 	=>	 0.0
dsp-gvp-dsig29 	=>	 0.0
dsp-gvp-dz29 	=>	 0.0
dsp-gvp-dy29 	=>	 0.0
dsp-gvp-dx29 	=>	 0.0
dsp-gvp-du29 	=>	 0.0
dsp-gvp-pcjr28 	=>	 0.0
dsp-gvp-nrep28 	=>	 0.0
dsp-gvp-data28 	=>	 0.0
dsp-gvp-n28 	=>	 0.0
dsp-gvp-dt28 	=>	 0.0
dsp-gvp-dsig28 	=>	 0.0
dsp-gvp-dz28 	=>	 0.0
dsp-gvp-dy28 	=>	 0.0
dsp-gvp-dx28 	=>	 0.0
dsp-gvp-du28 	=>	 0.0
dsp-gvp-pcjr27 	=>	 0.0
dsp-gvp-nrep27 	=>	 0.0
dsp-gvp-data27 	=>	 0.0
dsp-gvp-n27 	=>	 0.0
dsp-gvp-dt27 	=>	 0.0
dsp-gvp-dsig27 	=>	 0.0
dsp-gvp-dz27 	=>	 0.0
dsp-gvp-dy27 	=>	 0.0
dsp-gvp-dx27 	=>	 0.0
dsp-gvp-du27 	=>	 0.0
dsp-gvp-pcjr26 	=>	 0.0
dsp-gvp-nrep26 	=>	 0.0
dsp-gvp-data26 	=>	 0.0
dsp-gvp-n26 	=>	 0.0
dsp-gvp-dt26 	=>	 0.0
dsp-gvp-dsig26 	=>	 0.0
dsp-gvp-dz26 	=>	 0.0
dsp-gvp-dy26 	=>	 0.0
dsp-gvp-dx26 	=>	 0.0
dsp-gvp-du26 	=>	 0.0
dsp-gvp-pcjr25 	=>	 0.0
dsp-gvp-nrep25 	=>	 0.0
dsp-gvp-data25 	=>	 0.0
dsp-gvp-n25 	=>	 0.0
dsp-gvp-dt25 	=>	 0.0
dsp-gvp-dsig25 	=>	 0.0
dsp-gvp-dz25 	=>	 0.0
dsp-gvp-dy25 	=>	 0.0
dsp-gvp-dx25 	=>	 0.0
dsp-gvp-du25 	=>	 0.0
dsp-gvp-pcjr24 	=>	 0.0
dsp-gvp-nrep24 	=>	 0.0
dsp-gvp-data24 	=>	 0.0
dsp-gvp-n24 	=>	 0.0
dsp-gvp-dt24 	=>	 0.0
dsp-gvp-dsig24 	=>	 0.0
dsp-gvp-dz24 	=>	 0.0
dsp-gvp-dy24 	=>	 0.0
dsp-gvp-dx24 	=>	 0.0
dsp-gvp-du24 	=>	 0.0
dsp-gvp-pcjr23 	=>	 0.0
dsp-gvp-nrep23 	=>	 0.0
dsp-gvp-data23 	=>	 0.0
dsp-gvp-n23 	=>	 0.0
dsp-gvp-dt23 	=>	 0.0
dsp-gvp-dsig23 	=>	 0.0
dsp-gvp-dz23 	=>	 0.0
dsp-gvp-dy23 	=>	 0.0
dsp-gvp-dx23 	=>	 0.0
dsp-gvp-du23 	=>	 0.0
dsp-gvp-pcjr22 	=>	 0.0
dsp-gvp-nrep22 	=>	 0.0
dsp-gvp-data22 	=>	 0.0
dsp-gvp-n22 	=>	 0.0
dsp-gvp-dt22 	=>	 0.0
dsp-gvp-dsig22 	=>	 0.0
dsp-gvp-dz22 	=>	 0.0
dsp-gvp-dy22 	=>	 0.0
dsp-gvp-dx22 	=>	 0.0
dsp-gvp-du22 	=>	 0.0
dsp-gvp-pcjr21 	=>	 0.0
dsp-gvp-nrep21 	=>	 0.0
dsp-gvp-data21 	=>	 0.0
dsp-gvp-n21 	=>	 0.0
dsp-gvp-dt21 	=>	 0.0
dsp-gvp-dsig21 	=>	 0.0
dsp-gvp-dz21 	=>	 0.0
dsp-gvp-dy21 	=>	 0.0
dsp-gvp-dx21 	=>	 0.0
dsp-gvp-du21 	=>	 0.0
dsp-gvp-pcjr20 	=>	 0.0
dsp-gvp-nrep20 	=>	 0.0
dsp-gvp-data20 	=>	 0.0
dsp-gvp-n20 	=>	 0.0
dsp-gvp-dt20 	=>	 0.0
dsp-gvp-dsig20 	=>	 0.0
dsp-gvp-dz20 	=>	 0.0
dsp-gvp-dy20 	=>	 0.0
dsp-gvp-dx20 	=>	 0.0
dsp-gvp-du20 	=>	 0.0
dsp-gvp-pcjr19 	=>	 0.0
dsp-gvp-nrep19 	=>	 0.0
dsp-gvp-data19 	=>	 0.0
dsp-gvp-n19 	=>	 0.0
dsp-gvp-dt19 	=>	 0.0
dsp-gvp-dsig19 	=>	 0.0
dsp-gvp-dz19 	=>	 0.0
dsp-gvp-dy19 	=>	 0.0
dsp-gvp-dx19 	=>	 0.0
dsp-gvp-du19 	=>	 0.0
dsp-gvp-pcjr18 	=>	 0.0
dsp-gvp-nrep18 	=>	 0.0
dsp-gvp-data18 	=>	 0.0
dsp-gvp-n18 	=>	 0.0
dsp-gvp-dt18 	=>	 0.0
dsp-gvp-dsig18 	=>	 0.0
dsp-gvp-dz18 	=>	 0.0
dsp-gvp-dy18 	=>	 0.0
dsp-gvp-dx18 	=>	 0.0
dsp-gvp-du18 	=>	 0.0
dsp-gvp-pcjr17 	=>	 0.0
dsp-gvp-nrep17 	=>	 0.0
dsp-gvp-data17 	=>	 0.0
dsp-gvp-n17 	=>	 0.0
dsp-gvp-dt17 	=>	 0.0
dsp-gvp-dsig17 	=>	 0.0
dsp-gvp-dz17 	=>	 0.0
dsp-gvp-dy17 	=>	 0.0
dsp-gvp-dx17 	=>	 0.0
dsp-gvp-du17 	=>	 0.0
dsp-gvp-pcjr16 	=>	 0.0
dsp-gvp-nrep16 	=>	 0.0
dsp-gvp-data16 	=>	 0.0
dsp-gvp-n16 	=>	 0.0
dsp-gvp-dt16 	=>	 0.0
dsp-gvp-dsig16 	=>	 0.0
dsp-gvp-dz16 	=>	 0.0
dsp-gvp-dy16 	=>	 0.0
dsp-gvp-dx16 	=>	 0.0
dsp-gvp-du16 	=>	 0.0
dsp-gvp-pcjr15 	=>	 0.0
dsp-gvp-nrep15 	=>	 0.0
dsp-gvp-data15 	=>	 0.0
dsp-gvp-n15 	=>	 0.0
dsp-gvp-dt15 	=>	 0.0
dsp-gvp-dsig15 	=>	 0.0
dsp-gvp-dz15 	=>	 0.0
dsp-gvp-dy15 	=>	 0.0
dsp-gvp-dx15 	=>	 0.0
dsp-gvp-du15 	=>	 0.0
dsp-gvp-pcjr14 	=>	 0.0
dsp-gvp-nrep14 	=>	 0.0
dsp-gvp-data14 	=>	 0.0
dsp-gvp-n14 	=>	 0.0
dsp-gvp-dt14 	=>	 0.0
dsp-gvp-dsig14 	=>	 0.0
dsp-gvp-dz14 	=>	 0.0
dsp-gvp-dy14 	=>	 0.0
dsp-gvp-dx14 	=>	 0.0
dsp-gvp-du14 	=>	 0.0
dsp-gvp-pcjr13 	=>	 0.0
dsp-gvp-nrep13 	=>	 0.0
dsp-gvp-data13 	=>	 0.0
dsp-gvp-n13 	=>	 0.0
dsp-gvp-dt13 	=>	 0.0
dsp-gvp-dsig13 	=>	 0.0
dsp-gvp-dz13 	=>	 0.0
dsp-gvp-dy13 	=>	 0.0
dsp-gvp-dx13 	=>	 0.0
dsp-gvp-du13 	=>	 0.0
dsp-gvp-pcjr12 	=>	 0.0
dsp-gvp-nrep12 	=>	 0.0
dsp-gvp-data12 	=>	 0.0
dsp-gvp-n12 	=>	 0.0
dsp-gvp-dt12 	=>	 0.0
dsp-gvp-dsig12 	=>	 0.0
dsp-gvp-dz12 	=>	 0.0
dsp-gvp-dy12 	=>	 0.0
dsp-gvp-dx12 	=>	 0.0
dsp-gvp-du12 	=>	 0.0
dsp-gvp-pcjr11 	=>	 0.0
dsp-gvp-nrep11 	=>	 0.0
dsp-gvp-data11 	=>	 0.0
dsp-gvp-n11 	=>	 0.0
dsp-gvp-dt11 	=>	 0.0
dsp-gvp-dsig11 	=>	 0.0
dsp-gvp-dz11 	=>	 0.0
dsp-gvp-dy11 	=>	 0.0
dsp-gvp-dx11 	=>	 0.0
dsp-gvp-du11 	=>	 0.0
dsp-gvp-pcjr10 	=>	 0.0
dsp-gvp-nrep10 	=>	 0.0
dsp-gvp-data10 	=>	 0.0
dsp-gvp-n10 	=>	 0.0
dsp-gvp-dt10 	=>	 0.0
dsp-gvp-dsig10 	=>	 0.0
dsp-gvp-dz10 	=>	 0.0
dsp-gvp-dy10 	=>	 0.0
dsp-gvp-dx10 	=>	 0.0
dsp-gvp-du10 	=>	 0.0
dsp-gvp-pcjr09 	=>	 0.0
dsp-gvp-nrep09 	=>	 0.0
dsp-gvp-data09 	=>	 0.0
dsp-gvp-n09 	=>	 0.0
dsp-gvp-dt09 	=>	 0.0
dsp-gvp-dsig09 	=>	 0.0
dsp-gvp-dz09 	=>	 0.0
dsp-gvp-dy09 	=>	 0.0
dsp-gvp-dx09 	=>	 0.0
dsp-gvp-du09 	=>	 0.0
dsp-gvp-pcjr08 	=>	 0.0
dsp-gvp-nrep08 	=>	 0.0
dsp-gvp-data08 	=>	 0.0
dsp-gvp-n08 	=>	 0.0
dsp-gvp-dt08 	=>	 0.0
dsp-gvp-dsig08 	=>	 0.0
dsp-gvp-dz08 	=>	 0.0
dsp-gvp-dy08 	=>	 0.0
dsp-gvp-dx08 	=>	 0.0
dsp-gvp-du08 	=>	 0.0
dsp-gvp-pcjr07 	=>	 0.0
dsp-gvp-nrep07 	=>	 0.0
dsp-gvp-data07 	=>	 0.0
dsp-gvp-n07 	=>	 0.0
dsp-gvp-dt07 	=>	 0.0
dsp-gvp-dsig07 	=>	 0.0
dsp-gvp-dz07 	=>	 0.0
dsp-gvp-dy07 	=>	 0.0
dsp-gvp-dx07 	=>	 0.0
dsp-gvp-du07 	=>	 0.0
dsp-gvp-pcjr06 	=>	 0.0
dsp-gvp-nrep06 	=>	 0.0
dsp-gvp-data06 	=>	 0.0
dsp-gvp-n06 	=>	 0.0
dsp-gvp-dt06 	=>	 0.0
dsp-gvp-dsig06 	=>	 0.0
dsp-gvp-dz06 	=>	 0.0
dsp-gvp-dy06 	=>	 0.0
dsp-gvp-dx06 	=>	 0.0
dsp-gvp-du06 	=>	 0.0
dsp-gvp-pcjr05 	=>	 0.0
dsp-gvp-nrep05 	=>	 0.0
dsp-gvp-data05 	=>	 0.0
dsp-gvp-n05 	=>	 0.0
dsp-gvp-dt05 	=>	 0.0
dsp-gvp-dsig05 	=>	 0.0
dsp-gvp-dz05 	=>	 0.0
dsp-gvp-dy05 	=>	 0.0
dsp-gvp-dx05 	=>	 0.0
dsp-gvp-du05 	=>	 0.0
dsp-gvp-pcjr04 	=>	 0.0
dsp-gvp-nrep04 	=>	 0.0
dsp-gvp-data04 	=>	 0.0
dsp-gvp-n04 	=>	 0.0
dsp-gvp-dt04 	=>	 0.0
dsp-gvp-dsig04 	=>	 0.0
dsp-gvp-dz04 	=>	 0.0
dsp-gvp-dy04 	=>	 0.0
dsp-gvp-dx04 	=>	 0.0
dsp-gvp-du04 	=>	 0.0
dsp-gvp-pcjr03 	=>	 0.0
dsp-gvp-nrep03 	=>	 1.0
dsp-gvp-data03 	=>	 0.0
dsp-gvp-n03 	=>	 0.0
dsp-gvp-dt03 	=>	 0.0
dsp-gvp-dsig03 	=>	 0.0
dsp-gvp-dz03 	=>	 0.0
dsp-gvp-dy03 	=>	 0.0
dsp-gvp-dx03 	=>	 0.0
dsp-gvp-du03 	=>	 0.0
dsp-gvp-pcjr02 	=>	 0.0
dsp-gvp-nrep02 	=>	 1.0
dsp-gvp-data02 	=>	 2.0
dsp-gvp-n02 	=>	 100.0
dsp-gvp-dt02 	=>	 0.2
dsp-gvp-dsig02 	=>	 0.0
dsp-gvp-dz02 	=>	 -100.0
dsp-gvp-dy02 	=>	 0.0
dsp-gvp-dx02 	=>	 0.0
dsp-gvp-du02 	=>	 -1.0
dsp-gvp-pcjr01 	=>	 0.0
dsp-gvp-nrep01 	=>	 1.0
dsp-gvp-data01 	=>	 0.0
dsp-gvp-n01 	=>	 2000.0
dsp-gvp-dt01 	=>	 1.0
dsp-gvp-dsig01 	=>	 0.0
dsp-gvp-dz01 	=>	 0.0
dsp-gvp-dy01 	=>	 0.0
dsp-gvp-dx01 	=>	 0.0
dsp-gvp-du01 	=>	 0.0
dsp-gvp-pcjr00 	=>	 0.0
dsp-gvp-nrep00 	=>	 1.0
dsp-gvp-data00 	=>	 1.0
dsp-gvp-n00 	=>	 100.0
dsp-gvp-dt00 	=>	 0.2
dsp-gvp-dsig00 	=>	 0.0
dsp-gvp-dz00 	=>	 100.0
dsp-gvp-dy00 	=>	 0.0
dsp-gvp-dx00 	=>	 0.0
dsp-gvp-du00 	=>	 1.0
dsp-TS-Repetitions 	=>	 1.0
dsp-TS-Points 	=>	 2048.0
dsp-TS-Duration 	=>	 1000.0
dsp-SP-Repetitions 	=>	 1.0
dsp-SP-Delay 	=>	 0.01
dsp-SP-Flag-V-on-X 	=>	 1.0
dsp-SP-Ramp-Time 	=>	 10.0
dsp-SP-Volts 	=>	 2.0
dsp-SP-Duration 	=>	 10.0
dsp-LP-Repetitions 	=>	 1.0
dsp-LP-Slope 	=>	 10000.0
dsp-LP-Laser-Delay 	=>	 10.0
dsp-LP-Tip-Retract 	=>	 0.0
dsp-LP-Trigger-Time 	=>	 10.0
dsp-LP-Trigger-Volts 	=>	 2.0
dsp-LP-FB-Time 	=>	 10.0
dsp-PL-Repetitions 	=>	 1.0
dsp-PL-Final-Delay 	=>	 0.01
dsp-PL-Initial-Delay 	=>	 0.01
dsp-PL-Step-dZ 	=>	 0.0
dsp-PL-Step 	=>	 0.0
dsp-PL-SetStart 	=>	 0.1
dsp-PL-dZ-ext 	=>	 0.0
dsp-PL-dZ 	=>	 0.0
dsp-PL-Volts 	=>	 2.0
dsp-PL-Res 	=>	 0.0
dsp-PL-Slope 	=>	 10000.0
dsp-PL-Duration 	=>	 10.0
dsp-Z-Final-Delay 	=>	 0.01
dsp-Z-Slope-Ramp 	=>	 100.0
dsp-Z-Reps 	=>	 1.0
dsp-Z-Slope 	=>	 100.0
dsp-Z-Points 	=>	 100.0
dsp-Z-end 	=>	 100.0
dsp-Z-start 	=>	 0.0
dsp-IV-Recover-Delay 	=>	 0.3
dsp-IV-Final-Delay 	=>	 0.01
dsp-IV-Line-Final-Delay 	=>	 1.0
dsp-IV-Line-slope 	=>	 100.0
dsp-IV-Line-dM 	=>	 0.0
dsp-IV-Line-dY 	=>	 0.0
dsp-IV-Line-dX 	=>	 50.0
dsp-IV-rep 	=>	 1.0
dsp-IV-Slope-Ramp 	=>	 50.0
dsp-IV-Slope 	=>	 10.0
dsp-IV-dz-rep 	=>	 0.0
dsp-IV-dz 	=>	 0.0
dsp-6-IV-Points05 	=>	 10.0
dsp-6-IV-End05 	=>	 1.0
dsp-6-IV-Start05 	=>	 -1.0
dsp-5-IV-Points04 	=>	 10.0
dsp-5-IV-End04 	=>	 1.0
dsp-5-IV-Start04 	=>	 -1.0
dsp-4-IV-Points03 	=>	 10.0
dsp-4-IV-End03 	=>	 1.0
dsp-4-IV-Start03 	=>	 -1.0
dsp-3-IV-Points02 	=>	 10.0
dsp-3-IV-End02 	=>	 1.0
dsp-3-IV-Start02 	=>	 -1.0
dsp-2-IV-Points01 	=>	 10.0
dsp-2-IV-End01 	=>	 1.0
dsp-2-IV-Start01 	=>	 -1.0
dsp-IV-Points00 	=>	 100.0
dsp-IV-End00 	=>	 1.0
dsp-IV-Start00 	=>	 -1.0
dsp-IV-Sections 	=>	 1.0
dsp-fbs-scan-ldc-dz 	=>	 0.0
dsp-fbs-scan-ldc-dy 	=>	 0.0
dsp-fbs-scan-ldc-dx 	=>	 0.0
dsp-fbs-vp-section 	=>	 2.0
dsp-adv-scan-slope-y 	=>	 0.0
dsp-adv-scan-slope-x 	=>	 0.0
dsp-adv-scan-xs2nd-z-offset 	=>	 0.0
dsp-adv-scan-dyn-zoom 	=>	 1.0
dsp-adv-scan-fwd-slow-down-2nd 	=>	 1.0
dsp-adv-scan-pre-pts 	=>	 0.0
dsp-adv-scan-fwd-slow-down 	=>	 1.0
dsp-adv-scan-fast-return 	=>	 1.0
dsp-adv-scan-rasterb 	=>	 0.0
dsp-adv-scan-raster 	=>	 0.0
dsp-adv-iir3-fo 	=>	 18000.0
dsp-adv-iir2-fo 	=>	 18000.0
dsp-adv-iir1-fo 	=>	 18000.0
dsp-adv-current-offset 	=>	 10.0
dsp-adv-current-crossover 	=>	 100.0
dsp-adv-iir-fo-max 	=>	 8000.0
dsp-adv-iir0-fo-min 	=>	 200.0
dsp-adv-dsp-freq-ref 	=>	 75000.0
dsp-fbs-scan-speed-scan 	=>	 4094.1
dsp-fbs-scan-speed-move 	=>	 1567.2
dsp-fbs-ci 	=>	 0.0
dsp-fbs-cp 	=>	 15.4
dsp-fbs-mx3-level 	=>	 0.0
dsp-fbs-mx3-gain 	=>	 0.5
dsp-fbs-mx3-set 	=>	 0.0
dsp-fbs-mx2-level 	=>	 0.0
dsp-fbs-mx2-gain 	=>	 0.5
dsp-fbs-mx2-set 	=>	 1.0
dsp-fbs-mx1-freq-level 	=>	 0.0
dsp-fbs-mx1-freq-gain 	=>	 -0.5
dsp-fbs-mx1-freq-set 	=>	 0.0
dsp-fbs-mx0-current-level 	=>	 0.0
dsp-fbs-mx0-current-gain 	=>	 0.5
dsp-fbs-mx0-current-set 	=>	 0.1
dsp-adv-dsp-zpos-ref 	=>	 0.0
dsp-fbs-motor 	=>	 0.0
dsp-fbs-bias3 	=>	 0.5
dsp-fbs-bias2 	=>	 0.5
dsp-fbs-bias1 	=>	 0.5
dsp-fbs-bias 	=>	 0.08567931456548372
dspmover-config-GPIO-delay 	=>	 250.0
dspmover-config-GPIO-tmp2 	=>	 0.0
dspmover-config-GPIO-tmp1 	=>	 0.0
dspmover-config-GPIO-scan 	=>	 0.0
dspmover-config-GPIO-direction 	=>	 15.0
dspmover-config-GPIO-reset 	=>	 0.0
dspmover-config-GPIO-off 	=>	 0.0
dspmover-config-GPIO-on 	=>	 0.0
dspmover-config-wave-out5-ch-z 	=>	 0.0
dspmover-config-wave-out5-ch-y 	=>	 0.0
dspmover-config-wave-out5-ch-x 	=>	 0.0
dspmover-config-wave-out4-ch-z 	=>	 0.0
dspmover-config-wave-out4-ch-y 	=>	 0.0
dspmover-config-wave-out4-ch-x 	=>	 0.0
dspmover-config-wave-out3-ch-z 	=>	 0.0
dspmover-config-wave-out3-ch-y 	=>	 0.0
dspmover-config-wave-out3-ch-x 	=>	 0.0
dspmover-config-wave-out2-ch-z 	=>	 0.0
dspmover-config-wave-out2-ch-y 	=>	 0.0
dspmover-config-wave-out2-ch-x 	=>	 0.0
dspmover-config-wave-out1-ch-z 	=>	 0.0
dspmover-config-wave-out1-ch-y 	=>	 0.0
dspmover-config-wave-out1-ch-x 	=>	 0.0
dspmover-config-wave-out0-ch-z 	=>	 5.0
dspmover-config-wave-out0-ch-y 	=>	 4.0
dspmover-config-wave-out0-ch-x 	=>	 3.0
dspmover-config-besocke-t2 	=>	 0.09
dspmover-config-besocke-t1 	=>	 0.1
dspmover-config-besocke-z-jump-ratio 	=>	 0.1
dspmover-config-IW-Phase 	=>	 55.0
dspmover-config-Wave-Offset 	=>	 0.0
dspmover-config-Wave-Space 	=>	 0.0
dspmover-z0-goto 	=>	 0.0
dspmover-z0-speed 	=>	 500.0
dspmover-z0-range 	=>	 500.0
dspmover-auto-axis-Z 	=>	 0.0
dspmover-auto-axis-Y 	=>	 0.0
dspmover-auto-axis-X 	=>	 0.0
dspmover-config-Auto-App-Retract-CI 	=>	 150.0
dspmover-config-Auto-App-Max-Settling-Time 	=>	 1000.0
dspmover-config-Auto-App-Delay 	=>	 50.0
dspmover-auto-gpio 	=>	 0.0
dspmover-auto-duration 	=>	 4.0
dspmover-auto-amplitude 	=>	 1.0
dspmover-auto-max-steps 	=>	 5.0
dspmover-lens-axis-Z 	=>	 0.0
dspmover-lens-axis-Y 	=>	 0.0
dspmover-lens-axis-X 	=>	 0.0
dspmover-lens-gpio 	=>	 0.0
dspmover-lens-duration 	=>	 5.0
dspmover-lens-amplitude 	=>	 1.0
dspmover-lens-max-steps 	=>	 100.0
dspmover-psd-axis-Z 	=>	 0.0
dspmover-psd-axis-Y 	=>	 0.0
dspmover-psd-axis-X 	=>	 0.0
dspmover-psd-gpio 	=>	 0.0
dspmover-psd-duration 	=>	 5.0
dspmover-psd-amplitude 	=>	 1.0
dspmover-psd-max-steps 	=>	 100.0
dspmover-rot-axis-Z 	=>	 0.0
dspmover-rot-axis-Y 	=>	 0.0
dspmover-rot-axis-X 	=>	 0.0
dspmover-rot-gpio 	=>	 2.0
dspmover-rot-duration 	=>	 3.0
dspmover-rot-amplitude 	=>	 1.0
dspmover-rot-max-steps 	=>	 2.0
dspmover-xy-axis-Z 	=>	 0.0
dspmover-xy-axis-Y 	=>	 0.0
dspmover-xy-axis-X 	=>	 0.0
dspmover-xy-gpio 	=>	 1.0
dspmover-xy-duration 	=>	 3.0
dspmover-xy-amplitude 	=>	 1.0
dspmover-xy-max-steps 	=>	 1000.0
SPMC_SLS_Yn 	=>	 0.0
SPMC_SLS_Ys 	=>	 0.0
SPMC_SLS_Xn 	=>	 0.0
SPMC_SLS_Xs 	=>	 0.0
rp-pacpll-RP-VERBOSE-LEVEL 	=>	 0.0
rp-pacpll-SCOPE-HEIGHT 	=>	 256.0
rp-pacpll-SCOPE-WIDTH 	=>	 1024.0
rp-pacpll-DFREQ-CONTROL-MONITOR 	=>	 0.0
rp-pacpll-CONTROL-DFREQ-FB-UPPER 	=>	 500.0
rp-pacpll-CONTROL-DFREQ-FB-LOWER 	=>	 -500.0
rp-pacpll-DFREQ-FB-CI 	=>	 -143.0
rp-pacpll-DFREQ-FB-CP 	=>	 -76.0
rp-pacpll-DFREQ-FB-SETPOINT 	=>	 0.0
rp-pacpll-DFREQ-MONITOR 	=>	 0.0
rp-pacpll-PHASE-HOLD-AM-NOISE-LIMIT 	=>	 0.0
rp-pacpll-DDS-FREQ-MONITOR 	=>	 32768.0
rp-pacpll-FREQ-FB-UPPER 	=>	 333000.0
rp-pacpll-FREQ-FB-LOWER 	=>	 32000.0
rp-pacpll-PHASE-FB-CI 	=>	 -150.0
rp-pacpll-PHASE-FB-CP 	=>	 -95.0
rp-pacpll-PHASE-FB-SETPOINT 	=>	 60.0
rp-pacpll-PHASE-MONITOR 	=>	 0.0
rp-pacpll-EXEC-AMPLITUDE-MONITOR 	=>	 0.0
rp-pacpll-EXEC-FB-UPPER 	=>	 500.0
rp-pacpll-EXEC-FB-LOWER 	=>	 -300.0
rp-pacpll-AMPLITUDE-FB-CI 	=>	 -90.0
rp-pacpll-AMPLITUDE-FB-CP 	=>	 -60.0
rp-pacpll-AMPLITUDE-FB-SETPOINT 	=>	 8.0
rp-pacpll-VOLUME-MONITOR 	=>	 0.0
rp-pacpll-TUNE-SPAN 	=>	 50.0
rp-pacpll-TUNE-DFREQ 	=>	 0.1
rp-pacpll-VOLUME-MANUAL 	=>	 0.0
rp-pacpll-AUX-SCALE 	=>	 0.011642
rp-pacpll-FREQUENCY-CENTER 	=>	 149470.0
rp-pacpll-FREQUENCY-MANUAL 	=>	 149470.0
rp-pacpll-QC-GAIN 	=>	 0.0
rp-pacpll-QC-PHASE 	=>	 0.0
rp-pacpll-PACATAU 	=>	 40.0
rp-pacpll-PACTAU 	=>	 40.0
rp-pacpll-PAC-DCTAU 	=>	 10.0
rp-pacpll-DC-OFFSET 	=>	 0.0
*
--------------------------------------------------------------------------------
(3) Gxsm3 python remote console -- help on action names used for gxsm.action command
  Hint: hover the pointer over any Gxsm Action enabled Button to see it`s action-name!
  Example: gxsm.action ("DSP_CMD_GOTO_Z0")
--------------------------------------------------------------------------------
MATH_FILTER2D_Smooth
MATH_FILTER1D_Diff
MATH_FILTER2D_Edge
MATH_FILTER2D_Normal_Z
MATH_FILTER2D_Despike
DSP_CMD_GOTO_Z0
DSP_CMD_HOME_Z0
DSP_CMD_AUTOCENTER_Z0
DSP_CMD_DOWN_Z0
DSP_CMD_UP_Z0
DSP_CMD_STOP_Z0
DSP_CMD_STOPALL
DSP_CMD_AUTOAPP
DSP_CMD_MOV-ZM_Auto
DSP_CMD_MOV-ZP_Auto
DSP_CMD_MOV-YM_Lens
DSP_CMD_MOV-XP_Lens
DSP_CMD_MOV-XM_Lens
DSP_CMD_MOV-YP_Lens
DSP_CMD_MOV-YM_PSD
DSP_CMD_MOV-XP_PSD
DSP_CMD_MOV-XM_PSD
DSP_CMD_MOV-YP_PSD
DSP_CMD_MOV-YM_Rot
DSP_CMD_MOV-XP_Rot
DSP_CMD_MOV-XM_Rot
DSP_CMD_MOV-YP_Rot
DSP_CMD_MOV-YM_XY
DSP_CMD_MOV-XP_XY
DSP_CMD_MOV-XM_XY
DSP_CMD_MOV-YP_XY
DSP_VP_ABORT_EXECUTE
DSP_VP_AX_EXECUTE
DSP_VP_AC_EXECUTE
DSP_VP_TK_EXECUTE
DSP_VP_GVP_EXECUTE
DSP_VP_RCL_V0
DSP_VP_STO_V0
DSP_VP_RCL_VPJ
DSP_VP_STO_VPJ
DSP_VP_RCL_VPI
DSP_VP_STO_VPI
DSP_VP_RCL_VPH
DSP_VP_STO_VPH
DSP_VP_RCL_VPG
DSP_VP_STO_VPG
DSP_VP_RCL_VPF
DSP_VP_STO_VPF
DSP_VP_RCL_VPE
DSP_VP_STO_VPE
DSP_VP_RCL_VPD
DSP_VP_STO_VPD
DSP_VP_RCL_VPC
DSP_VP_STO_VPC
DSP_VP_RCL_VPB
DSP_VP_STO_VPB
DSP_VP_RCL_VPA
DSP_VP_STO_VPA
DSP_VP_TS_EXECUTE
DSP_VP_SP_EXECUTE
DSP_VP_LP_EXECUTE
DSP_VP_PL_EXECUTE
DSP_VP_FZ_EXECUTE
DSP_VP_IV_EXECUTE

\end{alltt}


The following list shows a brief explanation of the commands, together with
the signature (that is the type of arguments).

'()' equals no argument. E.g. \verb+startscan()+

'(N)' equals one Integer arument. E.g. \verb+chview1d(2)+

'(X)' equals one Float argument. No example.

'(S)' equals a string. Often numbers are evaluated as strings first. Like
in \verb+set("RangeX", "234.12")+

'(S,N)' equals two parameters. E.g. \verb+gnuexport("myfilename.nc", 1)+

\begin{tabular}{ll} \hline
Scan operation\\
\texttt{startscan() }   &       Start a scan.\\
\texttt{stopscan() }    &       Stop scanning.\\
\texttt{waitscan}       &       is commented out in app\_remote.C\\
\texttt{initscan() }    &       only initialize.\\
\texttt{scanupdate() }  &       Set hardware parameters on DSP.\\
\texttt{setylookup(N,X)}&       ?\\
\texttt{scanline}       &       Not implemented.\\ \hline
File operation\\
\texttt{save() }  &       Save all.\\
\texttt{saveas(S,N) }    &       Save channel N with filename S.\\
\texttt{load(S,N)   }    &       Load file S to channel N.\\
\texttt{import(S,N) } &       Import file S to channel N.\\
\texttt{export(S,N) } &       Export channel N to file S.\\ \hline
Channel operation\\
\texttt{chmodea(N)}      &       Set channel(N) as active.\\
\texttt{chmodex(N)}      &       Set channel(N) to X.\\
\texttt{chmodem(N)}      &       Set channel(N) to Math.\\
\texttt{chmoden(N),N}    &       Set channel(N) to mode(N).\\
\texttt{chmodeno(N)}     &       Set channel(N) to mode 'No'.\\
\texttt{chview1d(N)}     &       View channel(N) in 1d-mode.\\
\texttt{chview2d(N)}     &       View channel(N) in 2d-mode.\\
\texttt{chview3d(N)}     &       View channel(N) in 3d-mode.\\ \hline
Views\\
\texttt{autodisplay()}  &       Autodisplay.\\
\texttt{quick()}        &       Set active display to quickview.\\
\texttt{direct()}       &       Set active display to directview.\\
\texttt{log()}          &       Set active display to logview.\\ \hline
Units\\
\texttt{unitbz() }      &       Set units to BZ.\\
\texttt{unitvolt()}     &       Set units to Volt.\\
\texttt{unitev()}       &       Set units to eV.\\
\texttt{units()}        &       Set units to S.\\ \hline
Others\\
\texttt{createscan(N,N,N,N,A) }  &  Create scan from array.\\
\texttt{list() }  &  Get list of known parameters for get/set.\\
\texttt{set(S,S)}       &  Set parameter to value.\\
\texttt{get(S)}         &  Get parameter, returns floating point value in current user unit .\\
\texttt{gets(S)}         &  Get parameter, returns string with user unit.\\
\texttt{action(S)}         &  Initiate Action (S): trigger menu actions and button-press events (refer to GUI tooltips in buttons and menu action list below).\\
\texttt{rtquery(S)}     &  Ask current HwI to run RTQuery with parameter S, return vector of three values depening on query.\\
\texttt{y\_current()}    &  Ask current HwI to run RTQuery what shall return the actual scanline of a scan in progress, undefined return otherwise.\\
\texttt{echo(S)  }  &       Print S to console.\\
\texttt{logev(S) }  &       Print S to logfile.\\
\texttt{sleep(N) }  &       Sleep N/10 seconds.\\
\texttt{add\_layerinformation(S,N)   }  &       Add Layerinformation string S to active scan, layer N.\\
\texttt{da0(X)   }  &       Set Analog Output channel 0 to X Volt. (not implemented).\\
\end{tabular}

\subsubsection{The set-command}


The set command can modify the following parameters:

\begin{tabular}{ll}
\texttt{ACAmp} & \texttt{ACFrq} \\
\texttt{ACPhase} & \texttt{} \\
\texttt{CPShigh} & \texttt{CPSlow} \\
\texttt{Counter} & \texttt{Energy} \\
\texttt{Gatetime} & \texttt{Layers} \\
\texttt{LengthX} & \texttt{LengthY} \\
\texttt{Offset00X} & \texttt{Offset00Y} \\
\texttt{OffsetX} & \texttt{OffsetY} \\
\texttt{PointsX} & \texttt{PointsY} \\
\texttt{RangeX} & \texttt{RangeY} \\
\texttt{Rotation} & \texttt{} \\
\texttt{StepsX} & \texttt{StepsY} \\
\texttt{SubSmp} & \texttt{VOffsetZ} \\
\texttt{VRangeZ} & \texttt{ValueEnd} \\
\texttt{ValueStart} & \texttt{nAvg} \\
\end{tabular}

These parameters are case-sensitive.
To help the python remote programmer to figure out the correct
set-names of all remote enabled entry fields a nifty option
was added to the Help menu to show tooltips with the correct "remote set name"
if the mouse is hovering over the entry.

\subsubsection{The get-command}


The \texttt{get()} command can retrieve the value of the remote control parameters.
While \texttt{get()} retrieves the internal value as a floating points number,
\texttt{gets()} reads the actual string from the text entry including units.
The list of remote control accessible parameters can be retrieved with \texttt{list()}.

\begin{alltt}
print "OffsetX = ", gxsm.get("OffsetX")
gxsm.set("OffsetX", "12.0")
print "Now OffsetX = ", gxsm.get("OffsetX")

for i in gxsm.list():
    print i, " ", gxsm.get(i), " as string: ", gxsm.gets(i)
\end{alltt}

On my machine (without hardware attached) this prints:

\begin{alltt}
OffsetX =  0.0
Now OffsetX =  12.0
Counter   0.0  as string:  00000
VOffsetZ   0.0  as string:  0 nm
VRangeZ   500.0  as string:  500 nm
Rotation   1.92285320764e-304  as string:  1.92285e-304 
TimeSelect   0.0  as string:  0
Time   1.0  as string:  1
LayerSelect   0.0  as string:  0
Layers   1.0  as string:  1
OffsetY   0.0  as string:  0.0 nm
OffsetX   12.0  as string:  12.0 nm
PointsY   1000.0  as string:  1000
PointsX   1000.0  as string:  1000
StepsY   0.519863986969  as string:  0.52 nm
StepsX   0.519863986969  as string:  0.52 nm
RangeY   64.9830993652  as string:  65.0 nm
RangeX   64.9830993652  as string:  65.0 nm
\end{alltt}

All entry fields with assigned id can now be queried.


\subsubsection{Creating new scans}


Pyremote can create new images from scratch using the
\verb+createscan+ command. Its arguments are
pixels in x-direction, pixels in y-direction,
range in x-direction (in Angstrom),
range in y-direction (in Angstrom) and finally
a flat, numeric array that must contain
as many numbers as needed to fill the matrix.

This example creates a new scan employing sine to
show some pretty landscape.

\begin{alltt}
import array   # for array
import numpy # for fromfunction
import math    # for sin

def dist(x,y):
   return ((numpy.sin((x-50)/15.0) + numpy.sin((y-50)/15.0))*100)

m = numpy.fromfunction(dist, (100,100))
n = numpy.ravel(m) # make 1-d
p = n.tolist()       # convert to list

examplearray = array.array('l', p) #
gxsm.createscan(100, 100, 10000, 10000, examplearray)
\end{alltt}


\GxsmScreenShot{GxsmPI_pyremote01}{An autogenerated image.}

This command can be easily extended to create an importer for arbitrary
file formats via python. The scripts directory contains an elaborate
example how to use this facility to import the file format employed
by Nanonis.


\subsubsection{Menupath and Plugins}


Any plugin, that has a menuentry can be
executed via the
\GxsmTT{menupath}-action command. Several of them, however, open a dialog and ask
for a specific parameter, e.g. the diff-PI in \GxsmMenu{Math/Filter1D}.
This can become annoying, when you want to batch process a greater number
of files. To execute a PI non-interactively it is possible to
call a plugin from scripts with default parameters and no user interaction.

The \GxsmTT{diff}-PI can be called like this:

\begin{alltt}
print "Welcome to Python."
gxsm.logev('my logentry')
gxsm.startscan()
gxsm.action('diff_PI')
\end{alltt}

The \GxsmTT{diff}- and \GxsmTT{smooth}-function are, at the time of this
writing, the only Math-PI, that have such an 'action'-callback. Others
will follow. See \GxsmFile{diff.C} to find out, how to extend your
favourite PI with action-capabilities.

The action-command can execute the following PI:

\begin{tabular}{ll}
\GxsmTT{diff\_PI} & kernel-size set to 5+1\\
\GxsmTT{smooth\_PI} & kernel-size set to 5+1\\
\GxsmTT{print\_PI} & defaults are read from gconf\\
\end{tabular}

GXSM3 Menu Action Table Information -- remote menu action/math/... call via action key, see table below for list, example:

\begin{alltt}
gxsm.signal_emit("math-filter1d-section-Koehler")
\end{alltt}

\begin{tabular}{l|l||l}
Section ID & Menu Entry & Action Key\\
\hline\hline
math-filter2d-section & Stat Diff & math-filter2d-section-Stat-Diff\\
math-convert-section & to float & math-convert-section-to-float\\
math-arithmetic-section & Z Rescale & math-arithmetic-section-Z-Rescale\\
math-statistics-section & Add Trail & math-statistics-section-Add-Trail\\
math-transformations-section & OctoCorr & math-transformations-section-OctoCorr\\
math-arithmetic-section & Mul X & math-arithmetic-section-Mul-X\\
math-filter2d-section & Edge & math-filter2d-section-Edge\\
math-arithmetic-section & Max & math-arithmetic-section-Max\\
math-statistics-section & Stepcounter & math-statistics-section-Stepcounter\\
math-convert-section & to double & math-convert-section-to-double\\
math-filter1d-section & Koehler & math-filter1d-section-Koehler\\
math-statistics-section & Histogram & math-statistics-section-Histogram\\
math-background-section & Line: 2nd order & math-background-section-Line--2nd-order\\
math-filter2d-section & Despike & math-filter2d-section-Despike\\
math-transformations-section & Auto Align & math-transformations-section-Auto-Align\\
math-background-section & Plane Regression & math-background-section-Plane-Regression\\
math-statistics-section & Cross Correlation & math-statistics-section-Cross-Correlation\\
math-arithmetic-section & Z Usr Rescale & math-arithmetic-section-Z-Usr-Rescale\\
math-filter1d-section & Diff & math-filter1d-section-Diff\\
math-filter2d-section & T derive & math-filter2d-section-T-derive\\
math-background-section & Pass CC & math-background-section-Pass-CC\\
math-statistics-section & Auto Correlation & math-statistics-section-Auto-Correlation\\
math-transformations-section & Rotate 90deg & math-transformations-section-Rotate-90deg\\
math-arithmetic-section & Invert & math-arithmetic-section-Invert\\
math-background-section & Plane max prop & math-background-section-Plane-max-prop\\
math-convert-section & U to float & math-convert-section-U-to-float\\
math-transformations-section & Movie Concat & math-transformations-section-Movie-Concat\\
math-transformations-section & Shear Y & math-transformations-section-Shear-Y\\
math-statistics-section & NN-distribution & math-statistics-section-NN-distribution\\
math-background-section & Waterlevel & math-background-section-Waterlevel\\
math-transformations-section & Quench Scan & math-transformations-section-Quench-Scan\\
math-arithmetic-section & Div X & math-arithmetic-section-Div-X\\
math-statistics-section & Vacancy Line Analysis & math-statistics-section-Vacancy-Line-Analysis\\
math-transformations-section & Shear X & math-transformations-section-Shear-X\\
math-convert-section & to complex & math-convert-section-to-complex\\
math-convert-section & make test & math-convert-section-make-test\\
math-misc-section & Spectrocut & math-misc-section-Spectrocut\\
math-arithmetic-section & Log & math-arithmetic-section-Log\\
math-statistics-section & Average X Profile & math-statistics-section-Average-X-Profile\\
math-filter2d-section & Lineinterpol & math-filter2d-section-Lineinterpol\\
math-background-section & Z drift correct & math-background-section-Z-drift-correct\\
math-background-section & Line Regression & math-background-section-Line-Regression\\
math-statistics-section & SPALEED Simkz & math-statistics-section-SPALEED-Simkz\\
math-convert-section & to byte & math-convert-section-to-byte\\
math-statistics-section & Slope Abs & math-statistics-section-Slope-Abs\\
math-filter2d-section & Small Convol & math-filter2d-section-Small-Convol\\
math-convert-section & to long & math-convert-section-to-long\\
math-transformations-section & Multi Dim Transpose & math-transformations-section-Multi-Dim-Transpose\\
math-arithmetic-section & Sub X & math-arithmetic-section-Sub-X\\
math-background-section & Stop CC & math-background-section-Stop-CC\\
math-filter2d-section & FT 2D & math-filter2d-section-FT-2D\\
math-convert-section & to short & math-convert-section-to-short\\
math-transformations-section & Volume Transform & math-transformations-section-Volume-Transform\\
math-background-section & Gamma & math-background-section-Gamma\\
math-background-section & Plane 3 Points & math-background-section-Plane-3-Points\\
math-transformations-section & Affine & math-transformations-section-Affine\\
math-misc-section & Shape & math-misc-section-Shape\\
math-background-section & Sub Const & math-background-section-Sub-Const\\
math-transformations-section & Flip Diagonal & math-transformations-section-Flip-Diagonal\\
math-background-section & Timescale FFT & math-background-section-Timescale-FFT\\
math-misc-section & Layersmooth & math-misc-section-Layersmooth\\
math-filter1d-section & Lin stat diff & math-filter1d-section-Lin-stat-diff\\
math-filter2d-section & Smooth & math-filter2d-section-Smooth\\
math-transformations-section & Manual Drift Fix/Align & math-transformations-section-Manual-Drift-Fix-Align\\
math-statistics-section & Polar Histogramm & math-statistics-section-Polar-Histogramm\\
math-statistics-section & feature match & math-statistics-section-feature-match\\
math-statistics-section & Angular Analysis & math-statistics-section-Angular-Analysis\\
math-transformations-section & Merge V & math-transformations-section-Merge-V\\
math-filter2d-section & Local height & math-filter2d-section-Local-height\\
math-filter2d-section & IFT 2D & math-filter2d-section-IFT-2D\\
math-statistics-section & Baseinfo & math-statistics-section-Baseinfo\\
math-transformations-section & Scale Scan & math-transformations-section-Scale-Scan\\
math-filter2d-section & Curvature & math-filter2d-section-Curvature\\
math-arithmetic-section & Add X & math-arithmetic-section-Add-X\\
math-transformations-section & Mirror X & math-transformations-section-Mirror-X\\
math-transformations-section & Merge H & math-transformations-section-Merge-H\\
math-statistics-section & feature recenter & math-statistics-section-feature-recenter\\
math-transformations-section & Shift-Area & math-transformations-section-Shift-Area\\
math-misc-section & Workfuncextract & math-misc-section-Workfuncextract\\
math-filter1d-section & t dom filter & math-filter1d-section-t-dom-filter\\
math-statistics-section & SPALEED Sim. & math-statistics-section-SPALEED-Sim.\\
math-statistics-section & Slope Dir & math-statistics-section-Slope-Dir\\
math-transformations-section & Reverse Layers & math-transformations-section-Reverse-Layers\\
math-filter1d-section & Despike & math-filter1d-section-Despike\\
math-background-section & Rm Line Shifts & math-background-section-Rm-Line-Shifts\\
math-transformations-section & Rotate & math-transformations-section-Rotate\\
math-transformations-section & Mirror Y & math-transformations-section-Mirror-Y\\
math-arithmetic-section & Z Limiter & math-arithmetic-section-Z-Limiter\\
math-probe-section & AFM Mechanical Simulation & math-probe-section-AFM-Mechanical-Simulation\\
math-probe-section & Image Extract & math-probe-section-Image-Extract\\
\hline
file-import-section & PNG & file-import-section-PNG\\
file-export-section & PNG & file-export-section-PNG\\
file-import-section & WIP & file-import-section-WIP\\
file-export-section & WIP & file-export-section-WIP\\
file-import-section & primitive auto & file-import-section-primitive-auto\\
file-export-section & primitive auto & file-export-section-primitive-auto\\
file-import-section & UKSOFT & file-import-section-UKSOFT\\
file-export-section & UKSOFT & file-export-section-UKSOFT\\
file-import-section & PsiHDF & file-import-section-PsiHDF\\
file-export-section & PsiHDF & file-export-section-PsiHDF\\
file-import-section & WSxM & file-import-section-WSxM\\
file-export-section & WSxM & file-export-section-WSxM\\
file-import-section & RHK-200 & file-import-section-RHK-200\\
file-import-section & RHK SPM32 & file-import-section-RHK-SPM32\\
file-export-section & RHK SPM32 & file-export-section-RHK-SPM32\\
file-import-section & Nano Scope & file-import-section-Nano-Scope\\
file-import-section & Omicron Scala & file-import-section-Omicron-Scala\\
file-import-section & UK2k & file-import-section-UK2k\\
file-import-section & Vis5D & file-import-section-Vis5D\\
file-export-section & Vis5D & file-export-section-Vis5D\\
file-import-section & G-dat & file-import-section-G-dat\\
file-export-section & G-dat & file-export-section-G-dat\\
file-import-section & SDF & file-import-section-SDF\\
file-import-section & GME Dat & file-import-section-GME-Dat\\
file-export-section & GME Dat & file-export-section-GME-Dat\\
file-import-section & ASCII & file-import-section-ASCII\\
file-export-section & ASCII & file-export-section-ASCII\\
file-import-section & SPA4-d2d & file-import-section-SPA4-d2d\\
file-export-section & SPA4-d2d & file-export-section-SPA4-d2d\\
file-import-section & Quicktime & file-import-section-Quicktime\\
file-export-section & Quicktime & file-export-section-Quicktime\\
\end{tabular}


\subsubsection{DSP-Control}


The DSP-Control is the heart of SPM activity. The following parameters
can be set with \GxsmTT{set}. (DSP2 commands are available in Gxsm 2 only)

\GxsmNote{Manual Hacker notes: list of DSP/DSP2 is depricated. All entry fields with hover-over entry id is now remote capable.}

\begin{tabular}{ll}
\GxsmTT{DSP\_CI} & \GxsmTT{DSP2\_CI} \\
\GxsmTT{DSP\_CP} & \GxsmTT{DSP2\_CP} \\
\GxsmTT{DSP\_CS} & \GxsmTT{DSP2\_CS} \\
\GxsmTT{DSP\_I} & \GxsmTT{DSP2\_I} \\
\GxsmTT{DSP\_MoveLoops} & \GxsmTT{DSP2\_MoveLoops} \\
\GxsmTT{DSP\_MoveSpd} & \GxsmTT{DSP2\_MoveSpd} \\
\GxsmTT{DSP\_NAvg} & \GxsmTT{DSP2\_NAvg} \\
\GxsmTT{DSP\_Pre} & \GxsmTT{DSP2\_Pre} \\
\GxsmTT{DSP\_ScanLoops} & \GxsmTT{DSP2\_ScanLoops} \\
\GxsmTT{DSP\_ScanSpd} & \GxsmTT{DSP2\_ScanSpd} \\
\GxsmTT{DSP\_SetPoint} & \GxsmTT{DSP2\_SetPoint} \\
\GxsmTT{DSP\_U} & \GxsmTT{DSP2\_U} \\
\end{tabular}

\GxsmNote{Manual Hacker notes: VP exectutes via hover-over ExecuteID and action command.}



\subsubsection{Peakfinder}


Another plugin allows remote control. The plugin-functions are commonly
executed by a call of the \GxsmTT{action}-command. It is
\GxsmFile{Peakfinder}:

DSP Peak Find Plugin Commandset for the SPA-LEED peak finder:\\

\begin{tabular}{lllll}
\multicolumn{5}{c}{Commands Plugin \filename{DSP Peak Find}:}\\ \\ \hline
Cmd & Arg. & \multicolumn{2}{l}{Values} & Description\\ \hline
\hline
action & DSPPeakFind\_XY0\_1 &&& Get fitted XY Position\\
action & DSPPeakFind\_OffsetFromMain\_1 &&& Get Offset from Main\\
action & DSPPeakFind\_OffsetToMain\_1 &&& Put Offset to Main\\
action & DSPPeakFind\_EfromMain\_1 &&& Get Energy from Main\\
action & DSPPeakFind\_RunPF\_1 &&& Run Peak Finder\\
\hline
action & DSPPeakFind\_XXX\_N &&& run action XXX (see above)\\
       &                    &&& on PF Folder N\\
\end{tabular}

The call is equivalent to the example above.

\subsubsection{Peakfinder}


\subsubsection{Configuration}


The plugin can be configured in the preferences. The default script
that will be loaded when the console is enetred for the first time
is defined in the path-tab in item \GxsmFile{PyremoteFile}.
The name must be a qualified python module name. A module name
is not a filename! Thus \verb+remote.py+ is not a valid entry,
but \verb+remote+ (the default) is. The module is found by searching the
directories listed in the environment variable PYTHONPATH. If no file is
defined or a file matching the name cannot be found, a warning will be issued.

The module with GXSM internal commands
is called \GxsmFile{gxsm}.

To find the Python-script \GxsmFile{remote.py}, the environment-variable
PYTHONPATH is evaluated. If it is not expliticly declared, GXSM will set
PYTHONPATH to your current working directory. This is equivalent to the
following call:

\begin{alltt}
$export PYTHONPATH='.'
$gxsm3
\end{alltt}

Thus, the script in your current working directory will be found.

If you want to put your script somewhere else than into the
current directory, modify the environment variable
\GxsmFile{PYTHONPATH}. Python
will look into all directories, that are stored there.

\begin{alltt}
$export PYTHONPATH='/some/obscure/path/'
$gxsm
\end{alltt}

Or you can link it from somewhere else. Or you can create a one line script,
that executes another script or several scripts. Do whatever you like.


\subsubsection{Files}

 Python precompiles your remote.py to remote.pyc. You can safely remove the
file remote.pyc file at any time, Python will regenerate it upon start of
the interpreter.

\subsubsection{References}

See the appendix for more information. Don't know Python? Visit
\GxsmTT{python.org}.

\subsubsection{Known Bugs}


The error handling is only basic. Your script may run if you give
wrong parameters but not deliver the wanted results. You can crash
Gxsm or even X! E.g. by selecting an illegal channel. Remember that channel
counting in the scripts begins with 0. Gxsm's channel numbering begins with 1.

The embedded functions return $-1$ as error value. It's a good idea
to attach \texttt{print} to critical commands to check this.

The \verb+remote_echo+ command is implemented via debug printing.
Using Pythons \texttt{print} is recommended.

The view functions \GxsmFile{quick}, \GxsmFile{direct}, \GxsmFile{log}
change the viewmode, but not the button in the main window, don't be
confused.

The waitscan and da0 function are not yet implemented and likely will never
be.

The library detection during compilation is amateurish. Needs work.

Python will check for the
right type of your arguments. Remember, that all values in \GxsmTT{set} are strings
and have to be quoted. Additionaly care for the case sensitivity.

If you you want to pause script execution, use the embedded sleep command
\GxsmTT{gxsm.sleep()} and not \GxsmTT{time.sleep()}, because the function from
the time library will freeze GXSM totally during the sleep.
(This is not a bug, it's a feature.)

\GxsmNote{
TODO: Add more action-handlers in Math-PI.
% and clean up inconsistent use of spaces and tabs.
}

\GxsmHint{
If you write a particularly interesting remote-script, please give it back
to the community. The GXSM-Forums always welcome input.
}

\index{C-PlugIn!common/pyremote.C}
\index{PlugIn!pyremote}
\index{GXSM-Menu!Tools/Pyremote Console}
\subsubsection{Info for Plug-In: Tools/Pyremote Console }
\begin{tabbing}
Plug-In name:   \= Stefan Schr\"oderpyremote \= Email: \= x \kill
Plug-In name:   \> pyremote\>  File:  \> common/pyremote.C\\
Author:	        \> Stefan Schr\"oder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/common/extra_scan_info.C
% ------------------------------------------------------------

\section{Query Hardware/DSP software information}
% Name=extra\_scan\_info
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/Hardware Info

\label{pi:extrascaninfo}
\subsubsection{Description}

\label{plugin:extra_scan_info} 

This plugin looks for a file named \GxsmFile{gxsm\_extra\_scan\_info} in the current
working directory at each file save action. It's content is added to the NetCDF file
as variable named extra\_scan\_info.


\subsubsection{Usage}

Works automatic if loaded.

\GxsmNote{
}

\index{C-PlugIn!common/extra\_scan\_info.C}
\index{PlugIn!extra\_scan\_info}
\index{GXSM-Menu!Tools/Hardware Info}
\subsubsection{Info for Plug-In: Tools/Hardware Info }
\begin{tabbing}
Plug-In name:   \= Percy Zahlextra\_scan\_info \= Email: \= x \kill
Plug-In name:   \> extra\_scan\_info\>  File:  \> common/extra\_scan\_info.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/common/mkicons.C
% ------------------------------------------------------------

\section{MkIcons -- Make icons}
% Name=mkicons
% Author=Stefan Schr\"oder
% Email=stefan\_fkp@users.sf.net
% Menupath=Tools

\label{pi:mkicons}
\subsubsection{Description}

This plugin helps you printing several nc-images on one page.

\subsubsection{Usage}

 Choose Mkicons from the \GxsmMenu{Tools} menu. 

\index{C-PlugIn!common/mkicons.C}
\index{PlugIn!mkicons}
\index{GXSM-Menu!Tools}
\subsubsection{Info for Plug-In: Tools }
\begin{tabbing}
Plug-In name:   \= Stefan Schr\"odermkicons \= Email: \= x \kill
Plug-In name:   \> mkicons\>  File:  \> common/mkicons.C\\
Author:	        \> Stefan Schr\"oder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/common/queryDSPinfo.C
% ------------------------------------------------------------

\section{Query Hardware/DSP software information}
% Name=queryDSPinfo
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/Hardware Info

\label{pi:queryDSPinfo}
\subsubsection{Description}

\label{plugin:queryDSPinfo} 

This plugin asks the DSP, e.g the connected hardware or driver/module,
to report informations about the current running software. This is
used by Gxsm for automatic configuration of several features. -- This
new feature will be expanded and used more intens future versions.

\subsubsection{Usage}

Call it using the menu \GxsmMenu{Tools/Hardware Info}.

\GxsmNote{
This works only with the second DSP software generation, starting with xsm CVS V1.20!
And it works with the kernel DSP emulation modules!
}

\index{C-PlugIn!common/queryDSPinfo.C}
\index{PlugIn!queryDSPinfo}
\index{GXSM-Menu!Tools/Hardware Info}
\subsubsection{Info for Plug-In: Tools/Hardware Info }
\begin{tabbing}
Plug-In name:   \= Percy ZahlqueryDSPinfo \= Email: \= x \kill
Plug-In name:   \> queryDSPinfo\>  File:  \> common/queryDSPinfo.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/common/PanView.C
% ------------------------------------------------------------

\section{Pan View}

% Name=PanView
% Author=Kristan Temme, Thorsten Wagner, Percy Zahl
% Email=stm@users.sf.net
% Menupath=Tools/Pan View 
\label{pi:PanView}
\subsubsection{Description}

 This is a handy tool which shows you, where your current scan is in the
 range of the maximum scan. Especially it gives you an error message if you
 leave the scan area. It also shows the position of rotated scans.

 In addition the current realtime XY position of the tip plus it
 indicates the Z-position of the tip is visualized by the marker on
 the right edge of the window.

\GxsmScreenShot{PanView}{The PanView window.}


\subsubsection{Usage}

 Although this is a plugin it is opened automatically upon startup of GXSM.
 There is not interaction with the user.

\GxsmScreenShot{PanView_indicators}{The indicators of the PanView window.}

 1.) Indicator of the state machine on the DSP. In general the colors 
 indicate green=ON/in progress, red=OFF/inactive. From left to right
 the boxed indicate the status of the feedback, scan in progress, 
 vector proce in progress, mover in progress (coarse approach)

 2.) Indicators of the 8 GPIO channels. They can be read on/off 
 (red/black) or write on/off (green/white) giving you four possible 
 states.

 3.) Indicator of the Z position (Z-offset/z-scan)

\GxsmNote{
}

\GxsmHint{
}

\subsubsection{Known Bugs}

 None

\index{C-PlugIn!common/PanView.C}
\index{PlugIn!PanView}
\index{GXSM-Menu!Tools/Pan View }
\subsubsection{Info for Plug-In: Tools/Pan View  }
\begin{tabbing}
Plug-In name:   \= Kristan Temme, Thorsten Wagner, Percy ZahlPanView \= Email: \= x \kill
Plug-In name:   \> PanView\>  File:  \> common/PanView.C\\
Author:	        \> Kristan Temme, Thorsten Wagner, Percy Zahl\>  Email: \> stm@users.sf.net\\
\end{tabbing}

\GxsmClearpage

% PlugIn: ./plug-ins/common/printer.C
% ------------------------------------------------------------

\section{Postscript printing tool}
% Name=printer
% Author=Stefan Schr\"oder
% Email=stefan\_fkp@users.sf.net
% Menupath=File/Print

\label{pi:printer}
\subsubsection{Description}

This plugin replaces the GXSM core print utility.

\subsubsection{Usage}

 Choose Print from the \GxsmMenu{File} menu. 
This Plugin can be run from the remote python script with
\verb+emb.action("print_PI")+. The default action is to print
to a file with the same name as the nc-file. Other defaults are
read from the gconf-registry. We don not print to a printer by default
to allow mangling of the resulting PS-files after the PS-file creation.
(It's a feature, not a bug. Later, configuration of the print action
may be possible. Stay tuned.)
\index{C-PlugIn!common/printer.C}
\index{PlugIn!printer}
\index{GXSM-Menu!File/Print}
\subsubsection{Info for Plug-In: File/Print }
\begin{tabbing}
Plug-In name:   \= Stefan Schr\"oderprinter \= Email: \= x \kill
Plug-In name:   \> printer\>  File:  \> common/printer.C\\
Author:	        \> Stefan Schr\"oder\>  Email: \> stefan\_fkp@users.sf.net\\
\end{tabbing}

% PlugIn: ./plug-ins/common/ProbeIndicator.C
% ------------------------------------------------------------

\section{Probe Indicator}

% Name=ProbeIndicator
% Author=Percy Zahl
% Email=zahl@users.sf.net
% Menupath=Tools/Probe Indicator
\label{pi:ProbeIndicator}
\subsubsection{Description}

The Probe Indicator (Note: head up display (HUD) as future option was designed to be overlayed on any scans canvas) 
is intended to give a real time feedback and provide dedicated monitoring of the tip/probe conditions. 
Visually indicating probe postion (Z), current and frequency.
It also provides a contineous rolling graphical view of Z and current plus a (work in progress) spectral analysis.
Plus a recording button allows to gapless record two channels (Current, Z,...) as selected for the Recorder Signals1 and 2 inputs.
You will have to use currently the pyton spm control app/Oszi if you like to change the default channels used here.

\begin{figure}[hbt]
\center { \fighalf{ProbeIndicator}}
\caption{The ProbeIndicator window explained.}
\label{fig:ProbeIndicator}
\end{figure}


\subsubsection{Usage}

Although this is a plugin it is opened automatically upon startup of GXSM automatically, you will need to open first time via Main menu Window/Probe-Hud.

Please have a look for a demo:

\GxsmVideoURL{https://youtu.be/eB1FO76M7gI}

\GxsmVideoURL{https://youtu.be/vTrldyKxrZ4}


\GxsmNote{not included: a signal selector for Signal 1 and 2 (recorder). 
Use the spm control python app, oscilloscope and setup teh channels there: 
Select "MIX IN 0" for CH1 and "Z Servo Neg" for CH2.}

What the recorder does excatly:

It records 2x 4096 data points (scope channel) at full BW, they are plotted in a 4096 to 128 decimated graph.

And it records in a constant gap less continuous stream a 1:256 decimated data stream for both signals.

Checking the [o] record button this data is (for ever, until you
delete it) appended into two files located in the working directory
(where you start gxsm3). It writes away plain integer numbers and
occasional (every 60s) a line starting with a double comment \#\# nnnn
absolute system time stamp in us. And for every read block a index \# $n \dots m$ range.
That may be used to precisely align both data sets in two
individual files. Sample rate is exactly 150kHz/256.

Using the "Magnifying Button" (Zoom) you can choose to plot at FULL BW the first 128 points.


The Signal Button turns the scope on.

The Info Button toggles some text info overlay.

The [x] Button (left) selects FULL BW FFT display.


Scope scaling is fully automatic...

FFT scale in double log dB(Freq).... but needs still some optimizations. FFT is run either on decimated 1:256 or FULL BW data.

Also it shows a symbolic tip... indication the actual Z-position, up it tip "up".


And a logarithmic current scale bar polar graph and indicators on the outside. Bottom is Zero, 1st tic is 10p, then 100p, ... left / right = pos/neg

The markers and short polar indicator at the position indicated the current absolute min/max (low pass filtered) for the current as read by the scope!



\GxsmNote{
MK3 only.
}

\GxsmHint{
}

\subsubsection{Known Bugs}

 None

\index{C-PlugIn!common/ProbeIndicator.C}
\index{PlugIn!ProbeIndicator}
\index{GXSM-Menu!Tools/Probe Indicator}
\subsubsection{Info for Plug-In: Tools/Probe Indicator }
\begin{tabbing}
Plug-In name:   \= Percy ZahlProbeIndicator \= Email: \= x \kill
Plug-In name:   \> ProbeIndicator\>  File:  \> common/ProbeIndicator.C\\
Author:	        \> Percy Zahl\>  Email: \> zahl@users.sf.net\\
\end{tabbing}

% ------------------------------------------------------------

% finished PlugIn docu scan.
% End of autogenerated PlugIn docu file.
